var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||typeof Object.defineProperties=='function'?Object.defineProperty:function(b,c,a){a=a;if(b==Array.prototype||b==Object.prototype){return}b[c]=a.value};$jscomp.getGlobal=function(a){return typeof window!='undefined'&&window===a?a:typeof global!='undefined'&&global!=null?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(i,f,j,k){if(!f){return}var a=$jscomp.global;var b=i.split('.');for(var e=0;e<b.length-1;e++){var d=b[e];if(!(d in a)){a[d]={}}a=a[d]}var g=b[b.length-1];var h=a[g];var c=f(h);if(c==h||c==null){return}$jscomp.defineProperty(a,g,{configurable:!0,writable:!0,value:c})};$jscomp.polyfill('Array.prototype.copyWithin',function(a){if(a){return a}var b=function(d,c,b){var e=this.length;d=Number(d);c=Number(c);b=Number(b!=null?b:e);if(d<c){b=Math.min(b,e);while(c<b){if(c in this){this[d++]=this[c++]}else {delete this[d++];c++}}}else {b=Math.min(b,e+c-d);d+=b-c;while(b>c){if(--b in this){this[--d]=this[b]}else {delete this[d]}}}return this};return b},'es6','es3');$jscomp.SYMBOL_PREFIX='jscomp_symbol_';$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};if(!$jscomp.global['Symbol']){$jscomp.global['Symbol']=$jscomp.Symbol}};$jscomp.Symbol=function(){var a=0;function Symbol(b){return $jscomp.SYMBOL_PREFIX+(b||'')+a++}return Symbol}();$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global['Symbol'].iterator;if(!a){a=$jscomp.global['Symbol'].iterator=$jscomp.global['Symbol']('iterator')}if(typeof Array.prototype[a]!='function'){$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}})}$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var b=0;return $jscomp.iteratorPrototype(function(){if(b<a.length){return {done:!1,value:a[b++]}}else {return {done:!0}}})};$jscomp.iteratorPrototype=function(b){$jscomp.initSymbolIterator();var a={next:b};a[$jscomp.global['Symbol'].iterator]=function(){return this};return a};$jscomp.iteratorFromArray=function(a,d){$jscomp.initSymbolIterator();if(a instanceof String){a=a+''}var c=0;var b={next:function(){if(c<a.length){var e=c++;return {value:d(e,a[e]),done:!1}}b.next=function(){return {done:!0,value:void 0}};return b.next()}};b[Symbol.iterator]=function(){return b};return b};$jscomp.polyfill('Array.prototype.entries',function(a){if(a){return a}var b=function(){return $jscomp.iteratorFromArray(this,function(b,c){return [b,c]})};return b},'es6','es3');$jscomp.polyfill('Array.prototype.fill',function(a){if(a){return a}var b=function(f,c,b){var d=this.length||0;if(c<0){c=Math.max(0,d+c)}if(b==null||b>d){b=d}b=Number(b);if(b<0){b=Math.max(0,d+b)}for(var e=Number(c||0);e<b;e++){this[e]=f}return this};return b},'es6','es3');$jscomp.findInternal=function(a,d,e){if(a instanceof String){a=String(a)}var f=a.length;for(var b=0;b<f;b++){var c=a[b];if(d.call(e,c,b,a)){return {i:b,v:c}}}return {i:-1,v:void 0}};$jscomp.polyfill('Array.prototype.find',function(a){if(a){return a}var b=function(c,b){return $jscomp.findInternal(this,c,b).v};return b},'es6','es3');$jscomp.polyfill('Array.prototype.findIndex',function(a){if(a){return a}var b=function(c,b){return $jscomp.findInternal(this,c,b).i};return b},'es6','es3');$jscomp.polyfill('Array.from',function(a){if(a){return a}var b=function(b,c,g){$jscomp.initSymbolIterator();c=c!=null?c:function(d){return d};var d=[];var f=b[Symbol.iterator];if(typeof f=='function'){b=f.call(b);var h;while(!(h=b.next()).done){d.push(c.call(g,h.value))}}else {var i=b.length;for(var e=0;e<i;e++){d.push(c.call(g,b[e]))}}return d};return b},'es6','es3');$jscomp.polyfill('Object.is',function(a){if(a){return a}var b=function(b,c){if(b===c){return b!==0||1/b===1/c}else {return b!==b&&c!==c}};return b},'es6','es3');$jscomp.polyfill('Array.prototype.includes',function(a){if(a){return a}var b=function(d,e){var b=this;if(b instanceof String){b=String(b)}var f=b.length;for(var c=e||0;c<f;c++){if(b[c]==d||Object.is(b[c],d)){return !0}}return !1};return b},'es7','es3');$jscomp.polyfill('Array.prototype.keys',function(a){if(a){return a}var b=function(){return $jscomp.iteratorFromArray(this,function(b){return b})};return b},'es6','es3');$jscomp.polyfill('Array.of',function(a){if(a){return a}var b=function(b){return Array.from(arguments)};return b},'es6','es3');$jscomp.polyfill('Array.prototype.values',function(a){if(a){return a}var b=function(){return $jscomp.iteratorFromArray(this,function(c,b){return b})};return b},'es6','es3');$jscomp.makeIterator=function(a){$jscomp.initSymbolIterator();var b=a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.polyfill('Promise',function(c){if(c&&!$jscomp.FORCE_POLYFILL_PROMISE){return c}function AsyncExecutor(){this.batch_=null}AsyncExecutor.prototype.asyncExecute=function(a){if(this.batch_==null){this.batch_=[];this.asyncExecuteBatch_()}this.batch_.push(a);return this};AsyncExecutor.prototype.asyncExecuteBatch_=function(){var a=this;this.asyncExecuteFunction(function(){a.executeBatch_()})};var e=$jscomp.global['setTimeout'];AsyncExecutor.prototype.asyncExecuteFunction=function(a){e(a,0)};AsyncExecutor.prototype.executeBatch_=function(){while(this.batch_&&this.batch_.length){var b=this.batch_;this.batch_=[];for(var a=0;a<b.length;++a){var d=b[a];delete b[a];try{d()}catch(f){this.asyncThrow_(f)}}}this.batch_=null};AsyncExecutor.prototype.asyncThrow_=function(a){this.asyncExecuteFunction(function(){throw a})};var b={PENDING:0,FULFILLED:1,REJECTED:2};var a=function(d){this.state_=b.PENDING;this.result_=undefined;this.onSettledCallbacks_=[];var a=this.createResolveAndReject_();try{d(a.resolve,a.reject)}catch(f){a.reject(f)}};a.prototype.createResolveAndReject_=function(){var b=this;var a=!1;function firstCallWins(d){return function(e){if(!a){a=!0;d.call(b,e)}}}return {resolve:firstCallWins(this.resolveTo_),reject:firstCallWins(this.reject_)}};a.prototype.resolveTo_=function(b){if(b===this){this.reject_(new TypeError('A Promise cannot resolve to itself'))}else {if(b instanceof a){this.settleSameAsPromise_(b)}else {if(isObject(b)){this.resolveToNonPromiseObj_(b)}else {this.fulfill_(b)}}}};a.prototype.resolveToNonPromiseObj_=function(b){var a=undefined;try{a=b.then}catch(f){this.reject_(f);return}if(typeof a=='function'){this.settleSameAsThenable_(a,b)}else {this.fulfill_(b)}};function isObject(a){switch(typeof a){case 'object':return a!=null;case 'function':return !0;default:return !1;}}a.prototype.reject_=function(a){this.settle_(b.REJECTED,a)};a.prototype.fulfill_=function(a){this.settle_(b.FULFILLED,a)};a.prototype.settle_=function(d,a){if(this.state_!=b.PENDING){throw new Error('Cannot settle('+d+', '+a|'): Promise already settled in state'+this.state_)}this.state_=d;this.result_=a;this.executeOnSettledCallbacks_()};a.prototype.executeOnSettledCallbacks_=function(){if(this.onSettledCallbacks_!=null){var b=this.onSettledCallbacks_;for(var a=0;a<b.length;++a){b[a].call();b[a]=null}this.onSettledCallbacks_=null}};var d=new AsyncExecutor();a.prototype.settleSameAsPromise_=function(b){var a=this.createResolveAndReject_();b.callWhenSettled_(a.resolve,a.reject)};a.prototype.settleSameAsThenable_=function(b,d){var a=this.createResolveAndReject_();try{b.call(d,a.resolve,a.reject)}catch(f){a.reject(f)}};a.prototype.then=function(f,g){var b;var d;var e=new a(function(a,e){b=a;d=e});function createCallback(a,e){if(typeof a=='function'){return function(h){try{b(a(h))}catch(i){d(i)}}}else {return e}}this.callWhenSettled_(createCallback(f,b),createCallback(g,d));return e};a.prototype['catch']=function(a){return this.then(undefined,a)};a.prototype.callWhenSettled_=function(e,f){var a=this;function callback(){switch(a.state_){case b.FULFILLED:e(a.result_);break;case b.REJECTED:f(a.result_);break;default:throw new Error('Unexpected state: '+a.state_);}}if(this.onSettledCallbacks_==null){d.asyncExecute(callback)}else {this.onSettledCallbacks_.push(function(){d.asyncExecute(callback)})}};function resolvingPromise(b){if(b instanceof a){return b}else {return new a(function(a,d){a(b)})}}a['resolve']=resolvingPromise;a['reject']=function(b){return new a(function(d,a){a(b)})};a['race']=function(b){return new a(function(e,f){var d=$jscomp.makeIterator(b);for(var a=d.next();!a.done;a=d.next()){resolvingPromise(a.value).callWhenSettled_(e,f)}})};a['all']=function(e){var d=$jscomp.makeIterator(e);var b=d.next();if(b.done){return resolvingPromise([])}else {return new a(function(g,h){var a=[];var f=0;function onFulfilled(b){return function(d){a[b]=d;f--;if(f==0){g(a)}}}do{a.push(undefined);f++;resolvingPromise(b.value).callWhenSettled_(onFulfilled(a.length-1),h);b=d.next()}while(!b.done)})}};return a},'es6','es3');$jscomp.executeAsyncGenerator=function(a){function passValueToGenerator(b){return a.next(b)}function passErrorToGenerator(b){return a['throw'](b)}return new Promise(function(b,c){function handleGeneratorRecord(d){if(d.done){b(d.value)}else {Promise.resolve(d.value).then(passValueToGenerator,passErrorToGenerator).then(handleGeneratorRecord,c)}}handleGeneratorRecord(a.next())})};$jscomp.owns=function(b,a){return Object.prototype.hasOwnProperty.call(b,a)};$jscomp.polyfill('WeakMap',function(c){function isConformant(){if(!c||!Object.seal){return !1}try{var b=Object.seal({});var d=Object.seal({});var a=new c([[b,2],[d,3]]);if(a.get(b)!=2||a.get(d)!=3){return !1}a['delete'](b);a.set(d,4);return !a.has(b)&&a.get(d)==4}catch(e){return !1}}if(isConformant()){return c}var a='$jscomp_hidden_'+Math.random().toString().substring(2);function insert(b){if(!$jscomp.owns(b,a)){var d={};$jscomp.defineProperty(b,a,{value:d})}}function patch(a){var b=Object[a];if(b){Object[a]=function(d){insert(d);return b(d)}}}patch('freeze');patch('preventExtensions');patch('seal');var d=0;var b=function(a){this.id_=(d+=Math.random()+1).toString();if(a){$jscomp.initSymbol();$jscomp.initSymbolIterator();var f=$jscomp.makeIterator(a);var b;while(!(b=f.next()).done){var e=b.value;this.set(e[0],e[1])}}};b.prototype.set=function(b,d){insert(b);if(!$jscomp.owns(b,a)){throw new Error('WeakMap key fail: '+b)}b[a][this.id_]=d;return this};b.prototype.get=function(b){return $jscomp.owns(b,a)?b[a][this.id_]:undefined};b.prototype.has=function(b){return $jscomp.owns(b,a)&&$jscomp.owns(b[a],this.id_)};b.prototype['delete']=function(b){if(!$jscomp.owns(b,a)||!$jscomp.owns(b[a],this.id_)){return !1}return delete b[a][this.id_]};return b},'es6','es3');$jscomp.MapEntry=function(){this.previous;this.next;this.head;this.key;this.value};$jscomp.polyfill('Map',function(b){var g=!$jscomp.ASSUME_NO_NATIVE_MAP&&function(){if(!b||!b.prototype.entries||typeof Object.seal!='function'){return !1}try{b=b;var e=Object.seal({x:4});var c=new b($jscomp.makeIterator([[e,'s']]));if(c.get(e)!='s'||c.size!=1||c.get({x:4})||c.set({x:4},'t')!=c||c.size!=2){return !1}var d=c.entries();var a=d.next();if(a.done||a.value[0]!=e||a.value[1]!='s'){return !1}a=d.next();if(a.done||a.value[0].x!=4||a.value[1]!='t'||!d.next().done){return !1}return !0}catch(j){return !1}}();if(g){return b}$jscomp.initSymbol();$jscomp.initSymbolIterator();var e=new WeakMap();var a=function(a){this.data_={};this.head_=f();this.size=0;if(a){var e=$jscomp.makeIterator(a);var c;while(!(c=e.next()).done){var d=c.value;this.set(d[0],d[1])}}};a.prototype.set=function(e,d){var a=c(this,e);if(!a.list){a.list=this.data_[a.id]=[]}if(!a.entry){a.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:e,value:d};a.list.push(a.entry);this.head_.previous.next=a.entry;this.head_.previous=a.entry;this.size++}else {a.entry.value=d}return this};a.prototype['delete']=function(d){var a=c(this,d);if(a.entry&&a.list){a.list.splice(a.index,1);if(!a.list.length){delete this.data_[a.id]}a.entry.previous.next=a.entry.next;a.entry.next.previous=a.entry.previous;a.entry.head=null;this.size--;return !0}return !1};a.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=f();this.size=0};a.prototype.has=function(a){return !!c(this,a).entry};a.prototype.get=function(d){var a=c(this,d).entry;return a&&a.value};a.prototype.entries=function(){return d(this,function(a){return [a.key,a.value]})};a.prototype.keys=function(){return d(this,function(a){return a.key})};a.prototype.values=function(){return d(this,function(a){return a.value})};a.prototype.forEach=function(e,d){var f=this.entries();var c;while(!(c=f.next()).done){var a=c.value;e.call(d,a[1],a[0],this)}};a.prototype[Symbol.iterator]=a.prototype.entries;var c=function(g,e){var f=i(e);var a=g.data_[f];if(a&&$jscomp.owns(g.data_,f)){for(var d=0;d<a.length;d++){var c=a[d];if(e!==e&&c.key!==c.key||e===c.key){return {id:f,list:a,index:d,entry:c}}}}return {id:f,list:a,index:-1,entry:undefined}};var d=function(c,d){var a=c.head_;return $jscomp.iteratorPrototype(function(){if(a){while(a.head!=c.head_){a=a.previous}while(a.next!=a.head){a=a.next;return {done:!1,value:d(a)}}a=null}return {done:!0,value:void 0}})};var f=function(){var a={};a.previous=a.next=a.head=a;return a};var h=0;var i=function(a){var c=a&&typeof a;if(c=='object'||c=='function'){a=a;if(!e.has(a)){var d=''+ ++h;e.set(a,d);return d}return e.get(a)}return 'p_'+a};return a},'es6','es3');$jscomp.polyfill('Math.acosh',function(a){if(a){return a}var b=function(b){b=Number(b);return Math.log(b+Math.sqrt(b*b-1))};return b},'es6','es3');$jscomp.polyfill('Math.asinh',function(a){if(a){return a}var b=function(b){b=Number(b);if(b===0){return b}var c=Math.log(Math.abs(b)+Math.sqrt(b*b+1));return b<0?-c:c};return b},'es6','es3');$jscomp.polyfill('Math.log1p',function(a){if(a){return a}var b=function(b){b=Number(b);if(b<0.25&&b>-0.25){var f=b;var g=1;var c=b;var d=0;var e=1;while(d!=c){f*=b;e*=-1;c=(d=c)+e*f/++g}return c}return Math.log(1+b)};return b},'es6','es3');$jscomp.polyfill('Math.atanh',function(b){if(b){return b}var a=Math.log1p;var c=function(c){c=Number(c);return (a(c)-a(-c))/2};return c},'es6','es3');$jscomp.polyfill('Math.cbrt',function(a){if(a){return a}var b=function(b){if(b===0){return b}b=Number(b);var c=Math.pow(Math.abs(b),1/3);return b<0?-c:c};return b},'es6','es3');$jscomp.polyfill('Math.clz32',function(a){if(a){return a}var b=function(b){b=Number(b)>>>0;if(b===0){return 32}var c=0;if((b&4.29490176E9)===0){b<<=16;c+=16}if((b&4.27819008E9)===0){b<<=8;c+=8}if((b&4.02653184E9)===0){b<<=4;c+=4}if((b&3.221225472E9)===0){b<<=2;c+=2}if((b&2.147483648E9)===0){c++}return c};return b},'es6','es3');$jscomp.polyfill('Math.cosh',function(a){if(a){return a}var b=Math.exp;var c=function(c){c=Number(c);return (b(c)+b(-c))/2};return c},'es6','es3');$jscomp.polyfill('Math.expm1',function(a){if(a){return a}var b=function(b){b=Number(b);if(b<0.25&&b>-0.25){var e=b;var f=1;var c=b;var d=0;while(d!=c){e*=b/++f;c=(d=c)+e}return c}return Math.exp(b)-1};return b},'es6','es3');$jscomp.polyfill('Math.hypot',function(a){if(a){return a}var b=function(c,d,h){c=Number(c);d=Number(d);var b,g,f;var e=Math.max(Math.abs(c),Math.abs(d));for(b=2;b<arguments.length;b++){e=Math.max(e,Math.abs(arguments[b]))}if(e>1.0E100||e<1.0E-100){c=c/e;d=d/e;f=c*c+d*d;for(b=2;b<arguments.length;b++){g=Number(arguments[b])/e;f+=g*g}return Math.sqrt(f)*e}else {f=c*c+d*d;for(b=2;b<arguments.length;b++){g=Number(arguments[b]);f+=g*g}return Math.sqrt(f)}};return b},'es6','es3');$jscomp.polyfill('Math.imul',function(a){if(a){return a}var b=function(b,c){b=Number(b);c=Number(c);var f=b>>>16&65535;var d=b&65535;var g=c>>>16&65535;var e=c&65535;var h=f*e+d*g<<16>>>0;return d*e+h|0};return b},'es6','es3');$jscomp.polyfill('Math.log10',function(a){if(a){return a}var b=function(b){return Math.log(b)/Math.LN10};return b},'es6','es3');$jscomp.polyfill('Math.log2',function(a){if(a){return a}var b=function(b){return Math.log(b)/Math.LN2};return b},'es6','es3');$jscomp.polyfill('Math.sign',function(a){if(a){return a}var b=function(b){b=Number(b);return b===0||isNaN(b)?b:b>0?1:-1};return b},'es6','es3');$jscomp.polyfill('Math.sinh',function(a){if(a){return a}var b=Math.exp;var c=function(c){c=Number(c);if(c===0){return c}return (b(c)-b(-c))/2};return c},'es6','es3');$jscomp.polyfill('Math.tanh',function(a){if(a){return a}var b=function(b){b=Number(b);if(b===0){return b}var c=Math.exp(-2*Math.abs(b));var d=(1-c)/(1+c);return b<0?-d:d};return b},'es6','es3');$jscomp.polyfill('Math.trunc',function(a){if(a){return a}var b=function(b){b=Number(b);if(isNaN(b)||b===Infinity||b===-Infinity||b===0){return b}var c=Math.floor(Math.abs(b));return b<0?-c:c};return b},'es6','es3');$jscomp.polyfill('Number.EPSILON',function(a){return Math.pow(2,-52)},'es6','es3');$jscomp.polyfill('Number.MAX_SAFE_INTEGER',function(){return 9.007199254740991E15},'es6','es3');$jscomp.polyfill('Number.MIN_SAFE_INTEGER',function(){return -9.007199254740991E15},'es6','es3');$jscomp.polyfill('Number.isFinite',function(a){if(a){return a}var b=function(b){if(typeof b!=='number'){return !1}return !isNaN(b)&&b!==Infinity&&b!==-Infinity};return b},'es6','es3');$jscomp.polyfill('Number.isInteger',function(a){if(a){return a}var b=function(b){if(!Number.isFinite(b)){return !1}return b===Math.floor(b)};return b},'es6','es3');$jscomp.polyfill('Number.isNaN',function(a){if(a){return a}var b=function(b){return typeof b==='number'&&isNaN(b)};return b},'es6','es3');$jscomp.polyfill('Number.isSafeInteger',function(a){if(a){return a}var b=function(b){return Number.isInteger(b)&&Math.abs(b)<=Number.MAX_SAFE_INTEGER};return b},'es6','es3');$jscomp.polyfill('Object.assign',function(a){if(a){return a}var b=function(e,f){for(var d=1;d<arguments.length;d++){var b=arguments[d];if(!b){continue}for(var c in b){if($jscomp.owns(b,c)){e[c]=b[c]}}}return e};return b},'es6','es3');$jscomp.polyfill('Object.entries',function(a){if(a){return a}var b=function(c){var d=[];for(var b in c){if($jscomp.owns(c,b)){d.push([b,c[b]])}}return d};return b},'es8','es3');$jscomp.polyfill('Object.getOwnPropertySymbols',function(a){if(a){return a}return function(){return []}},'es6','es5');$jscomp.polyfill('Reflect.ownKeys',function(b){if(b){return b}var a='jscomp_symbol_';function isSymbol(c){return c.substring(0,a.length)==a}var c=function(e){var f=[];var c=Object.getOwnPropertyNames(e);var d=Object.getOwnPropertySymbols(e);for(var a=0;a<c.length;a++){(isSymbol(c[a])?d:f).push(c[a])}return f.concat(d)};return c},'es6','es5');$jscomp.polyfill('Object.getOwnPropertyDescriptors',function(a){if(a){return a}var b=function(e){var d={};var c=Reflect.ownKeys(e);for(var b=0;b<c.length;b++){d[c[b]]=Object.getOwnPropertyDescriptor(e,c[b])}return d};return b},'es8','es5');$jscomp.underscoreProtoCanBeSet=function(){var b={a:!0};var a={};try{a.__proto__=b;return a.a}catch(c){}return !1};$jscomp.setPrototypeOf=typeof Object.setPrototypeOf=='function'?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(a,b){a.__proto__=b;if(a.__proto__!==b){throw new TypeError(a+' is not extensible')}return a}:null;$jscomp.polyfill('Object.setPrototypeOf',function(a){return a||$jscomp.setPrototypeOf},'es6','es5');$jscomp.polyfill('Object.values',function(a){if(a){return a}var b=function(b){var c=[];for(var d in b){if($jscomp.owns(b,d)){c.push(b[d])}}return c};return b},'es8','es3');$jscomp.polyfill('Reflect.apply',function(a){if(a){return a}var c=Function.prototype.apply;var b=function(e,d,b){return c.call(e,d,b)};return b},'es6','es3');$jscomp.objectCreate=$jscomp.ASSUME_ES5||typeof Object.create=='function'?Object.create:function(b){var a=function(){};a.prototype=b;return new a()};$jscomp.construct=function(){function reflectConstructWorks(){function Base(){}function Derived(){}new Base();Reflect.construct(Base,[],Derived);return new Base() instanceof Base}if(typeof Reflect!='undefined'&&Reflect.construct){if(reflectConstructWorks()){return Reflect.construct}var b=Reflect.construct;var a=function(e,d,a){var c=b(e,d);if(a){Reflect.setPrototypeOf(c,a.prototype)}return c};return a}function construct(b,d,a){if(a===undefined){a=b}var f=a.prototype||Object.prototype;var c=$jscomp.objectCreate(f);var e=Function.prototype.apply;var g=e.call(b,c,d);return g||c}return construct}();$jscomp.polyfill('Reflect.construct',function(a){return $jscomp.construct},'es6','es3');$jscomp.polyfill('Reflect.defineProperty',function(a){if(a){return a}var b=function(e,d,c){try{Object.defineProperty(e,d,c);var b=Object.getOwnPropertyDescriptor(e,d);if(!b){return !1}return b.configurable===(c.configurable||!1)&&b.enumerable===(c.enumerable||!1)&&('value' in b?b.value===c.value&&b.writable===(c.writable||!1):b.get===c.get&&b.set===c.set)}catch(f){return !1}};return b},'es6','es5');$jscomp.polyfill('Reflect.deleteProperty',function(a){if(a){return a}var b=function(c,b){if(!$jscomp.owns(c,b)){return !0}try{return delete c[b]}catch(d){return !1}};return b},'es6','es3');$jscomp.polyfill('Reflect.getOwnPropertyDescriptor',function(a){return a||Object.getOwnPropertyDescriptor},'es6','es5');$jscomp.polyfill('Reflect.getPrototypeOf',function(a){return a||Object.getPrototypeOf},'es6','es5');$jscomp.findDescriptor=function(d,c){var a=d;while(a){var b=Reflect.getOwnPropertyDescriptor(a,c);if(b){return b}a=Reflect.getPrototypeOf(a)}return undefined};$jscomp.polyfill('Reflect.get',function(a){if(a){return a}var b=function(d,c,e){if(arguments.length<=2){return d[c]}var b=$jscomp.findDescriptor(d,c);if(b){return b.get?b.get.call(e):b.value}return undefined};return b},'es6','es5');$jscomp.polyfill('Reflect.has',function(a){if(a){return a}var b=function(c,b){return b in c};return b},'es6','es3');$jscomp.polyfill('Reflect.isExtensible',function(a){if(a){return a}if($jscomp.ASSUME_ES5||typeof Object.isExtensible=='function'){return Object.isExtensible}return function(){return !0}},'es6','es3');$jscomp.polyfill('Reflect.preventExtensions',function(a){if(a){return a}if(!($jscomp.ASSUME_ES5||typeof Object.preventExtensions=='function')){return function(){return !1}}var b=function(b){Object.preventExtensions(b);return !Object.isExtensible(b)};return b},'es6','es3');$jscomp.polyfill('Reflect.set',function(a){if(a){return a}var b=function(b,d,e,f){var c=$jscomp.findDescriptor(b,d);if(!c){if(Reflect.isExtensible(b)){b[d]=e;return !0}return !1}if(c.set){c.set.call(arguments.length>3?f:b,e);return !0}else {if(c.writable&&!Object.isFrozen(b)){b[d]=e;return !0}}return !1};return b},'es6','es5');$jscomp.polyfill('Reflect.setPrototypeOf',function(a){if(a){return a}else {if($jscomp.setPrototypeOf){var b=$jscomp.setPrototypeOf;var c=function(c,d){try{b(c,d);return !0}catch(e){return !1}};return c}else {return null}}},'es6','es5');$jscomp.polyfill('Set',function(b){var c=!$jscomp.ASSUME_NO_NATIVE_SET&&function(){if(!b||!b.prototype.entries||typeof Object.seal!='function'){return !1}try{b=b;var d=Object.seal({x:4});var c=new b($jscomp.makeIterator([d]));if(!c.has(d)||c.size!=1||c.add(d)!=c||c.size!=1||c.add({x:4})!=c||c.size!=2){return !1}var e=c.entries();var a=e.next();if(a.done||a.value[0]!=d||a.value[1]!=d){return !1}a=e.next();if(a.done||a.value[0]==d||a.value[0].x!=4||a.value[1]!=a.value[0]){return !1}return e.next().done}catch(f){return !1}}();if(c){return b}$jscomp.initSymbol();$jscomp.initSymbolIterator();var a=function(a){this.map_=new Map();if(a){var e=$jscomp.makeIterator(a);var c;while(!(c=e.next()).done){var d=c.value;this.add(d)}}this.size=this.map_.size};a.prototype.add=function(a){this.map_.set(a,a);this.size=this.map_.size;return this};a.prototype['delete']=function(c){var a=this.map_['delete'](c);this.size=this.map_.size;return a};a.prototype.clear=function(){this.map_.clear();this.size=0};a.prototype.has=function(a){return this.map_.has(a)};a.prototype.entries=function(){return this.map_.entries()};a.prototype.values=function(){return this.map_.values()};a.prototype.keys=a.prototype.values;a.prototype[Symbol.iterator]=a.prototype.values;a.prototype.forEach=function(c,a){var d=this;this.map_.forEach(function(e){return c.call(a,e,e,d)})};return a},'es6','es3');$jscomp.checkStringArgs=function(a,c,b){if(a==null){throw new TypeError("The 'this' value for String.prototype."+b+' must not be null or undefined')}if(c instanceof RegExp){throw new TypeError('First argument to String.prototype.'+b+' must not be a regular expression')}return a+''};$jscomp.polyfill('String.prototype.codePointAt',function(a){if(a){return a}var b=function(b){var e=$jscomp.checkStringArgs(this,null,'codePointAt');var f=e.length;b=Number(b)||0;if(!(b>=0&&b<f)){return void 0}b=b|0;var c=e.charCodeAt(b);if(c<55296||c>56319||b+1===f){return c}var d=e.charCodeAt(b+1);if(d<56320||d>57343){return c}return (c-55296)*1024+d+9216};return b},'es6','es3');$jscomp.polyfill('String.prototype.endsWith',function(a){if(a){return a}var b=function(b,c){var d=$jscomp.checkStringArgs(this,b,'endsWith');b=b+'';if(c===void 0){c=d.length}var f=Math.max(0,Math.min(c|0,d.length));var e=b.length;while(e>0&&f>0){if(d[--f]!=b[--e]){return !1}}return e<=0};return b},'es6','es3');$jscomp.polyfill('String.fromCodePoint',function(a){if(a){return a}var b=function(e){var c='';for(var d=0;d<arguments.length;d++){var b=Number(arguments[d]);if(b<0||b>1114111||b!==Math.floor(b)){throw new RangeError('invalid_code_point '+b)}if(b<=65535){c+=String.fromCharCode(b)}else {b-=65536;c+=String.fromCharCode(b>>>10&1023|55296);c+=String.fromCharCode(b&1023|56320)}}return c};return b},'es6','es3');$jscomp.polyfill('String.prototype.includes',function(a){if(a){return a}var b=function(b,c){var d=$jscomp.checkStringArgs(this,b,'includes');return d.indexOf(b,c||0)!==-1};return b},'es6','es3');$jscomp.polyfill('String.prototype.repeat',function(a){if(a){return a}var b=function(b){var c=$jscomp.checkStringArgs(this,null,'repeat');if(b<0||b>1342177279){throw new RangeError('Invalid count value')}b=b|0;var d='';while(b){if(b&1){d+=c}if(b>>>=1){c+=c}}return d};return b},'es6','es3');$jscomp.stringPadding=function(c,a){var b=c!==undefined?String(c):' ';if(!(a>0)||!b){return ''}var d=Math.ceil(a/b.length);return b.repeat(d).substring(0,a)};$jscomp.polyfill('String.prototype.padEnd',function(a){if(a){return a}var b=function(d,c){var b=$jscomp.checkStringArgs(this,null,'padStart');var e=d-b.length;return b+$jscomp.stringPadding(c,e)};return b},'es8','es3');$jscomp.polyfill('String.prototype.padStart',function(a){if(a){return a}var b=function(d,c){var b=$jscomp.checkStringArgs(this,null,'padStart');var e=d-b.length;return $jscomp.stringPadding(c,e)+b};return b},'es8','es3');$jscomp.polyfill('String.prototype.startsWith',function(a){if(a){return a}var b=function(b,g){var c=$jscomp.checkStringArgs(this,b,'startsWith');b=b+'';var h=c.length;var e=b.length;var f=Math.max(0,Math.min(g|0,c.length));var d=0;while(d<e&&f<h){if(c[f++]!=b[d++]){return !1}}return d>=e};return b},'es6','es3');$jscomp.arrayFromIterator=function(c){var b;var a=[];while(!(b=c.next()).done){a.push(b.value)}return a};$jscomp.arrayFromIterable=function(a){if(a instanceof Array){return a}else {return $jscomp.arrayFromIterator($jscomp.makeIterator(a))}};$jscomp.inherits=function(a,b){a.prototype=$jscomp.objectCreate(b.prototype);a.prototype.constructor=a;if($jscomp.setPrototypeOf){var e=$jscomp.setPrototypeOf;e(a,b)}else {for(var c in b){if(c=='prototype'){continue}if(Object.defineProperties){var d=Object.getOwnPropertyDescriptor(b,c);if(d){Object.defineProperty(a,c,d)}}else {a[c]=b[c]}}}a.superClass_=b.prototype};$jscomp.polyfill('WeakSet',function(b){function isConformant(){if(!b||!Object.seal){return !1}try{var c=Object.seal({});var d=Object.seal({});var a=new b([c]);if(!a.has(c)||a.has(d)){return !1}a['delete'](c);a.add(d);return !a.has(c)&&a.has(d)}catch(e){return !1}}if(isConformant()){return b}var a=function(a){this.map_=new WeakMap();if(a){$jscomp.initSymbol();$jscomp.initSymbolIterator();var e=$jscomp.makeIterator(a);var c;while(!(c=e.next()).done){var d=c.value;this.add(d)}}};a.prototype.add=function(a){this.map_.set(a,!0);return this};a.prototype.has=function(a){return this.map_.has(a)};a.prototype['delete']=function(a){return this.map_['delete'](a)};return a},'es6','es3');try{if(Array.prototype.values.toString().indexOf('[native code]')==-1){delete Array.prototype.values}}catch(a){}!function(b,a){'object'==typeof exports&&'object'==typeof module?module.exports=a():'function'==typeof define&&define.amd?define([],a):'object'==typeof exports?exports.SFS2X=a():b.SFS2X=a()}(this,function(){return function(b){var a={};function n(d){if(a[d]){return a[d].exports}var c=a[d]={i:d,l:!1,exports:{}};return b[d].call(c.exports,c,c.exports,n),c.l=!0,c.exports}return n.m=b,n.c=a,n.d=function(a,c,d){n.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},n.r=function(a){Object.defineProperty(a,'__esModule',{value:!0})},n.n=function(a){var c=a&&a.__esModule?function(){return a['default']}:function(){return a};return n.d(c,'a',c),c},n.o=function(a,c){return Object.prototype.hasOwnProperty.call(a,c)},n.p='',n(n.s=323)}([function(f,i,c){var b=c(6),d=c(37),g=c(18),h=c(15),e=c(27),a=function(l,m,p){var k,t,j,s,v=l&a.F,q=l&a.G,x=l&a.S,r=l&a.P,w=l&a.B,n=q?b:x?b[m]||(b[m]={}):(b[m]||{}).prototype,o=q?d:d[m]||(d[m]={}),u=o.prototype||(o.prototype={});for(k in q&&(p=m),p){j=((t=!v&&n&&void 0!==n[k])?n:p)[k],s=w&&t?e(j,b):r&&'function'==typeof j?e(Function.call,j):j,n&&h(n,k,j,l&a.U),o[k]!=j&&g(o,k,s),r&&u[k]!=j&&(u[k]=j)}};b.core=d,a.F=1,a.G=2,a.S=4,a.P=8,a.B=16,a.W=32,a.U=64,a.R=128,f.exports=a},function(e,a,f){function r(b,c){if(!(b instanceof c)){throw new TypeError('Cannot call a class as a function')}}function i(c,b){if(!c){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !b||'object'!=typeof b&&'function'!=typeof b?c:b}function o(c,b){if('function'!=typeof b&&null!==b){throw new TypeError('Super expression must either be null or a function, not '+typeof b)}c.prototype=Object.create(b&&b.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(c,b):c.__proto__=b)}Object.defineProperty(a,'__esModule',{value:!0});var b=function(b){function t(d){r(this,t);var c=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,d));return c.name='SFSError',c}return o(t,Error),t}(),c=function(c){function t(d){var g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];r(this,t);var b=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,d));return b.name='SFSValidationError',b.errors=g,b}return o(t,b),t}(),d=function(c){function t(d){r(this,t);var b=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,d));return b.name='SFSTypeError',b}return o(t,b),t}();a.SFSError=b,a.SFSValidationError=c,a.SFSTypeError=d},function(i,a,d){Object.defineProperty(a,'__esModule',{value:!0}),a.Message=a.Requests=a.BaseRequest=void 0;var b=function(){function e(f,e){for(var c=0;c<e.length;c++){var b=e[c];b.enumerable=b.enumerable||!1,b.configurable=!0,'value' in b&&(b.writable=!0),Object.defineProperty(f,b.key,b)}}return function(b,c,f){return c&&e(b.prototype,c),f&&e(b,f),b}}(),g=d(8),h=d(50);function s(b,c){if(!(b instanceof c)){throw new TypeError('Cannot call a class as a function')}}var f=function(){function e(b){s(this,e),this._reqObj=new g.SFSObject(),this._id=b,this._targetController=0,this._logger=h.Logger.instance}return b(e,null,[{key:'KEY_ERROR_CODE',get:function(){return 'ec'}},{key:'KEY_ERROR_PARAMS',get:function(){return 'ep'}}]),b(e,[{key:'getMessage',value:function(){return new e(this._id,this._targetController,this._reqObj)}},{key:'validate',value:function(){this._logger.error('BaseRequest.validate = no child-class implementation found!')}},{key:'execute',value:function(){this._logger.error('BaseRequest.execute = no child-class implementation found!')}},{key:'id',get:function(){return this._id}}]),e}(),e=function(){function e(f,b,c){s(this,e),this._id=f,this._targetController=b,this._content=c,Object.freeze(this)}return b(e,[{key:'dump',value:function(){return (c.getNameFromId(this.id)+' ('+this.id+')').trim()+'\n'+this.content.getDump()}},{key:'id',get:function(){return this._id}},{key:'targetController',get:function(){return this._targetController}},{key:'content',get:function(){return this._content}}]),e}(),c=Object.freeze({Handshake:0,Login:1,Logout:2,JoinRoom:4,CreateRoom:6,GenericMessage:7,ChangeRoomName:8,ChangeRoomPassword:9,SetRoomVariables:11,SetUserVariables:12,CallExtension:13,LeaveRoom:14,SubscribeRoomGroup:15,UnsubscribeRoomGroup:16,SpectatorToPlayer:17,PlayerToSpectator:18,ChangeRoomCapacity:19,KickUser:24,BanUser:25,FindRooms:27,FindUsers:28,PingPong:29,SetUserPosition:30,InitBuddyList:200,AddBuddy:201,BlockBuddy:202,RemoveBuddy:203,SetBuddyVariables:204,GoOnline:205,InviteUsers:300,InvitationReply:301,CreateSFSGame:302,QuickJoinGame:303,JoinRoomInvite:304,getNameFromId:function(c){for(var b in this){if(this.hasOwnProperty(b)&&this[b]===c){return b}}return ''}});a.BaseRequest=f,a.Requests=c,a.Message=e},function(a,b){a.exports=function(c){try{return !!c()}catch(d){return !0}}},function(a,b){a.exports=function(c){return 'object'==typeof c?null!==c:'function'==typeof c}},function(a,d,b){var c=b(4);a.exports=function(e){if(!c(e)){throw TypeError(e+' is not an object!')}return e}},function(a,c){var b=a.exports='undefined'!=typeof window&&window.Math==Math?window:'undefined'!=typeof self&&self.Math==Math?self:Function('return this')();'number'==typeof __g&&(__g=b)},function(e,g,a){var c=a(94)('wks'),f=a(35),b=a(6).Symbol,d='function'==typeof b;(e.exports=function(h){return c[h]||(c[h]=d&&b[h]||(d?b:f)('Symbol.'+h))}).store=c},function(j,c,f){Object.defineProperty(c,'__esModule',{value:!0}),c.Vec3D=c.SFSArray=c.SFSObject=c.SFSDataWrapper=c.SFSDataType=void 0;var i=function(){function e(e,d){for(var b=0;b<d.length;b++){var a=d[b];a.enumerable=a.enumerable||!1,a.configurable=!0,'value' in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(a,b,d){return b&&e(a.prototype,b),d&&e(a,d),a}}(),e=f(172),b=f(51),l=f(50),d=f(1);function u(a,b){if(!(a instanceof b)){throw new TypeError('Cannot call a class as a function')}}var a=Object.freeze({NULL:0,BOOL:1,BYTE:2,SHORT:3,INT:4,LONG:5,FLOAT:6,DOUBLE:7,UTF_STRING:8,BOOL_ARRAY:9,BYTE_ARRAY:10,SHORT_ARRAY:11,INT_ARRAY:12,LONG_ARRAY:13,FLOAT_ARRAY:14,DOUBLE_ARRAY:15,UTF_STRING_ARRAY:16,SFS_ARRAY:17,SFS_OBJECT:18,TEXT:20,fromId:function(b){if('number'!=typeof b){return null}for(var a in this){if(this.hasOwnProperty(a)&&this[a]===b){return a}}},validate:function(a,e){if(null==this.fromId(a)){throw new d.SFSTypeError('Invalid type passed; use one of the SFSDataType constants')}var b=null;if(a===this.NULL&&null!=e&&(b='a null value'),a!==this.NULL&&null==e&&(b='a non-null value'),a!==this.BOOL||this.isBoolType(e)||(b='a boolean value'),a!==this.BYTE||this.isByteType(e)||(b='an integer number in this range: 0 <= value < 256'),a!==this.SHORT||this.isShortType(e)||(b='an integer number in this range: -32.768 <= value < +32.768'),a!==this.INT||this.isIntType(e)||(b='an integer number in this range: -2^31 <= value < +2^31'),a!==this.LONG||this.isLongType(e)||(b='an integer number in this range: -(2^53 - 1) <= value <= +(2^53 - 1)'),a!==this.FLOAT||this.isFloatType(e)||(b='a number in this range: -3.4028234663852886e+38 <= value <= 3.4028234663852886e+38'),a!==this.DOUBLE||this.isDoubleType(e)||(b='a finite number'),a!==this.UTF_STRING&&a!==this.TEXT||this.isStringType(e)||(b='a string value'),a!==this.BOOL_ARRAY||this.isArrayType(e,this.isBoolType)||(b='an array of boolean values'),a!==this.BYTE_ARRAY||this.isArrayType(e,this.isByteType)||(b='an array of integer numbers in this range: 0 <= value < 256'),a!==this.SHORT_ARRAY||this.isArrayType(e,this.isShortType)||(b='an array of integer numbers in this range: -32.768 <= value < +32.768'),a!==this.INT_ARRAY||this.isArrayType(e,this.isIntType)||(b='an array of integer numbers in this range: -2^31 <= value < +2^31'),a!==this.LONG_ARRAY||this.isArrayType(e,this.isLongType)||(b='an array of integer numbers in this range: -(2^53 - 1) <= value <= +(2^53 - 1)'),a!==this.FLOAT_ARRAY||this.isArrayType(e,this.isFloatType)||(b='an array of numbers in this range: -3.4028234663852886e+38 <= value <= 3.4028234663852886e+38'),a!==this.DOUBLE_ARRAY||this.isArrayType(e,this.isDoubleType)||(b='an array of finite numbers'),a!==this.UTF_STRING_ARRAY||this.isArrayType(e,this.isStringType)||(b='an array of string values'),a!==this.SFS_OBJECT||e instanceof g||(b='a SFSObject instance'),a!==this.SFS_ARRAY||e instanceof k||(b='a SFSArray instance'),null!=b){throw new d.SFSTypeError('Invalid value passed; type SFSDataType.'+this.fromId(a)+' requires '+b)}},isBoolType:function(a){return 'boolean'==typeof a},isByteType:function(a){return 'number'==typeof a&&Math.floor(a)===a&&a>=0&&a<256},isShortType:function(a){return 'number'==typeof a&&Math.floor(a)===a&&a>=-32768&&a<32768},isIntType:function(a){return 'number'==typeof a&&Math.floor(a)===a&&a>=-2.147483648E9&&a<2.147483648E9},isLongType:function(a){return 'number'==typeof a&&Math.floor(a)===a&&Number.isSafeInteger(a)},isFloatType:function(a){return 'number'==typeof a&&a>=-3.4028234663852886E38&&a<=3.4028234663852886E38},isDoubleType:function(a){return 'number'==typeof a&&isFinite(a)},isStringType:function(a){return 'string'==typeof a},isArrayType:function(a,b){return a instanceof Array&&(!(a.length>0)||b(a[0]))}}),h=function j(b,a){u(this,j),this.type=b,this.value=a,Object.freeze(this)},g=function(){function e(){u(this,e),this._dataHolder=new Map(),this._serializer=e.SFSDataSerializer.instance,Object.freeze(this)}return i(e,[{key:'toBinary',value:function(){return this._serializer.object2binary(this)}},{key:'keys',value:function(){return this._dataHolder.keys()}},{key:'getWrappedItem',value:function(a){return this._dataHolder.get(a)}},{key:'getKeysArray',value:function(){return Array.from(this.keys())}},{key:'size',value:function(){return this._dataHolder.size}},{key:'containsKey',value:function(a){return null!=this.getWrappedItem(a)}},{key:'get',value:function(g){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,b=this.getWrappedItem(g);if(null!=b&&null!=e&&b.type!=e){throw new d.SFSTypeError('Requested value is not of type SFSDataType.'+a.fromId(e))}return null!=b?b.value:null}},{key:'isNull',value:function(d){var b=this.getWrappedItem(d);return null==b||b.type==a.NULL}},{key:'getBool',value:function(b){return this.get(b,a.BOOL)}},{key:'getByte',value:function(b){return this.get(b,a.BYTE)}},{key:'getShort',value:function(b){return this.get(b,a.SHORT)}},{key:'getInt',value:function(b){return this.get(b,a.INT)}},{key:'getLong',value:function(d){var b=this.get(d,a.LONG);return Number.isSafeInteger(b)||l.Logger.instance.warn('Long value contained in SFSObject is not safe'),b}},{key:'getFloat',value:function(b){return this.get(b,a.FLOAT)}},{key:'getDouble',value:function(b){return this.get(b,a.DOUBLE)}},{key:'getUtfString',value:function(b){return this.get(b,a.UTF_STRING)}},{key:'getText',value:function(b){return this.get(b,a.TEXT)}},{key:'getBoolArray',value:function(b){return this.get(b,a.BOOL_ARRAY)}},{key:'getByteArray',value:function(b){return this.get(b,a.BYTE_ARRAY)}},{key:'getShortArray',value:function(b){return this.get(b,a.SHORT_ARRAY)}},{key:'getIntArray',value:function(b){return this.get(b,a.INT_ARRAY)}},{key:'getLongArray',value:function(b){return this.get(b,a.LONG_ARRAY)}},{key:'getFloatArray',value:function(b){return this.get(b,a.FLOAT_ARRAY)}},{key:'getDoubleArray',value:function(b){return this.get(b,a.DOUBLE_ARRAY)}},{key:'getUtfStringArray',value:function(b){return this.get(b,a.UTF_STRING_ARRAY)}},{key:'getSFSObject',value:function(b){return this.get(b,a.SFS_OBJECT)}},{key:'getSFSArray',value:function(b){return this.get(b,a.SFS_ARRAY)}},{key:'put',value:function(b,e,d){if(!(arguments.length>3&&void 0!==arguments[3]&&arguments[3])){if('string'!=typeof b){throw 'Invalid key passed; must be of type string'}a.validate(d,e)}this._dataHolder.set(b,new h(d,e))}},{key:'putNull',value:function(b){this.put(b,null,a.NULL)}},{key:'putBool',value:function(b,d){this.put(b,d,a.BOOL)}},{key:'putByte',value:function(b,d){this.put(b,d,a.BYTE)}},{key:'putShort',value:function(b,d){this.put(b,d,a.SHORT)}},{key:'putInt',value:function(b,d){this.put(b,d,a.INT)}},{key:'putLong',value:function(b,d){this.put(b,d,a.LONG)}},{key:'putFloat',value:function(b,d){this.put(b,d,a.FLOAT)}},{key:'putDouble',value:function(b,d){this.put(b,d,a.DOUBLE)}},{key:'putUtfString',value:function(b,d){this.put(b,d,a.UTF_STRING)}},{key:'putText',value:function(b,d){this.put(b,d,a.TEXT)}},{key:'putBoolArray',value:function(b,d){this.put(b,d,a.BOOL_ARRAY)}},{key:'putByteArray',value:function(b,d){this.put(b,d,a.BYTE_ARRAY)}},{key:'putShortArray',value:function(b,d){this.put(b,d,a.SHORT_ARRAY)}},{key:'putIntArray',value:function(b,d){this.put(b,d,a.INT_ARRAY)}},{key:'putLongArray',value:function(b,d){this.put(b,d,a.LONG_ARRAY)}},{key:'putFloatArray',value:function(b,d){this.put(b,d,a.FLOAT_ARRAY)}},{key:'putDoubleArray',value:function(b,d){this.put(b,d,a.DOUBLE_ARRAY)}},{key:'putUtfStringArray',value:function(b,d){this.put(b,d,a.UTF_STRING_ARRAY)}},{key:'putSFSArray',value:function(b,d){this.put(b,d,a.SFS_ARRAY)}},{key:'putSFSObject',value:function(b,d){this.put(b,d,a.SFS_OBJECT)}},{key:'getDump',value:function(){var a=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return 0===this.size()?'[ Empty SFSObject ]':a?b.DumpFormatter.prettyPrintDump(this._dump()):this._dump()}},{key:'getHexDump',value:function(){return b.DumpFormatter.hexDump(this.toBinary())}},{key:'_dump',value:function(){var e=b.DumpFormatter.TOKEN_INDENT_OPEN,h=!0,l=!1,m=void 0;try{for(var k,g=this.keys()[Symbol.iterator]();!(h=(k=g.next()).done);h=!0){var i=k.value,d=this.getWrappedItem(i);e+='('+a.fromId(d.type).toLowerCase()+') '+i+': ',d.type===a.SFS_OBJECT||d.type===a.SFS_ARRAY?e+=d.value.getDump(!1):d.type===a.BYTE_ARRAY?e+=b.DumpFormatter.prettyPrintByteArray(d.value):e+=d.value,e+=b.DumpFormatter.TOKEN_DIVIDER}}catch(n){l=!0,m=n}finally{try{!h&&g['return']&&g['return']()}finally{if(l){throw m}}}return e+=b.DumpFormatter.TOKEN_INDENT_CLOSE}}],[{key:'newFromBinaryData',value:function(a){return e.SFSDataSerializer.instance.binary2object(a)}}]),e}(),k=function(){function e(){u(this,e),this._dataHolder=[],this._serializer=e.SFSDataSerializer.instance,Object.freeze(this)}return i(e,[{key:'toBinary',value:function(){return this._serializer.array2binary(this)}},{key:'getWrappedItem',value:function(a){return 'number'!=typeof a||a>=this._dataHolder.length?null:this._dataHolder[a]}},{key:'size',value:function(){return this._dataHolder.length}},{key:'contains',value:function(b){if(b instanceof e||b instanceof g){throw new d.SFSError('SFSArray and SFSObject types are not supported by the SFSArray.contains method')}for(var a=0;a<this.size();a++){var h=this.getWrappedItem(a);if(null!=h&&h.value==b){return !0}}return !1}},{key:'get',value:function(e){var g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if('number'!=typeof e||e>=this._dataHolder.length){return null}var b=this.getWrappedItem(e);if(null!=b&&null!=g&&b.type!=g){throw new d.SFSTypeError('Requested value is not of type SFSDataType.'+a.fromId(g))}return null!=b?b.value:null}},{key:'isNull',value:function(d){var b=this.getWrappedItem(d);return null==b||b.type==a.NULL}},{key:'getBool',value:function(b){return this.get(b,a.BOOL)}},{key:'getByte',value:function(b){return this.get(b,a.BYTE)}},{key:'getShort',value:function(b){return this.get(b,a.SHORT)}},{key:'getInt',value:function(b){return this.get(b,a.INT)}},{key:'getLong',value:function(d){var b=this.get(d,a.LONG);return Number.isSafeInteger(b)||l.Logger.instance.warn('Long value contained in SFSObject is not safe'),b}},{key:'getFloat',value:function(b){return this.get(b,a.FLOAT)}},{key:'getDouble',value:function(b){return this.get(b,a.DOUBLE)}},{key:'getUtfString',value:function(b){return this.get(b,a.UTF_STRING)}},{key:'getText',value:function(b){return this.get(b,a.TEXT)}},{key:'getBoolArray',value:function(b){return this.get(b,a.BOOL_ARRAY)}},{key:'getByteArray',value:function(b){return this.get(b,a.BYTE_ARRAY)}},{key:'getShortArray',value:function(b){return this.get(b,a.SHORT_ARRAY)}},{key:'getIntArray',value:function(b){return this.get(b,a.INT_ARRAY)}},{key:'getLongArray',value:function(b){return this.get(b,a.LONG_ARRAY)}},{key:'getFloatArray',value:function(b){return this.get(b,a.FLOAT_ARRAY)}},{key:'getDoubleArray',value:function(b){return this.get(b,a.DOUBLE_ARRAY)}},{key:'getUtfStringArray',value:function(b){return this.get(b,a.UTF_STRING_ARRAY)}},{key:'getSFSObject',value:function(b){return this.get(b,a.SFS_OBJECT)}},{key:'getSFSArray',value:function(b){return this.get(b,a.SFS_ARRAY)}},{key:'add',value:function(b,d){arguments.length>2&&void 0!==arguments[2]&&arguments[2]||a.validate(d,b),this._dataHolder.push(new h(d,b))}},{key:'addNull',value:function(){this.add(null,a.NULL)}},{key:'addBool',value:function(b){this.add(b,a.BOOL)}},{key:'addByte',value:function(b){this.add(b,a.BYTE)}},{key:'addShort',value:function(b){this.add(b,a.SHORT)}},{key:'addInt',value:function(b){this.add(b,a.INT)}},{key:'addLong',value:function(b){this.add(b,a.LONG)}},{key:'addFloat',value:function(b){this.add(b,a.FLOAT)}},{key:'addDouble',value:function(b){this.add(b,a.DOUBLE)}},{key:'addUtfString',value:function(b){this.add(b,a.UTF_STRING)}},{key:'addText',value:function(b){this.add(b,a.TEXT)}},{key:'addBoolArray',value:function(b){this.add(b,a.BOOL_ARRAY)}},{key:'addByteArray',value:function(b){this.add(b,a.BYTE_ARRAY)}},{key:'addShortArray',value:function(b){this.add(b,a.SHORT_ARRAY)}},{key:'addIntArray',value:function(b){this.add(b,a.INT_ARRAY)}},{key:'addLongArray',value:function(b){this.add(b,a.LONG_ARRAY)}},{key:'addFloatArray',value:function(b){this.add(b,a.FLOAT_ARRAY)}},{key:'addDoubleArray',value:function(b){this.add(b,a.DOUBLE_ARRAY)}},{key:'addUtfStringArray',value:function(b){this.add(b,a.UTF_STRING_ARRAY)}},{key:'addSFSArray',value:function(b){this.add(b,a.SFS_ARRAY)}},{key:'addSFSObject',value:function(b){this.add(b,a.SFS_OBJECT)}},{key:'getDump',value:function(){var a=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return 0===this.size()?'[ Empty SFSArray ]':a?b.DumpFormatter.prettyPrintDump(this._dump()):this._dump()}},{key:'getHexDump',value:function(){return b.DumpFormatter.hexDump(this.toBinary())}},{key:'_dump',value:function(){for(var e=b.DumpFormatter.TOKEN_INDENT_OPEN,g=0;g<this.size();g++){var d=this.getWrappedItem(g);e+='('+a.fromId(d.type).toLowerCase()+') '+g+': ',d.type===a.SFS_OBJECT||d.type===a.SFS_ARRAY?e+=d.value.getDump(!1):d.type===a.BYTE_ARRAY?e+=b.DumpFormatter.prettyPrintByteArray(d.value):e+=d.value,e+=b.DumpFormatter.TOKEN_DIVIDER}return e+=b.DumpFormatter.TOKEN_INDENT_CLOSE}}],[{key:'newFromBinaryData',value:function(a){return e.SFSDataSerializer.instance.binary2array(a)}}]),e}(),m=function(){function e(g,b){var d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];u(this,e),this.px=g,this.py=b,this.pz=d,this._useFloatCoordinates=a}return i(e,[{key:'toString',value:function(){return '('+this.px+','+this.py+','+this.pz+')'}},{key:'toArray',value:function(){return [this.px,this.py,this.pz]}},{key:'isFloat',get:function(){return this._useFloatCoordinates}}],[{key:'fromArray',value:function(a){return new e(a[0],a[1],a[2])}}]),e}();c.SFSDataType=a,c.SFSDataWrapper=h,c.SFSObject=g,c.SFSArray=k,c.Vec3D=m},function(g,f,a){var b=a(5),c=a(147),d=a(30),e=Object.defineProperty;f.f=a(11)?Object.defineProperty:function(i,j,h){if(b(i),j=d(j,!0),b(h),c){try{return e(i,j,h)}catch(k){}}if('get' in h||'set' in h){throw TypeError('Accessors not supported!')}return 'value' in h&&(i[j]=h.value),i}},function(j,a,b){Object.defineProperty(a,'__esModule',{value:!0}),a.MMORoom=a.SFSRoom=void 0;var f=function(){function e(f,e){for(var d=0;d<e.length;d++){var c=e[d];c.enumerable=c.enumerable||!1,c.configurable=!0,'value' in c&&(c.writable=!0),Object.defineProperty(f,c.key,c)}}return function(c,d,f){return d&&e(c.prototype,d),f&&e(c,f),c}}(),c=b(8),h=b(49),i=b(118),g=b(1);function u(c,d){if(!(c instanceof d)){throw new TypeError('Cannot call a class as a function')}}var d=function(){function e(g,d){var f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:'default',c=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];u(this,e),this._id=g,this._name=d,this._groupId=f,this._isGame=!1,this._isHidden=!1,this._isJoined=!1,this._isPasswordProtected=!1,this._maxUsers=0,this._maxSpectators=0,this._userCount=0,this._specCount=0,this._isManaged=!0,this._variables=new Map(),this._userManager=new i.SFSUserManager(),this._roomManager=null,this.properties={},c&&Object.seal(this)}return f(e,[{key:'toString',value:function(){return '[Room: '+this.name+', Id: '+this.id+', Group Id: '+this.groupId+']'}},{key:'getUserByName',value:function(c){return this._userManager.getUserByName(c)}},{key:'getUserById',value:function(c){return this._userManager.getUserById(c)}},{key:'containsUser',value:function(c){return this._userManager.containsUser(c)}},{key:'getUserList',value:function(){return this._userManager.getUserList()}},{key:'getPlayerList',value:function(){var c=this;return this._userManager.getUserList().filter(function(d){return d.isPlayerInRoom(c)})}},{key:'getSpectatorList',value:function(){var c=this;return this._userManager.getUserList().filter(function(d){return d.isSpectatorInRoom(c)})}},{key:'getVariable',value:function(c){return this._variables.get(c)}},{key:'containsVariable',value:function(c){return this._variables.has(c)}},{key:'getVariables',value:function(){return Array.from(this._variables.values())}},{key:'getRoomManager',value:function(){return this._roomManager}},{key:'_addUser',value:function(c){this._userManager._addUser(c)}},{key:'_removeUser',value:function(c){this._userManager._removeUser(c)}},{key:'_setVariables',value:function(h){var d=!0,f=!1,g=void 0;try{for(var e,c=h[Symbol.iterator]();!(d=(e=c.next()).done);d=!0){var i=e.value;this._setVariable(i)}}catch(k){f=!0,g=k}finally{try{!d&&c['return']&&c['return']()}finally{if(f){throw g}}}}},{key:'_setVariable',value:function(c){c.isNull?this._variables['delete'](c.name):this._variables.set(c.name,c)}},{key:'_setRoomManager',value:function(c){if(null!=this._roomManager){throw new g.SFSError('Room Manager already assigned to '+this.toString())}this._roomManager=c}},{key:'_merge',value:function(h){this._variables.clear();var f=!0,l=!1,m=void 0;try{for(var i,e=h._variables.values()[Symbol.iterator]();!(f=(i=e.next()).done);f=!0){var p=i.value;this._setVariable(p)}}catch(q){l=!0,m=q}finally{try{!f&&e['return']&&e['return']()}finally{if(l){throw m}}}this._userManager._clearAll();var c=!0,n=!1,g=void 0;try{for(var k,d=h.getUserList()[Symbol.iterator]();!(c=(k=d.next()).done);c=!0){var o=k.value;this._addUser(o)}}catch(r){n=!0,g=r}finally{try{!c&&d['return']&&d['return']()}finally{if(n){throw g}}}}},{key:'id',get:function(){return this._id}},{key:'name',get:function(){return this._name}},{key:'groupId',get:function(){return this._groupId}},{key:'isGame',get:function(){return this._isGame}},{key:'isHidden',get:function(){return this._isHidden}},{key:'isJoined',get:function(){return this._isJoined}},{key:'isPasswordProtected',get:function(){return this._isPasswordProtected}},{key:'maxUsers',get:function(){return this._maxUsers}},{key:'maxSpectators',get:function(){return this._maxSpectators}},{key:'userCount',get:function(){return this.isJoined?this.isGame?this.getPlayerList().length:this._userManager.getUserCount():this._userCount}},{key:'spectatorCount',get:function(){return this.isGame?this.isJoined?this.getSpectatorList().length:this._specCount:0}},{key:'capacity',get:function(){return this.maxUsers+this.maxSpectators}}],[{key:'fromSFSArray',value:function(d){var k=14===d.size(),f=void 0;(f=k?new e(d.get(0),d.get(1),d.get(2)):new e(d.get(0),d.get(1),d.get(2)))._isGame=d.get(3),f._isHidden=d.get(4),f._isPasswordProtected=d.get(5),f._userCount=d.get(6),f._maxUsers=d.get(7);var i=d.get(8);if(null!=i){for(var g=0;g<i.size();g++){var l=h.SFSRoomVariable.fromSFSArray(i.get(g));f._setVariable(l)}}return f._isGame&&(f._specCount=d.get(9),f._maxSpectators=d.get(10)),k&&(f._defaultAOI=c.Vec3D.fromArray(d.get(11)),null!=d.get(13)&&(f._lowerMapLimit=c.Vec3D.fromArray(d.get(12)),f._higherMapLimit=c.Vec3D.fromArray(d.get(13)))),f}}]),e}(),e=function(c){function t(e,f){var g=arguments.length>2&&void 0!==arguments[2]?arguments[2]:'default';u(this,t);var d=function(g,d){if(!g){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !d||'object'!=typeof d&&'function'!=typeof d?g:d}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,f,g,!1));return d._defaultAOI=null,d._lowerMapLimit=null,d._higherMapLimit=null,d._itemsById=new Map(),Object.seal(d),d}return function(e,d){if('function'!=typeof d&&null!==d){throw new TypeError('Super expression must either be null or a function, not '+typeof d)}e.prototype=Object.create(d&&d.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(e,d):e.__proto__=d)}(t,d),f(t,[{key:'getMMOItem',value:function(d){return this._itemsById.get(d)}},{key:'getMMOItems',value:function(){return Array.from(this._itemsById.values())}},{key:'_addMMOItem',value:function(d){this._itemsById.set(d.id,d)}},{key:'_removeItem',value:function(d){this._itemsById['delete'](d)}},{key:'defaultAOI',get:function(){return this._defaultAOI}},{key:'lowerMapLimit',get:function(){return this._lowerMapLimit}},{key:'higherMapLimit',get:function(){return this._higherMapLimit}}]),t}();a.SFSRoom=d,a.MMORoom=e},function(a,c,b){a.exports=!b(3)(function(){return 7!=Object.defineProperty({},'a',{get:function(){return 7}}).a})},function(a,e,c){var d=c(24),b=Math.min;a.exports=function(f){return f>0?b(d(f),9.007199254740991E15):0}},function(d,h,a){var b=a(0),e=a(3),f=a(28),g=/"/g,c=function(i,e,c,k){var j=String(f(i)),b='<'+e;return ''!==c&&(b+=' '+c+'="'+String(k).replace(g,'&quot;')+'"'),b+'>'+j+'</'+e+'>'};d.exports=function(f,i){var g={};g[f]=i(c),b(b.P+b.F*e(function(){var b=''[f]('"');return b!==b.toLowerCase()||b.split('"').length>3}),'String',g)}},function(a,d,b){var c=b(28);a.exports=function(e){return Object(c(e))}},function(f,i,a){var g=a(6),b=a(18),e=a(16),d=a(35)('src'),c=Function.toString,h=(''+c).split('toString');a(37).inspectSource=function(b){return c.call(b)},(f.exports=function(j,c,k,m){var l='function'==typeof k;l&&(e(k,'name')||b(k,'name',c)),j[c]!==k&&(l&&(e(k,d)||b(k,d,j[c]?''+j[c]:h.join(String(c)))),j===g?j[c]=k:m?j[c]?j[c]=k:b(j,c,k):(delete j[c],b(j,c,k)))})(Function.prototype,'toString',function(){return 'function'==typeof this&&this[d]||c.call(this)})},function(a,c){var b={}.hasOwnProperty;a.exports=function(d,e){return b.call(d,e)}},function(a,d,b){var c=b(3);a.exports=function(e,f){return !!e&&c(function(){f?e.call(null,function(){},1):e.call(null)})}},function(b,e,a){var d=a(9),c=a(36);b.exports=a(11)?function(f,h,g){return d.f(f,h,c(1,g))}:function(c,f,d){return c[f]=d,c}},function(c,h,a){var f=a(27),d=a(54),e=a(14),g=a(12),b=a(229);c.exports=function(i,p){var m=1==i,q=2==i,n=3==i,j=4==i,l=6==i,o=5==i||l,k=p||b;return function(u,y,A){for(var t,s,w=e(u),v=d(w),z=f(y,A,3),x=g(v.length),b=0,r=m?k(u,x):q?k(u,0):void 0;x>b;b++){if((o||b in v)&&(s=z(t=v[b],b,w),i)){if(m){r[b]=s}else {if(s){switch(i){case 3:return !0;case 5:return t;case 6:return b;case 2:r.push(t);}}else {if(j){return !1}}}}}return l?-1:n||j?j:r}}},function(c,f,a){var b=a(0),d=a(37),e=a(3);c.exports=function(g,j){var h=(d.Object||{})[g]||Object[g],i={};i[g]=j(h),b(b.S+b.F*e(function(){h(1)}),'Object',i)}},function(b,e,a){var d=a(54),c=a(28);b.exports=function(f){return d(c(f))}},function(ac,aP,a){if(a(11)){var G=a(43),w=a(6),e=a(3),b=a(0),v=a(59),ag=a(74),aK=a(27),ae=a(41),aL=a(36),d=a(18),F=a(40),aO=a(24),x=a(12),ab=a(120),ad=a(34),ah=a(30),n=a(16),af=a(65),k=a(4),W=a(14),aG=a(79),aE=a(33),ay=a(31),H=a(32).f,aB=a(78),$=a(35),Y=a(7),h=a(19),Z=a(93),C=a(75),E=a(127),aM=a(53),aH=a(63),aA=a(42),az=a(77),aD=a(128),aa=a(9),V=a(23),o=aa.f,aN=V.f,m=w.RangeError,X=w.TypeError,j=w.Uint8Array,g=Array.prototype,D=ag.ArrayBuffer,aC=ag.DataView,_=h(0),aI=h(2),aJ=h(3),aF=h(4),ax=h(5),an=h(6),av=Z(!0),ar=Z(!1),at=E.values,ao=E.keys,as=E.entries,au=g.lastIndexOf,am=g.reduce,aw=g.reduceRight,Q=g.join,ap=g.sort,S=g.slice,l=g.toString,z=g.toLocaleString,B=Y('iterator'),t=Y('toStringTag'),R=$('typed_constructor'),s=$('def_constructor'),U=v.CONSTR,i=v.TYPED,aq=v.VIEW,al=h(1,function(b,c){return u(C(b,b[s]),c)}),K=e(function(){return 1===(new j((new Uint16Array([1])).buffer))[0]}),ak=!!j&&!!j.prototype.set&&e(function(){(new j(1)).set({})}),r=function(c,d){var b=aO(c);if(b<0||b%d){throw m('Wrong offset!')}return b},c=function(b){if(k(b)&&i in b){return b}throw X(b+' is not a typed array!')},u=function(b,c){if(!(k(b)&&R in b)){throw X('It is not a typed array constructor!')}return new b(c)},L=function(b,c){return y(C(b,b[s]),c)},y=function(f,e){for(var b=0,d=e.length,c=u(f,d);d>b;){c[b]=e[b++]}return c},q=function(b,d,c){o(b,d,{get:function(){return this._d[c]}})},A=function(m){var b,g,h,f,j,k,c=W(m),l=arguments.length,d=l>1?arguments[1]:void 0,i=void 0!==d,e=aB(c);if(void 0!=e&&!aG(e)){for(k=e.call(c),h=[],b=0;!(j=k.next()).done;b++){h.push(j.value)}c=h}for(i&&l>2&&(d=aK(d,arguments[2],2)),b=0,g=x(c.length),f=u(this,g);g>b;b++){f[b]=i?d(c[b],b):c[b]}return f},aj=function(){for(var b=0,d=arguments.length,c=u(this,d);d>b;){c[b]=arguments[b++]}return c},ai=!!j&&e(function(){z.call(new j(1))}),N=function(){return z.apply(ai?S.call(c(this)):c(this),arguments)},T={copyWithin:function(b,d){return aD.call(c(this),b,d,arguments.length>2?arguments[2]:void 0)},every:function(b){return aF(c(this),b,arguments.length>1?arguments[1]:void 0)},fill:function(b){return az.apply(c(this),arguments)},filter:function(b){return L(this,aI(c(this),b,arguments.length>1?arguments[1]:void 0))},find:function(b){return ax(c(this),b,arguments.length>1?arguments[1]:void 0)},findIndex:function(b){return an(c(this),b,arguments.length>1?arguments[1]:void 0)},forEach:function(b){_(c(this),b,arguments.length>1?arguments[1]:void 0)},indexOf:function(b){return ar(c(this),b,arguments.length>1?arguments[1]:void 0)},includes:function(b){return av(c(this),b,arguments.length>1?arguments[1]:void 0)},join:function(b){return Q.apply(c(this),arguments)},lastIndexOf:function(b){return au.apply(c(this),arguments)},map:function(b){return al(c(this),b,arguments.length>1?arguments[1]:void 0)},reduce:function(b){return am.apply(c(this),arguments)},reduceRight:function(b){return aw.apply(c(this),arguments)},reverse:function(){for(var e,d=c(this).length,f=Math.floor(d/2),b=0;b<f;){e=this[b],this[b++]=this[--d],this[d]=e}return this},some:function(b){return aJ(c(this),b,arguments.length>1?arguments[1]:void 0)},sort:function(b){return ap.call(c(this),b)},subarray:function(g,f){var b=c(this),d=b.length,e=ad(g,d);return new (C(b,b[s]))(b.buffer,b.byteOffset+e*b.BYTES_PER_ELEMENT,x((void 0===f?d:ad(f,d))-e))}},O=function(b,d){return L(this,S.call(c(this),b,d))},J=function(g){c(this);var f=r(arguments[1],1),h=this.length,e=W(g),d=x(e.length),b=0;if(d+f>h){throw m('Wrong length!')}for(;b<d;){this[f+b]=e[b++]}},p={entries:function(){return as.call(c(this))},keys:function(){return ao.call(c(this))},values:function(){return at.call(c(this))}},M=function(c,b){return k(c)&&c[i]&&'symbol'!=typeof b&&b in c&&String(+b)==String(b)},P=function(c,b){return M(c,b=ah(b,!0))?aL(2,c[b]):aN(c,b)},I=function(c,d,b){return !(M(c,d=ah(d,!0))&&k(b)&&n(b,'value'))||n(b,'get')||n(b,'set')||b.configurable||n(b,'writable')&&!b.writable||n(b,'enumerable')&&!b.enumerable?o(c,d,b):(c[d]=b.value,c)};U||(V.f=P,aa.f=I),b(b.S+b.F*!U,'Object',{getOwnPropertyDescriptor:P,defineProperty:I}),e(function(){l.call({})})&&(l=z=function(){return Q.call(this)});var f=F({},T);F(f,p),d(f,B,p.values),F(f,{slice:O,set:J,constructor:function(){},toString:l,toLocaleString:N}),q(f,'buffer','b'),q(f,'byteOffset','o'),q(f,'byteLength','l'),q(f,'length','e'),o(f,t,{get:function(){return this[i]}}),ac.exports=function(C,j,I,u){var h=C+((u=!!u)?'Clamped':'')+'Array',S='get'+C,P='set'+C,c=w[h],n=c||{},L=c&&ay(c),Q=!c||!v.ABV,E={},g=c&&c.prototype,M=function(c,b){o(c,b,{get:function(){return function(e,f){var d=e._d;return d.v[S](f*j+d.o,K)}(this,b)},set:function(d){return function(g,h,e){var f=g._d;u&&(e=(e=Math.round(e))<0?0:e>255?255:255&e),f.v[P](h*j+f.o,e,K)}(this,b,d)},enumerable:!0})};Q?(c=I(function(n,b,t,q){ae(n,c,h,'_d');var l,f,e,s,p=0,g=0;if(k(b)){if(!(b instanceof D||'ArrayBuffer'==(s=af(b))||'SharedArrayBuffer'==s)){return i in b?y(c,b):A.call(c,b)}l=b,g=r(t,j);var o=b.byteLength;if(void 0===q){if(o%j){throw m('Wrong length!')}if((f=o-g)<0){throw m('Wrong length!')}}else {if((f=x(q)*j)+g>o){throw m('Wrong length!')}}e=f/j}else {e=ab(b),l=new D(f=e*j)}for(d(n,'_d',{b:l,o:g,l:f,e:e,v:new aC(l)});p<e;){M(n,p++)}}),g=c.prototype=aE(f),d(g,'constructor',c)):e(function(){c(1)})&&e(function(){new c(-1)})&&aH(function(b){new c(),new c(null),new c(1.5),new c(b)},!0)||(c=I(function(g,b,d,e){var f;return ae(g,c,h),k(b)?b instanceof D||'ArrayBuffer'==(f=af(b))||'SharedArrayBuffer'==f?void 0!==e?new n(b,r(d,j),e):void 0!==d?new n(b,r(d,j)):new n(b):i in b?y(c,b):A.call(c,b):new n(ab(b))}),_(L!==Function.prototype?H(n).concat(H(L)):H(n),function(b){b in c||d(c,b,n[b])}),c.prototype=g,G||(g.constructor=c));var q=g[B],z=!!q&&('values'==q.name||void 0==q.name),F=p.values;d(c,R,!0),d(g,i,h),d(g,aq,!0),d(g,s,c),(u?(new c(1))[t]==h:t in g)||o(g,t,{get:function(){return h}}),E[h]=c,b(b.G+b.W+b.F*(c!=n),E),b(b.S,h,{BYTES_PER_ELEMENT:j}),b(b.S+b.F*e(function(){n.of.call(c,1)}),h,{from:A,of:aj}),'BYTES_PER_ELEMENT' in g||d(g,'BYTES_PER_ELEMENT',j),b(b.P,h,T),aA(h),b(b.P+b.F*ak,h,{set:J}),b(b.P+b.F*!z,h,p),G||g.toString==l||(g.toString=l),b(b.P+b.F*e(function(){(new c(1)).slice()}),h,{slice:O}),b(b.P+b.F*(e(function(){return [1,2].toLocaleString()!=(new c([1,2])).toLocaleString()})||!e(function(){g.toLocaleString.call([1,2])})),h,{toLocaleString:N}),aM[h]=z?q:F,G||z||d(g,B,F)}}else {ac.exports=function(){}}},function(j,h,a){var f=a(66),d=a(36),e=a(21),g=a(30),c=a(16),i=a(147),b=Object.getOwnPropertyDescriptor;h.f=a(11)?b:function(k,l){if(k=e(k),l=g(l,!0),i){try{return b(k,l)}catch(m){}}if(c(k,l)){return d(!f.f.call(k,l),k[l])}}},function(a,d){var b=Math.ceil,c=Math.floor;a.exports=function(e){return isNaN(e=+e)?0:(e>0?c:b)(e)}},function(a,c){var b={}.toString;a.exports=function(d){return b.call(d).slice(8,-1)}},function(a,b){a.exports=function(c){if('function'!=typeof c){throw TypeError(c+' is not a function!')}return c}},function(a,d,b){var c=b(26);a.exports=function(e,f,g){if(c(e),void 0===f){return e}switch(g){case 1:return function(c){return e.call(f,c)};case 2:return function(c,h){return e.call(f,c,h)};case 3:return function(h,i,c){return e.call(f,h,i,c)};}return function(){return e.apply(f,arguments)}}},function(a,b){a.exports=function(c){if(void 0==c){throw TypeError("Can't call method on  "+c)}return c}},function(h,l,b){var a=b(35)('meta'),j=b(4),e=b(16),k=b(9).f,f=0,c=Object.isExtensible||function(){return !0},g=!b(3)(function(){return c(Object.preventExtensions({}))}),d=function(c){k(c,a,{value:{i:'O'+ ++f,w:{}}})},i=h.exports={KEY:a,NEED:!1,fastKey:function(f,g){if(!j(f)){return 'symbol'==typeof f?f:('string'==typeof f?'S':'P')+f}if(!e(f,a)){if(!c(f)){return 'F'}if(!g){return 'E'}d(f)}return f[a].i},getWeak:function(f,g){if(!e(f,a)){if(!c(f)){return !0}if(!g){return !1}d(f)}return f[a].w},onFreeze:function(f){return g&&i.NEED&&c(f)&&!e(f,a)&&d(f),f}}},function(b,d,c){var a=c(4);b.exports=function(e,h){if(!a(e)){return e}var g,f;if(h&&'function'==typeof (g=e.toString)&&!a(f=g.call(e))){return f}if('function'==typeof (g=e.valueOf)&&!a(f=g.call(e))){return f}if(!h&&'function'==typeof (g=e.toString)&&!a(f=g.call(e))){return f}throw TypeError("Can't convert object to primitive value")}},function(c,g,a){var e=a(16),d=a(14),b=a(92)('IE_PROTO'),f=Object.prototype;c.exports=Object.getPrototypeOf||function(h){return h=d(h),e(h,b)?h[b]:'function'==typeof h.constructor&&h instanceof h.constructor?h.constructor.prototype:h instanceof Object?f:null}},function(e,d,a){var c=a(145),b=a(91).concat('length','prototype');d.f=Object.getOwnPropertyNames||function(f){return c(f,b)}},function(e,i,a){var g=a(5),f=a(144),d=a(91),h=a(92)('IE_PROTO'),c=function(){},b=function(){var c,f=a(95)('iframe'),g=d.length;for(f.style.display='none',a(89).appendChild(f),f.src='javascript:',(c=f.contentWindow.document).open(),c.write('<script>document.F=Object</script>'),c.close(),b=c.F;g--;){delete b.prototype[d[g]]}return b()};e.exports=Object.create||function(j,k){var d;return null!==j?(c.prototype=g(j),d=new c(),c.prototype=null,d[h]=j):d=b(),void 0===k?d:f(d,k)}},function(a,f,c){var e=c(24),b=Math.max,d=Math.min;a.exports=function(g,h){return (g=e(g))<0?b(g+h,0):d(g,h)}},function(a,d){var b=0,c=Math.random();a.exports=function(e){return 'Symbol('.concat(void 0===e?'':e,')_',(++b+c).toString(36))}},function(a,b){a.exports=function(c,d){return {enumerable:!(1&c),configurable:!(2&c),writable:!(4&c),value:d}}},function(a,c){var b=a.exports={version:'2.5.4'};'number'==typeof __e&&(__e=b)},function(f,a,g){Object.defineProperty(a,'__esModule',{value:!0});var d=function(){function e(e,d){for(var c=0;c<d.length;c++){var b=d[c];b.enumerable=b.enumerable||!1,b.configurable=!0,'value' in b&&(b.writable=!0),Object.defineProperty(e,b.key,b)}}return function(b,c,d){return c&&e(b.prototype,c),d&&e(b,d),b}}();var b=function(){function e(){!function(b,c){if(!(b instanceof c)){throw new TypeError('Cannot call a class as a function')}}(this,e),this._listenersByEvent={}}return d(e,[{key:'addEventListener',value:function(b,d,c){this._listenersByEvent[b]||(this._listenersByEvent[b]=[]),this._listenersByEvent[b].push({callback:d,scope:c})}},{key:'removeEventListener',value:function(d,e){var b=this._listenersByEvent[d];if(b){for(var c=0;c<b.length;c++){if(b[c].callback===e){b.splice(c,1);break}}}}},{key:'dispatchEvent',value:function(k,l){var e=this._listenersByEvent[k];if(e){var c=!0,d=!1,h=void 0;try{for(var i,b=e[Symbol.iterator]();!(c=(i=b.next()).done);c=!0){var j=i.value;j.callback.call(j.scope,l)}}catch(m){d=!0,h=m}finally{try{!c&&b['return']&&b['return']()}finally{if(d){throw h}}}}}}]),e}(),c=Object.freeze({HANDSHAKE:'handshake',CONNECTION:'connection',CONNECTION_LOST:'connectionLost',LOGIN:'login',LOGIN_ERROR:'loginError',LOGOUT:'logout',ROOM_ADD:'roomAdd',ROOM_CREATION_ERROR:'roomCreationError',ROOM_REMOVE:'roomRemove',ROOM_JOIN:'roomJoin',ROOM_JOIN_ERROR:'roomJoinError',USER_ENTER_ROOM:'userEnterRoom',USER_EXIT_ROOM:'userExitRoom',USER_COUNT_CHANGE:'userCountChange',PROXIMITY_LIST_UPDATE:'proximityListUpdate',PLAYER_TO_SPECTATOR:'playerToSpectator',PLAYER_TO_SPECTATOR_ERROR:'playerToSpectatorError',SPECTATOR_TO_PLAYER:'spectatorToPlayer',SPECTATOR_TO_PLAYER_ERROR:'spectatorToPlayerError',ROOM_NAME_CHANGE:'roomNameChange',ROOM_NAME_CHANGE_ERROR:'roomNameChangeError',ROOM_PASSWORD_STATE_CHANGE:'roomPasswordStateChange',ROOM_PASSWORD_STATE_CHANGE_ERROR:'roomPasswordStateChangeError',ROOM_CAPACITY_CHANGE:'roomCapacityChange',ROOM_CAPACITY_CHANGE_ERROR:'roomCapacityChangeError',PUBLIC_MESSAGE:'publicMessage',PRIVATE_MESSAGE:'privateMessage',OBJECT_MESSAGE:'objectMessage',MODERATOR_MESSAGE:'moderatorMessage',ADMIN_MESSAGE:'adminMessage',EXTENSION_RESPONSE:'extensionResponse',ROOM_VARIABLES_UPDATE:'roomVariablesUpdate',USER_VARIABLES_UPDATE:'userVariablesUpdate',MMOITEM_VARIABLES_UPDATE:'mmoItemVariablesUpdate',ROOM_GROUP_SUBSCRIBE:'roomGroupSubscribe',ROOM_GROUP_SUBSCRIBE_ERROR:'roomGroupSubscribeError',ROOM_GROUP_UNSUBSCRIBE:'roomGroupUnsubscribe',ROOM_GROUP_UNSUBSCRIBE_ERROR:'roomGroupUnsubscribeError',ROOM_FIND_RESULT:'roomFindResult',USER_FIND_RESULT:'userFindResult',INVITATION:'invitation',INVITATION_REPLY:'invitationReply',INVITATION_REPLY_ERROR:'invitationReplyError',PING_PONG:'pingPong',SOCKET_ERROR:'socketError'}),e=Object.freeze({BUDDY_LIST_INIT:'buddyListInit',BUDDY_ADD:'buddyAdd',BUDDY_REMOVE:'buddyRemove',BUDDY_BLOCK:'buddyBlock',BUDDY_ERROR:'buddyError',BUDDY_ONLINE_STATE_CHANGE:'buddyOnlineStateChange',BUDDY_VARIABLES_UPDATE:'buddyVariablesUpdate',BUDDY_MESSAGE:'buddyMessage'});a.EventDispatcher=b,a.SFSEvent=c,a.SFSBuddyEvent=e},function(a,d,b){var c=b(4);a.exports=function(e,f){if(!c(e)||e._t!==f){throw TypeError('Incompatible receiver, '+f+' required!')}return e}},function(a,d,b){var c=b(15);a.exports=function(e,g,h){for(var f in g){c(e,f,g[f],h)}return e}},function(a,b){a.exports=function(c,f,e,d){if(!(c instanceof f)||void 0!==d&&d in c){throw TypeError(e+': incorrect invocation!')}return c}},function(c,g,a){var f=a(6),d=a(9),e=a(11),b=a(7)('species');c.exports=function(i){var h=f[i];e&&h&&!h[b]&&d.f(h,b,{configurable:!0,get:function(){return this}})}},function(a,b){a.exports=!1},function(c,f,a){var e=a(9).f,d=a(16),b=a(7)('toStringTag');c.exports=function(g,i,h){g&&!d(g=h?g:g.prototype,b)&&e(g,b,{configurable:!0,value:i})}},function(g,a,e){Object.defineProperty(a,'__esModule',{value:!0}),a.LogicOperator=a.MatchExpression=void 0;var d=function(){function e(f,d){for(var c=0;c<d.length;c++){var b=d[c];b.enumerable=b.enumerable||!1,b.configurable=!0,'value' in b&&(b.writable=!0),Object.defineProperty(f,b.key,b)}}return function(b,c,d){return c&&e(b.prototype,c),d&&e(b,d),b}}(),c=e(8);function o(b,c){if(!(b instanceof c)){throw new TypeError('Cannot call a class as a function')}}var f=function(){function e(d,b,c){o(this,e),this._varName=d,this._condition=b,this._value=c,this._logicOp=null,this._next=null,this._parent=null,Object.seal(this)}return d(e,[{key:'and',value:function(f,c,d){return this._next=e.chainedMatchExpression(f,c,d,b.AND,this),this._next}},{key:'or',value:function(f,c,d){return this._next=e.chainedMatchExpression(f,c,d,b.OR,this),this._next}},{key:'hasNext',value:function(){return null!=this._next}},{key:'rewind',value:function(){for(var b=this;null!=b._parent;){b=b._parent}return b}},{key:'toString',value:function(){for(var b=this.rewind(),c=b.asString();b.hasNext();){c+=(b=b.next).asString()}return c}},{key:'asString',value:function(){var b='';null!=this._logicOp&&(b+=' '+this._logicOp.id+' ');var c='string'==typeof this._value?"' "+this._value+" '":this._value;return b+='('+this._varName+' '+this._condition.symbol+' '+c+')'}},{key:'toSFSArray',value:function(){var b=this.rewind(),d=new c.SFSArray();for(d.addSFSArray(b.expressionAsSFSArray());b.hasNext();){b=b.next,d.addSFSArray(b.expressionAsSFSArray())}return d}},{key:'expressionAsSFSArray',value:function(){var b=new c.SFSArray();return null!=this._logicOp?b.addUtfString(this._logicOp.id):b.addNull(),b.addUtfString(this._varName),b.addByte(this._condition.type),b.addUtfString(this._condition.symbol),0===this._condition.type?b.addBool(this._value):1===this._condition.type?b.addDouble(this._value):b.addUtfString(this._value),b}},{key:'varName',get:function(){return this._varName}},{key:'condition',get:function(){return this._condition}},{key:'value',get:function(){return this._value}},{key:'logicOp',get:function(){return this._logicOp}},{key:'next',get:function(){return this._next}}],[{key:'chainedMatchExpression',value:function(i,d,h,c,f){var b=new e(i,d,h);return b._logicOp=c,b._parent=f,b}}]),e}(),b=function(){function e(b){o(this,e),this._id=b,Object.freeze(this)}return d(e,[{key:'id',get:function(){return this._id}}],[{key:'AND',get:function(){return new e('AND')}},{key:'OR',get:function(){return new e('OR')}}]),e}();a.MatchExpression=f,a.LogicOperator=b},function(g,a,d){Object.defineProperty(a,'__esModule',{value:!0}),a.SFSBuddyVariable=a.ReservedBuddyVariables=void 0;var b=function(){function e(f,e){for(var c=0;c<e.length;c++){var b=e[c];b.enumerable=b.enumerable||!1,b.configurable=!0,'value' in b&&(b.writable=!0),Object.defineProperty(f,b.key,b)}}return function(b,c,f){return c&&e(b.prototype,c),f&&e(b,f),b}}(),c=d(48);var e=Object.freeze({BV_ONLINE:'$__BV_ONLINE__',BV_STATE:'$__BV_STATE__',BV_NICKNAME:'$__BV_NICKNAME__'}),f=function(e){function t(c,f){var h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;!function(b,h){if(!(b instanceof h)){throw new TypeError('Cannot call a class as a function')}}(this,t);var b=function(h,b){if(!h){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !b||'object'!=typeof b&&'function'!=typeof b?h:b}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,c,f,h));return Object.freeze(b),b}return function(c,b){if('function'!=typeof b&&null!==b){throw new TypeError('Super expression must either be null or a function, not '+typeof b)}c.prototype=Object.create(b&&b.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(c,b):c.__proto__=b)}(t,c.BaseVariable),b(t,null,[{key:'OFFLINE_PREFIX',get:function(){return '$'}}]),b(t,[{key:'toString',value:function(){return '[BuddyVar: '+this.name+', Type: '+this.type+', Value: '+this.value+']'}},{key:'isOffline',get:function(){return this._name.charAt(0)===t.OFFLINE_PREFIX}}],[{key:'fromSFSArray',value:function(b){return new t(b.get(0),b.get(2),b.get(1))}}]),t}();a.ReservedBuddyVariables=e,a.SFSBuddyVariable=f},function(h,b,c){Object.defineProperty(b,'__esModule',{value:!0}),b.UserPrivileges=b.SFSUser=void 0;var f=function(){function e(f,e){for(var d=0;d<e.length;d++){var a=e[d];a.enumerable=a.enumerable||!1,a.configurable=!0,'value' in a&&(a.writable=!0),Object.defineProperty(f,a.key,a)}}return function(a,d,f){return d&&e(a.prototype,d),f&&e(a,f),a}}(),d=c(58),e=c(1);var g=function(){function e(f,a){var d=arguments.length>2&&void 0!==arguments[2]&&arguments[2];!function(d,e){if(!(d instanceof e)){throw new TypeError('Cannot call a class as a function')}}(this,e),this._id=f,this._name=a,this._isItMe=d,this._privilegeId=0,this._aoiEntryPoint=null,this._variables=new Map(),this._playerIdByRoomId=new Map(),this._userManager=null,this.properties={},Object.seal(this)}return f(e,[{key:'toString',value:function(){return '[User: '+this.name+', Id: '+this.id+', Is me: '+this.isItMe+']'}},{key:'isJoinedInRoom',value:function(a){return a.containsUser(this)}},{key:'getPlayerId',value:function(d){var a=this._playerIdByRoomId.get(d.id);return null!=a?a:0}},{key:'isPlayerInRoom',value:function(a){return !!a.isGame&&this.getPlayerId(a)>0}},{key:'isSpectatorInRoom',value:function(a){return !!a.isGame&&this.getPlayerId(a)<0}},{key:'getVariable',value:function(a){return this._variables.get(a)}},{key:'containsVariable',value:function(a){return this._variables.has(a)}},{key:'getVariables',value:function(){return Array.from(this._variables.values())}},{key:'getUserManager',value:function(){return this._userManager}},{key:'_setPlayerId',value:function(a,d){this._playerIdByRoomId.set(d.id,a)}},{key:'_removePlayerId',value:function(a){this._playerIdByRoomId['delete'](a.id)}},{key:'_setVariables',value:function(i){var d=!0,f=!1,g=void 0;try{for(var e,a=i[Symbol.iterator]();!(d=(e=a.next()).done);d=!0){var j=e.value;this._setVariable(j)}}catch(k){f=!0,g=k}finally{try{!d&&a['return']&&a['return']()}finally{if(f){throw g}}}}},{key:'_setVariable',value:function(a){a.isNull?this._variables['delete'](a.name):this._variables.set(a.name,a)}},{key:'_setUserManager',value:function(a){if(null!=this._userManager){throw new e.SFSError('User Manager already assigned to user '+this.toString())}this._userManager=a}},{key:'id',get:function(){return this._id}},{key:'name',get:function(){return this._name}},{key:'isItMe',get:function(){return this._isItMe}},{key:'privilegeId',get:function(){return this._privilegeId}},{key:'aoiEntryPoint',get:function(){return this._aoiEntryPoint}},{key:'isGuest',get:function(){return this._privilegeId===a.GUEST}},{key:'isStandardUser',get:function(){return this._privilegeId===a.STANDARD}},{key:'isModerator',get:function(){return this._privilegeId===a.MODERATOR}},{key:'isAdmin',get:function(){return this.privilegeId===a.ADMINISTRATOR}},{key:'isPlayer',get:function(){return this.isPlayerInRoom(this._userManager._sfs.lastJoinedRoom)}},{key:'isSpectator',get:function(){return this.isSpectatorInRoom(this._userManager._sfs.lastJoinedRoom)}}],[{key:'fromSFSArray',value:function(a){var j=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,f=new e(a.get(0),a.get(1));f._privilegeId=a.get(2),null!=j&&f._setPlayerId(a.get(3),j);var g=a.get(4);if(null!=g){for(var i=0;i<g.size();i++){f._setVariable(d.SFSUserVariable.fromSFSArray(g.get(i)))}}return f}}]),e}(),a=Object.freeze({GUEST:0,STANDARD:1,MODERATOR:2,ADMINISTRATOR:3});b.SFSUser=g,b.UserPrivileges=a},function(h,b,f){Object.defineProperty(b,'__esModule',{value:!0}),b.BaseVariable=b.VariableType=void 0;var g='function'==typeof Symbol&&'symbol'==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&'function'==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?'symbol':typeof a},e=function(){function e(e,d){for(var c=0;c<d.length;c++){var a=d[c];a.enumerable=a.enumerable||!1,a.configurable=!0,'value' in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(a,c,d){return c&&e(a.prototype,c),d&&e(a,d),a}}(),c=f(8);var a=Object.freeze({NULL:0,BOOLEAN:1,INT:2,DOUBLE:3,STRING:4,SFSOBJECT:5,SFSARRAY:6,getTypeName:function(a){return ['null','boolean','int','double','string','SFSObject','SFSArray'][a]}}),d=function(){function e(d,c){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;!function(a,e){if(!(a instanceof e)){throw new TypeError('Cannot call a class as a function')}}(this,e),this._name=d,this._value=c,this._type=a>-1?a:this._evalType()}return e(e,[{key:'toSFSArray',value:function(){var a=new c.SFSArray();return a.addUtfString(this.name),a.addByte(this._type),this._populateArrayWithValue(a),a}},{key:'_populateArrayWithValue',value:function(c){switch(this._type){case a.NULL:c.addNull();break;case a.BOOLEAN:c.addBool(this.value);break;case a.INT:c.addInt(this.value);break;case a.DOUBLE:c.addDouble(this.value);break;case a.STRING:c.addUtfString(this.value);break;case a.SFSOBJECT:c.addSFSObject(this.value);break;case a.SFSARRAY:c.addSFSArray(this.value);}}},{key:'_evalType',value:function(){if(null==this._value){return a.NULL}var d=g(this._value);if('boolean'===d){return a.BOOLEAN}if('number'===d){var e=this._value;return e===+e&&e===(0|e)?a.INT:a.DOUBLE}return 'string'===d?a.STRING:'object'===d?this._value instanceof c.SFSArray?a.SFSARRAY:a.SFSOBJECT:void 0}},{key:'name',get:function(){return this._name}},{key:'value',get:function(){return this._value}},{key:'type',get:function(){return a.getTypeName(this._type)}},{key:'isNull',get:function(){return this._type===a.NULL}}]),e}();b.VariableType=a,b.BaseVariable=d},function(g,a,c){Object.defineProperty(a,'__esModule',{value:!0}),a.SFSRoomVariable=a.ReservedRoomVariables=void 0;var e=function(){function e(f,e){for(var d=0;d<e.length;d++){var b=e[d];b.enumerable=b.enumerable||!1,b.configurable=!0,'value' in b&&(b.writable=!0),Object.defineProperty(f,b.key,b)}}return function(b,d,f){return d&&e(b.prototype,d),f&&e(b,f),b}}(),b=c(48);var d=Object.freeze({RV_GAME_STARTED:'$GS'}),f=function(d){function t(e,f){var h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;!function(b,h){if(!(b instanceof h)){throw new TypeError('Cannot call a class as a function')}}(this,t);var b=function(h,b){if(!h){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !b||'object'!=typeof b&&'function'!=typeof b?h:b}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,f,h));return b.isPrivate=!1,b.isPersistent=!1,Object.seal(b),b}return function(e,b){if('function'!=typeof b&&null!==b){throw new TypeError('Super expression must either be null or a function, not '+typeof b)}e.prototype=Object.create(b&&b.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(e,b):e.__proto__=b)}(t,b.BaseVariable),e(t,[{key:'toString',value:function(){return '[RoomVar: '+this.name+', Type: '+this.type+', Value: '+this.value+', Private: '+this.isPrivate+']'}},{key:'toSFSArray',value:function(){var b=function b(f,h,j){null===f&&(f=Function.prototype);var e=Object.getOwnPropertyDescriptor(f,h);if(void 0===e){var i=Object.getPrototypeOf(f);return null===i?void 0:b(i,h,j)}if('value' in e){return e.value}var k=e.get;return void 0!==k?k.call(j):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),'toSFSArray',this).call(this);return b.addBool(this.isPrivate),b.addBool(this.isPersistent),b}}],[{key:'fromSFSArray',value:function(b){var e=new t(b.get(0),b.get(2),b.get(1));return e.isPrivate=b.get(3),e.isPersistent=b.get(4),e}}]),t}();a.ReservedRoomVariables=d,a.SFSRoomVariable=f},function(j,b,g){Object.defineProperty(b,'__esModule',{value:!0}),b.LoggerEvent=b.Logger=b.LogLevel=void 0;var h=function(){function e(e,d){for(var c=0;c<d.length;c++){var a=d[c];a.enumerable=a.enumerable||!1,a.configurable=!0,'value' in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(a,c,d){return c&&e(a.prototype,c),d&&e(a,d),a}}(),f=g(38);var a=Object.freeze({DEBUG:0,INFO:1,WARN:2,ERROR:3,toString:function(a){return a===this.DEBUG?'DEBUG':a===this.INFO?'INFO':a===this.WARN?'WARN':a===this.ERROR?'ERROR':void 0}}),i=Object.freeze({DEBUG:'debug',INFO:'info',WARNING:'warn',ERROR:'error'}),c=Symbol(),d=Symbol(),e=function(e){function t(f){!function(a,c){if(!(a instanceof c)){throw new TypeError('Cannot call a class as a function')}}(this,t);var c=function(c,a){if(!c){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !a||'object'!=typeof a&&'function'!=typeof a?c:a}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));if(f!==d){throw "Logger is a singleton class; you can't instantiate it"}return c._enableConsoleOutput=void 0!==console,c._enableEventDispatching=!1,c._level=a.INFO,c._useBasicLog=!0,void 0!==console&&(c._useBasicLog='function'!=typeof console.debug||'function'!=typeof console.info||'function'!=typeof console.warn||'function'!=typeof console.error),c}return function(c,a){if('function'!=typeof a&&null!==a){throw new TypeError('Super expression must either be null or a function, not '+typeof a)}c.prototype=Object.create(a&&a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(c,a):c.__proto__=a)}(t,f.EventDispatcher),h(t,[{key:'log',value:function(c){for(var k=this,h=arguments.length,i=Array(h>1?h-1:0),d=1;d<h;d++){i[d-1]=arguments[d]}if(this.isValidLevel(c)&&c>=this._level){if(this._enableConsoleOutput){var f=function(d,a){k._useBasicLog&&(a=function(f){console.log(f)}),a('[ SFS2X | '+d+' ] '+i.join(' '))};switch(c){case a.DEBUG:f('DEBUG',function(a){console.debug(a)});break;case a.INFO:f('INFO',function(a){console.info(a)});break;case a.WARN:f('WARN',function(a){console.warn(a)});break;case a.ERROR:f('ERROR',function(a){console.error(a)});}}this._enableEventDispatching&&this.dispatchEvent(a.toString(c).toLowerCase(),{message:i.join(' ')})}}},{key:'debug',value:function(){for(var d=arguments.length,f=Array(d),c=0;c<d;c++){f[c]=arguments[c]}this.log(a.DEBUG,f)}},{key:'info',value:function(){for(var d=arguments.length,f=Array(d),c=0;c<d;c++){f[c]=arguments[c]}this.log(a.INFO,f)}},{key:'warn',value:function(){for(var d=arguments.length,f=Array(d),c=0;c<d;c++){f[c]=arguments[c]}this.log(a.WARN,f)}},{key:'error',value:function(){for(var d=arguments.length,f=Array(d),c=0;c<d;c++){f[c]=arguments[c]}this.log(a.ERROR,f)}},{key:'isValidLevel',value:function(c){if(!Number.isInteger(c)||c<a.DEBUG||c>a.ERROR){throw 'Logging level must be set to a valid value (see LogLevel class)'}return !0}},{key:'level',set:function(a){this.isValidLevel(a)&&(this._level=a)},get:function(){return this._level}},{key:'enableConsoleOutput',set:function(a){void 0!==console&&(this._enableConsoleOutput=a)},get:function(){return this._enableConsoleOutput}},{key:'enableEventDispatching',set:function(a){this._enableEventDispatching=a},get:function(){return this._enableEventDispatching}}],[{key:'instance',get:function(){return this[c]||(this[c]=new t(d)),Object.seal(this[c])}}]),t}();b.LogLevel=a,b.Logger=e,b.LoggerEvent=i},function(e,a,f){Object.defineProperty(a,'__esModule',{value:!0});var d=function(){function e(g,d){for(var c=0;c<d.length;c++){var b=d[c];b.enumerable=b.enumerable||!1,b.configurable=!0,'value' in b&&(b.writable=!0),Object.defineProperty(g,b.key,b)}}return function(b,c,d){return c&&e(b.prototype,c),d&&e(b,d),b}}();var b=Object.freeze({IDLE:'idle',KICK:'kick',BAN:'ban',MANUAL:'manual',UNKNOWN:'unknown',getReason:function(b){switch(b){case 0:return this.IDLE;case 1:return this.KICK;case 2:return this.BAN;case 3:return this.MANUAL;case 4:return this.UNKNOWN;}}}),c=function(){function e(){!function(b,c){if(!(b instanceof c)){throw new TypeError('Cannot call a class as a function')}}(this,e)}return d(e,null,[{key:'prettyPrintByteArray',value:function(b){return null==b?'Null':b.length<32?b.toString():'Byte['+b.length+']'}},{key:'prettyPrintDump',value:function(h){for(var c='',b=0,g=0;g<h.length;g++){var d=h.charAt(g);if(d==this.TOKEN_INDENT_OPEN){b++,c+=this.NEW_LINE+this.getFormatTabs(b)}else {if(d==this.TOKEN_INDENT_CLOSE){if(--b<0){throw 'DumpFormatter: the indentPos is negative. TOKENS ARE NOT BALANCED!'}c+=this.NEW_LINE+this.getFormatTabs(b)}else {d==this.TOKEN_DIVIDER?c+=this.NEW_LINE+this.getFormatTabs(b):c+=d}}}if(0!=b){throw 'DumpFormatter: the indentPos is not === 0 ('+b+'). TOKENS ARE NOT BALANCED!'}return c}},{key:'getFormatTabs',value:function(b){return this.strFill(this.TAB,b)}},{key:'strFill',value:function(d,g){for(var b='',c=0;c<g;c++){b+=d}return b}},{key:'hexDump',value:function(j){var h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;-1===h&&(h=this.HEX_BYTES_PER_LINE);var k='Binary size: '+j.byteLength+this.NEW_LINE,c='',b='',m=0,g=0,d=null;do{var i=(d=j[m]).toString(16).toUpperCase();1===i.length&&(i='0'+i),c+=i+' ',b+=d>=33&&d<=126?String.fromCharCode(d):this.DOT,++g===h&&(g=0,k+=c+this.TAB+b+this.NEW_LINE,c='',b='')}while(++m<j.length);if(0!==g){for(var l=h-g;l>0;--l){c+='   ',b+=' '}k+=c+this.TAB+b+this.NEW_LINE}return k}},{key:'TOKEN_INDENT_OPEN',get:function(){return '{'}},{key:'TOKEN_INDENT_CLOSE',get:function(){return '}'}},{key:'TOKEN_DIVIDER',get:function(){return ';'}},{key:'NEW_LINE',get:function(){return '\n'}},{key:'TAB',get:function(){return '\t'}},{key:'DOT',get:function(){return '.'}},{key:'HEX_BYTES_PER_LINE',get:function(){return 16}}]),e}();a.ClientDisconnectionReason=b,a.DumpFormatter=c},function(d,e,c){var b=c(7)('unscopables'),a=Array.prototype;void 0==a[b]&&c(18)(a,b,{}),d.exports=function(f){a[b][f]=!0}},function(a,b){a.exports={}},function(a,d,b){var c=b(25);a.exports=Object('z').propertyIsEnumerable(0)?Object:function(e){return 'String'==c(e)?e.split(''):Object(e)}},function(b,e,a){var d=a(145),c=a(91);b.exports=Object.keys||function(f){return d(f,c)}},function(c,b,k){Object.defineProperty(b,'__esModule',{value:!0}),b.MessageRecipientMode=b.BanMode=b.MapLimits=b.RoomExtension=b.RoomEvents=b.RoomPermissions=b.MMORoomSettings=b.SFSGameSettings=b.RoomSettings=void 0;var f=function(){function e(f,e){for(var d=0;d<e.length;d++){var a=e[d];a.enumerable=a.enumerable||!1,a.configurable=!0,'value' in a&&(a.writable=!0),Object.defineProperty(f,a.key,a)}}return function(a,d,f){return d&&e(a.prototype,d),f&&e(a,f),a}}(),e=k(1);function o(d,a){if(!d){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !a||'object'!=typeof a&&'function'!=typeof a?d:a}function s(d,a){if('function'!=typeof a&&null!==a){throw new TypeError('Super expression must either be null or a function, not '+typeof a)}d.prototype=Object.create(a&&a.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(d,a):d.__proto__=a)}function a(a,d){if(!(a instanceof d)){throw new TypeError('Cannot call a class as a function')}}var d=function c(d){a(this,c),this.name=d,this.password='',this.groupId='default',this.isGame=!1,this.maxUsers=10,this.maxSpectators=0,this.maxVariables=5,this.variables=[],this.permissions=null,this.events=null,this.extension=null,this.allowOwnerOnlyInvitation=!0},g=function(e){function t(f){a(this,t);var d=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,f));return d.isPublic=!0,d.minPlayersToStartGame=2,d.invitedPlayers=null,d.searchableRooms=null,d.invitationExpiryTime=15,d.leaveLastJoinedRoom=!0,d.notifyGameStarted=!1,d.playerMatchExpression=null,d.spectatorMatchExpression=null,d.invitationParams=null,Object.seal(d),d}return s(t,d),t}(),j=function(e){function t(f,g){a(this,t);var d=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,f));return d.defaultAOI=g,d.mapLimits=null,d.userMaxLimboSeconds=50,d.proximityListUpdateMillis=250,d.sendAOIEntryPoint=!0,Object.seal(d),d}return s(t,d),t}(),h=Object.freeze({BY_ADDRESS:0,BY_NAME:1}),i=function(){function e(d,f){if(a(this,e),d<e.TO_USER||d>e.TO_ZONE){throw new e.SFSError('Illegal recipient mode: '+d)}this._mode=d,this._target=f,Object.freeze(this)}return f(e,null,[{key:'TO_USER',get:function(){return 0}},{key:'TO_ROOM',get:function(){return 1}},{key:'TO_GROUP',get:function(){return 2}},{key:'TO_ZONE',get:function(){return 3}}]),f(e,[{key:'mode',get:function(){return this._mode}},{key:'target',get:function(){return this._target}}]),e}();b.RoomSettings=d,b.SFSGameSettings=g,b.MMORoomSettings=j,b.RoomPermissions=function c(){a(this,c),this.allowNameChange=!1,this.allowPasswordStateChange=!1,this.allowPublicMessages=!0,this.allowResizing=!1,Object.seal(this)},b.RoomEvents=function c(){a(this,c),this.allowUserCountChange=!1,this.allowUserEnter=!1,this.allowUserExit=!1,this.allowUserVariablesUpdate=!1,Object.seal(this)},b.RoomExtension=function c(e,d){a(this,c),this.id=e,this.className=d,this.propertiesFile='',Object.seal(this)},b.MapLimits=function c(f,d){if(a(this,c),null==f||null==d){throw new e.SFSError('Map limits arguments must be both non null!')}this.lowerLimit=f,this.higherLimit=d,Object.seal(this)},b.BanMode=h,b.MessageRecipientMode=i},function(g,b,c){Object.defineProperty(b,'__esModule',{value:!0}),b.BuddyOnlineState=b.SFSBuddy=void 0;var e=function(){function e(f,e){for(var d=0;d<e.length;d++){var a=e[d];a.enumerable=a.enumerable||!1,a.configurable=!0,'value' in a&&(a.writable=!0),Object.defineProperty(f,a.key,a)}}return function(a,d,f){return d&&e(a.prototype,d),f&&e(a,f),a}}(),a=c(46);var d=function(){function e(h,d){var f=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];!function(a,e){if(!(a instanceof e)){throw new TypeError('Cannot call a class as a function')}}(this,e),this._id=h,this._name=d,this._isBlocked=f,this._isTemp=a,this._variables=new Map(),Object.seal(this)}return e(e,[{key:'toString',value:function(){return '[Buddy: '+this.name+', Id: '+this.id+']'}},{key:'getVariable',value:function(a){return this._variables.get(a)}},{key:'containsVariable',value:function(a){return this._variables.has(a)}},{key:'getVariables',value:function(){return Array.from(this._variables.values())}},{key:'getOfflineVariables',value:function(){return this.getVariables().filter(function(d){return d.name.charAt(0)===a.SFSBuddyVariable.OFFLINE_PREFIX})}},{key:'getOnlineVariables',value:function(){return this.getVariables().filter(function(d){return d.name.charAt(0)!==a.SFSBuddyVariable.OFFLINE_PREFIX})}},{key:'_setVariables',value:function(i){var d=!0,f=!1,h=void 0;try{for(var e,a=i[Symbol.iterator]();!(d=(e=a.next()).done);d=!0){var j=e.value;this._setVariable(j)}}catch(k){f=!0,h=k}finally{try{!d&&a['return']&&a['return']()}finally{if(f){throw h}}}}},{key:'_setVariable',value:function(a){a.isNull?this._variables['delete'](a.name):this._variables.set(a.name,a)}},{key:'_removeVariable',value:function(a){this._variables['delete'](a)}},{key:'_clearVolatileVariables',value:function(){var a=!0,h=!1,e=void 0;try{for(var f,d=this.getOnlineVariables()[Symbol.iterator]();!(a=(f=d.next()).done);a=!0){var i=f.value;this._removeVariable(i.name)}}catch(j){h=!0,e=j}finally{try{!a&&d['return']&&d['return']()}finally{if(h){throw e}}}}},{key:'id',get:function(){return this._id}},{key:'name',get:function(){return this._name}},{key:'isBlocked',get:function(){return this._isBlocked}},{key:'isTemp',get:function(){return this._isTemp}},{key:'isOnline',get:function(){var d=!0;return this.containsVariable(a.ReservedBuddyVariables.BV_ONLINE)&&(d=this.getVariable(a.ReservedBuddyVariables.BV_ONLINE).value),d&&this._id>-1}},{key:'state',get:function(){return this.containsVariable(a.ReservedBuddyVariables.BV_STATE)?this.getVariable(a.ReservedBuddyVariables.BV_STATE).value:null}},{key:'nickName',get:function(){return this.containsVariable(a.ReservedBuddyVariables.BV_NICKNAME)?this.getVariable(a.ReservedBuddyVariables.BV_NICKNAME).value:null}}],[{key:'fromSFSArray',value:function(d){var i=new e(d.get(0),d.get(1),d.get(2),d.size()>3&&d.get(4)),h=d.get(3);if(null!=h){for(var f=0;f<h.size();f++){i._setVariable(a.SFSBuddyVariable.fromSFSArray(h.get(f)))}}return i}}]),e}(),f=Object.freeze({ONLINE:0,OFFLINE:1,LEFT_THE_SERVER:2});b.SFSBuddy=d,b.BuddyOnlineState=f},function(f,a,c){Object.defineProperty(a,'__esModule',{value:!0}),a.SFSUserVariable=void 0;var e=function(){function e(g,e){for(var d=0;d<e.length;d++){var b=e[d];b.enumerable=b.enumerable||!1,b.configurable=!0,'value' in b&&(b.writable=!0),Object.defineProperty(g,b.key,b)}}return function(b,d,g){return d&&e(b.prototype,d),g&&e(b,g),b}}(),b=c(48);var d=function(d){function t(e,g){var h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;!function(b,h){if(!(b instanceof h)){throw new TypeError('Cannot call a class as a function')}}(this,t);var b=function(h,b){if(!h){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !b||'object'!=typeof b&&'function'!=typeof b?h:b}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,g,h));return b.isPrivate=!1,Object.seal(b),b}return function(e,b){if('function'!=typeof b&&null!==b){throw new TypeError('Super expression must either be null or a function, not '+typeof b)}e.prototype=Object.create(b&&b.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(e,b):e.__proto__=b)}(t,b.BaseVariable),e(t,[{key:'toString',value:function(){return '[UserVar: '+this.name+', Type: '+this.type+', Value: '+this.value+', Private: '+this.isPrivate+']'}},{key:'toSFSArray',value:function(){var b=function b(g,h,j){null===g&&(g=Function.prototype);var e=Object.getOwnPropertyDescriptor(g,h);if(void 0===e){var i=Object.getPrototypeOf(g);return null===i?void 0:b(i,h,j)}if('value' in e){return e.value}var k=e.get;return void 0!==k?k.call(j):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),'toSFSArray',this).call(this);return b.addBool(this.isPrivate),b}}],[{key:'fromSFSArray',value:function(b){var e=new t(b.get(0),b.get(2),b.get(1));return b.size()>3&&(e.isPrivate=b.get(3)),e}}]),t}();a.SFSUserVariable=d},function(k,m,b){for(var c,a=b(6),h=b(18),i=b(35),d=i('typed_array'),j=i('view'),e=!(!a.ArrayBuffer||!a.DataView),g=e,f=0,l='Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array'.split(',');f<9;){(c=a[l[f++]])?(h(c.prototype,d,!0),h(c.prototype,j,!0)):g=!1}k.exports={ABV:e,CONSTR:g,TYPED:d,VIEW:j}},function(h,o,a){var k=a(6),b=a(0),j=a(15),l=a(40),f=a(29),m=a(61),g=a(41),d=a(4),c=a(3),i=a(63),e=a(44),n=a(86);h.exports=function(s,B,E,A,t,q){var x=k[s],p=x,u=t?'set':'add',r=p&&p.prototype,y={},v=function(b){var c=r[b];j(r,b,'delete'==b?function(e){return !(q&&!d(e))&&c.call(this,0===e?0:e)}:'has'==b?function(e){return !(q&&!d(e))&&c.call(this,0===e?0:e)}:'get'==b?function(e){return q&&!d(e)?void 0:c.call(this,0===e?0:e)}:'add'==b?function(d){return c.call(this,0===d?0:d),this}:function(d,e){return c.call(this,0===d?0:d,e),this})};if('function'==typeof p&&(q||r.forEach&&!c(function(){(new p()).entries().next()}))){var w=new p(),C=w[u](q?{}:-0,1)!=w,F=c(function(){w.has(1)}),D=i(function(b){new p(b)}),z=!q&&c(function(){for(var c=new p(),b=5;b--;){c[u](b,b)}return !c.has(-0)});D||((p=B(function(d,c){g(d,p,s);var b=n(new x(),d,p);return void 0!=c&&m(c,t,b[u],b),b})).prototype=r,r.constructor=p),(F||z)&&(v('delete'),v('has'),t&&v('get')),(z||C)&&v(u),q&&r.clear&&delete r.clear}else {p=A.getConstructor(B,s,t,u),l(p.prototype,E),f.NEED=!0}return e(p,s),y[s]=p,b(b.G+b.W+b.F*(p!=x),y),q||A.setStrong(p,s,t),p}},function(f,d,a){var i=a(27),g=a(131),h=a(79),j=a(5),e=a(12),k=a(78),b={},c={};(d=f.exports=function(l,r,w,u,v){var t,o,q,m,p=v?function(){return l}:k(l),s=i(w,u,r?2:1),n=0;if('function'!=typeof p){throw TypeError(l+' is not iterable!')}if(h(p)){for(t=e(l.length);t>n;n++){if((m=r?s(j(o=l[n])[0],o[1]):s(l[n]))===b||m===c){return m}}}else {for(q=p.call(l);!(o=q.next()).done;){if((m=g(q,s,o.value,r))===b||m===c){return m}}}}).BREAK=b,d.RETURN=c},function(c,h,a){var f=a(18),d=a(15),e=a(3),g=a(28),b=a(7);c.exports=function(i,o,n){var j=b(i),k=n(g,j,''[i]),m=k[0],l=k[1];e(function(){var b={};return b[j]=function(){return 7},7!=''[i](b)})&&(d(String.prototype,i,m),f(RegExp.prototype,j,2==o?function(b,d){return l.call(b,this,d)}:function(b){return l.call(b,this)}))}},function(d,f,e){var a=e(7)('iterator'),b=!1;try{var c=[7][a]();c['return']=function(){b=!0},Array.from(c,function(){throw 2})}catch(g){}d.exports=function(i,j){if(!j&&!b){return !1}var g=!1;try{var c=[7],h=c[a]();h.next=function(){return {done:g=!0}},c[a]=function(){return h},i(c)}catch(k){}return g}},function(g,l,b){var c=b(0),i=b(28),j=b(3),d=b(87),a='['+d+']',k=RegExp('^'+a+a+'*'),f=RegExp(a+a+'*$'),e=function(a,k,i){var e={},f=j(function(){return !!d[a]()||'\u200b'!='\u200b'[a]()}),m=e[a]=f?k(h):d[a];i&&(e[i]=m),c(c.P+c.F*f,'String',e)},h=e.trim=function(a,c){return a=String(i(a)),1&c&&(a=a.replace(k,'')),2&c&&(a=a.replace(f,'')),a};g.exports=e},function(c,f,b){var a=b(25),d=b(7)('toStringTag'),e='Arguments'==a(function(){return arguments}());c.exports=function(h){var g,i,j;return void 0===h?'Undefined':null===h?'Null':'string'==typeof (i=function(a,d){try{return a[d]}catch(k){}}(g=Object(h),d))?i:e?a(g):'Object'==(j=a(g))&&'function'==typeof g.callee?'Arguments':j}},function(b,a){a.f={}.propertyIsEnumerable},function(b,a){a.f=Object.getOwnPropertySymbols},function(j,b,a){Object.defineProperty(b,'__esModule',{value:!0}),b.InviteUsersRequest=void 0;var e=function(){function e(f,e){for(var d=0;d<e.length;d++){var c=e[d];c.enumerable=c.enumerable||!1,c.configurable=!0,'value' in c&&(c.writable=!0),Object.defineProperty(f,c.key,c)}}return function(c,d,f){return d&&e(c.prototype,d),f&&e(c,f),c}}(),d=a(2),h=a(1),f=a(47),c=a(57),i=a(8);var g=function(g){function t(e,f){var h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;!function(c,d){if(!(c instanceof d)){throw new TypeError('Cannot call a class as a function')}}(this,t);var c=function(d,c){if(!d){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !c||'object'!=typeof c&&'function'!=typeof c?d:c}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,d.Requests.InviteUsers));return c._invitedUsers=e,c._secondsForAnswer=f,c._params=h,Object.seal(c),c}return function(d,c){if('function'!=typeof c&&null!==c){throw new TypeError('Super expression must either be null or a function, not '+typeof c)}d.prototype=Object.create(c&&c.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),c&&(Object.setPrototypeOf?Object.setPrototypeOf(d,c):d.__proto__=c)}(t,d.BaseRequest),e(t,null,[{key:'KEY_USER',get:function(){return 'u'}},{key:'KEY_USER_ID',get:function(){return 'ui'}},{key:'KEY_INVITATION_ID',get:function(){return 'ii'}},{key:'KEY_TIME',get:function(){return 't'}},{key:'KEY_PARAMS',get:function(){return 'p'}},{key:'KEY_INVITEE_ID',get:function(){return 'ee'}},{key:'KEY_INVITED_USERS',get:function(){return 'iu'}},{key:'KEY_REPLY_ID',get:function(){return 'ri'}},{key:'MAX_INVITATIONS_FROM_CLIENT_SIDE',get:function(){return 8}},{key:'MIN_EXPIRY_TIME',get:function(){return 5}},{key:'MAX_EXPIRY_TIME',get:function(){return 300}}]),e(t,[{key:'validate',value:function(e){var d=[];if(null==this._invitedUsers?d.push('No invited users'):this._invitedUsers instanceof Array?(this._invitedUsers.length<1&&d.push('No invited users'),this._invitedUsers.length>t.MAX_INVITATIONS_FROM_CLIENT_SIDE&&d.push('Too many invitations; '+t.MAX_INVITATIONS_FROM_CLIENT_SIDE+' max are allowed from client side'),this._invitedUsers.every(function(d){return d instanceof f.SFSUser||d instanceof c.SFSBuddy})||d.push('Each invited user must be an instance of SFSUser or SFSBuddy class')):d.push('Invited users must be passed in an array'),(this._secondsForAnswer<t.MIN_EXPIRY_TIME||this._secondsForAnswer>t.MAX_EXPIRY_TIME)&&d.push('secondsForAnswer value is out of range (min: '+t.MIN_EXPIRY_TIME+'; max: '+t.MAX_EXPIRY_TIME+')'),null==this._params||this._params instanceof i.SFSObject||d.push('Custom invitation parameters must be set in a SFSObject class instance'),d.length>0){throw new h.SFSValidationError('InviteUsersRequest Error',d)}}},{key:'execute',value:function(n){var k=[],h=!0,i=!1,l=void 0;try{for(var m,e=this._invitedUsers[Symbol.iterator]();!(h=(m=e.next()).done);h=!0){var d=m.value;if(d instanceof f.SFSUser||d instanceof c.SFSBuddy){if(d===n.mySelf){continue}k.push(d.id)}}}catch(o){i=!0,l=o}finally{try{!h&&e['return']&&e['return']()}finally{if(i){throw l}}}this._reqObj.putIntArray(t.KEY_INVITED_USERS,k),this._reqObj.putShort(t.KEY_TIME,this._secondsForAnswer),null!=this._params&&this._reqObj.putSFSObject(t.KEY_PARAMS,this._params)}}]),t}();b.InviteUsersRequest=g},function(t,a,d){Object.defineProperty(a,'__esModule',{value:!0}),a.AdminMessageRequest=a.ModeratorMessageRequest=a.ObjectMessageRequest=a.PrivateMessageRequest=a.PublicMessageRequest=a.GenericMessageRequest=a.GenericMessageType=void 0;var n=function(){function e(f,e){for(var c=0;c<e.length;c++){var b=e[c];b.enumerable=b.enumerable||!1,b.configurable=!0,'value' in b&&(b.writable=!0),Object.defineProperty(f,b.key,b)}}return function(b,c,f){return c&&e(b.prototype,c),f&&e(b,f),b}}(),m=d(2),e=d(1),c=d(56),i=d(8),j=d(10),k=d(47);function l(b,c){if(!(b instanceof c)){throw new TypeError('Cannot call a class as a function')}}function f(c,b){if(!c){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !b||'object'!=typeof b&&'function'!=typeof b?c:b}function h(c,b){if('function'!=typeof b&&null!==b){throw new TypeError('Super expression must either be null or a function, not '+typeof b)}c.prototype=Object.create(b&&b.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(c,b):c.__proto__=b)}var b=Object.freeze({PUBLIC_MSG:0,PRIVATE_MSG:1,MODERATOR_MSG:2,ADMING_MSG:3,OBJECT_MSG:4,BUDDY_MSG:5}),g=function(g){function t(){l(this,t);var b=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,m.Requests.GenericMessage));return b._type=-1,b._room=null,b._user=null,b._message=null,b._params=null,b._recipient=null,b._sendMode=-1,Object.seal(b),b}return h(t,m.BaseRequest),n(t,null,[{key:'KEY_ROOM_ID',get:function(){return 'r'}},{key:'KEY_USER_ID',get:function(){return 'u'}},{key:'KEY_MESSAGE',get:function(){return 'm'}},{key:'KEY_MESSAGE_TYPE',get:function(){return 't'}},{key:'KEY_RECIPIENT',get:function(){return 'rc'}},{key:'KEY_RECIPIENT_MODE',get:function(){return 'rm'}},{key:'KEY_XTRA_PARAMS',get:function(){return 'p'}},{key:'KEY_SENDER_DATA',get:function(){return 'sd'}}]),n(t,[{key:'validate',value:function(f){if(this._type<0){throw new e.SFSValidationError('GenericMessageRequest Error',['Unsupported message type: '+this._type])}var c=[];switch(this._type){case b.PUBLIC_MSG:this._validatePublicMessage(f,c);break;case b.PRIVATE_MSG:this._validatePrivateMessage(f,c);break;case b.OBJECT_MSG:this._validateObjectMessage(f,c);break;case b.BUDDY_MSG:this._validateBuddyMessage(f,c);break;default:this._validateSuperUserMessage(f,c);}if(c.length>0){throw new e.SFSValidationError('GenericMessageRequest Error',c)}}},{key:'execute',value:function(c){switch(this._reqObj.putByte(t.KEY_MESSAGE_TYPE,this._type),this._type){case b.PUBLIC_MSG:this._executePublicMessage(c);break;case b.PRIVATE_MSG:this._executePrivateMessage(c);break;case b.OBJECT_MSG:this._executeObjectMessage(c);break;case b.BUDDY_MSG:this._executeBuddyMessage(c);break;default:this._executeSuperUserMessage(c);}}},{key:'_validatePublicMessage',value:function(c,b){null!=this._message&&0!==this._message.length||b.push('Public message is empty'),null==this._room&&(this._room=c.lastJoinedRoom),null==this._room?b.push('You must be joined in a Room to send a message'):this._room instanceof j.SFSRoom?c.getJoinedRooms().indexOf(this._room)<0&&b.push('You are not joined in the target Room: '+this._room):b.push('Target Room must be an instance of SFSRoom class'),null==this._params||this._params instanceof i.SFSObject||b.push('Message parameters must be set in a SFSObject class instance')}},{key:'_validatePrivateMessage',value:function(c,b){null!=this._message&&0!==this._message.length||b.push('Private message is empty'),this._recipient<0&&b.push('Invalid recipient id: '+this._recipient),null==this._params||this._params instanceof i.SFSObject||b.push('Message parameters must be set in a SFSObject class instance')}},{key:'_validateObjectMessage',value:function(c,b){null==this._params?b.push('Object message is null'):this._params instanceof i.SFSObject||b.push('Message object must be an instance of SFSObject class'),null==this._room&&(this._room=c.lastJoinedRoom),null==this._room?b.push('You must be joined in a Room to send a message'):this._room instanceof j.SFSRoom?c.getJoinedRooms().indexOf(this._room)<0&&b.push('You are not joined in the target Room: '+this._room):b.push('Target Room must be an instance of SFSRoom class'),null!=this._recipient&&(this._recipient instanceof Array?this._recipient.every(function(e){return e instanceof k.SFSUser})||b.push('Each message recipient must be an instance of SFSUser class'):b.push('Message recipients must be passed in an array'),this._recipient.length>this._room.capacity&&b.push('The number of recipients is bigger than the target Room capacity: '+this._recipient.length))}},{key:'_validateBuddyMessage',value:function(c,b){c.buddyManager.isInited||b.push('Buddy List not yet initialized; please send an InitBuddyRequest first'),!1===c.buddyManager.myOnlineState&&b.push("Can't send messages while you are offline in the Buddy List system"),null!=this._message&&0!==this._message.length||b.push('Buddy message is empty'),this._recipient<0&&b.push('Recipient is offline or not in your Buddy List'),null==this._params||this._params instanceof i.SFSObject||b.push('Message parameters must be set in a SFSObject class instance')}},{key:'_validateSuperUserMessage',value:function(e,b){switch(null!=this._message&&0!==this._message.length||b.push('Moderator message is empty'),null==this._params||this._params instanceof i.SFSObject||b.push('Message parameters must be set in a SFSObject class instance'),this._sendMode){case c.MessageRecipientMode.TO_USER:this._recipient instanceof k.SFSUser||b.push('Recipient must be an instance of SFSUser class');break;case c.MessageRecipientMode.TO_ROOM:this._recipient instanceof j.SFSRoom||b.push('Recipient must be an instance of SFSRoom class');break;case c.MessageRecipientMode.TO_GROUP:'string'!=typeof this._recipient&&b.push('Recipient must be a string (the groupId)');}}},{key:'_executePublicMessage',value:function(b){this._reqObj.putInt(t.KEY_ROOM_ID,this._room.id),this._reqObj.putInt(t.KEY_USER_ID,b.mySelf.id),this._reqObj.putUtfString(t.KEY_MESSAGE,this._message),null!=this._params&&this._reqObj.putSFSObject(t.KEY_XTRA_PARAMS,this._params)}},{key:'_executePrivateMessage',value:function(b){this._reqObj.putInt(t.KEY_RECIPIENT,this._recipient),this._reqObj.putUtfString(t.KEY_MESSAGE,this._message),null!=this._params&&this._reqObj.putSFSObject(t.KEY_XTRA_PARAMS,this._params)}},{key:'_executeBuddyMessage',value:function(b){this._reqObj.putInt(t.KEY_RECIPIENT,this._recipient),this._reqObj.putUtfString(t.KEY_MESSAGE,this._message),null!=this._params&&this._reqObj.putSFSObject(t.KEY_XTRA_PARAMS,this._params)}},{key:'_executeSuperUserMessage',value:function(b){switch(this._reqObj.putUtfString(t.KEY_MESSAGE,this._message),null!=this._params&&this._reqObj.putSFSObject(t.KEY_XTRA_PARAMS,this._params),this._reqObj.putInt(t.KEY_RECIPIENT_MODE,this._sendMode),this._sendMode){case c.MessageRecipientMode.TO_USER:case c.MessageRecipientMode.TO_ROOM:this._reqObj.putInt(t.KEY_RECIPIENT,this._recipient.id);break;case c.MessageRecipientMode.TO_GROUP:this._reqObj.putUtfString(t.KEY_RECIPIENT,this._recipient);}}},{key:'_executeObjectMessage',value:function(k){this._reqObj.putInt(t.KEY_ROOM_ID,this._room.id),this._reqObj.putSFSObject(t.KEY_XTRA_PARAMS,this._params);var c=new Set();if(null!=this._recipient){var e=!0,f=!1,h=void 0;try{for(var i,b=this._recipient[Symbol.iterator]();!(e=(i=b.next()).done);e=!0){var j=i.value;c.add(j.id)}}catch(u){f=!0,h=u}finally{try{!e&&b['return']&&b['return']()}finally{if(f){throw h}}}}c.size>0&&this._reqObj.putIntArray(t.KEY_RECIPIENT,Array.from(c))}}]),t}(),r=function(c){function t(g){var h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;l(this,t);var e=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._type=b.OBJECT_MSG,e._params=g,e._room=h,e._recipient=i,Object.seal(e),e}return h(t,g),t}(),p=function(c){function t(g){var h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;l(this,t);var e=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._type=b.PUBLIC_MSG,e._message=g,e._room=i,e._params=h,Object.seal(e),e}return h(t,g),t}(),q=function(c){function t(g,h){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;l(this,t);var e=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._type=b.PRIVATE_MSG,e._message=g,e._recipient=h,e._params=i,Object.seal(e),e}return h(t,g),t}(),s=function(i){function t(j,h){var k=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;l(this,t);var g=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));if(null==h){throw new e.SFSError('Recipient mode cannot be null')}if(!(h instanceof c.MessageRecipientMode)){throw new e.SFSError('Recipient mode must be an instance of MessageRecipientMode class')}return g._type=b.MODERATOR_MSG,g._message=j,g._params=k,g._recipient=h.target,g._sendMode=h.mode,Object.seal(g),g}return h(t,g),t}(),o=function(i){function t(j,h){var k=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;l(this,t);var g=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));if(null==h){throw new e.SFSError('Recipient mode cannot be null')}if(!(h instanceof c.MessageRecipientMode)){throw new e.SFSError('Recipient mode must an instance of MessageRecipientMode class')}return g._type=b.ADMING_MSG,g._message=j,g._params=k,g._recipient=h.target,g._sendMode=h.mode,Object.seal(g),g}return h(t,g),t}();a.GenericMessageType=b,a.GenericMessageRequest=g,a.PublicMessageRequest=p,a.PrivateMessageRequest=q,a.ObjectMessageRequest=r,a.ModeratorMessageRequest=s,a.AdminMessageRequest=o},function(k,d,b){Object.defineProperty(d,'__esModule',{value:!0}),d.CreateRoomRequest=void 0;var g=function(){function e(f,e){for(var c=0;c<e.length;c++){var a=e[c];a.enumerable=a.enumerable||!1,a.configurable=!0,'value' in a&&(a.writable=!0),Object.defineProperty(f,a.key,a)}}return function(a,c,f){return c&&e(a.prototype,c),f&&e(a,f),a}}(),e=b(2),f=b(1),a=b(56),c=b(8),j=b(10),h=b(49);var i=function(i){function t(c){var f=arguments.length>1&&void 0!==arguments[1]&&arguments[1],g=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;!function(a,e){if(!(a instanceof e)){throw new TypeError('Cannot call a class as a function')}}(this,t);var a=function(e,a){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !a||'object'!=typeof a&&'function'!=typeof a?e:a}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e.Requests.CreateRoom));return a._settings=c,a._autoJoin=f,a._roomToLeave=g,Object.seal(a),a}return function(c,a){if('function'!=typeof a&&null!==a){throw new TypeError('Super expression must either be null or a function, not '+typeof a)}c.prototype=Object.create(a&&a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(c,a):c.__proto__=a)}(t,e.BaseRequest),g(t,null,[{key:'KEY_ROOM',get:function(){return 'r'}},{key:'KEY_NAME',get:function(){return 'n'}},{key:'KEY_PASSWORD',get:function(){return 'p'}},{key:'KEY_GROUP_ID',get:function(){return 'g'}},{key:'KEY_ISGAME',get:function(){return 'ig'}},{key:'KEY_MAXUSERS',get:function(){return 'mu'}},{key:'KEY_MAXSPECTATORS',get:function(){return 'ms'}},{key:'KEY_MAXVARS',get:function(){return 'mv'}},{key:'KEY_ROOMVARS',get:function(){return 'rv'}},{key:'KEY_PERMISSIONS',get:function(){return 'pm'}},{key:'KEY_EVENTS',get:function(){return 'ev'}},{key:'KEY_EXTID',get:function(){return 'xn'}},{key:'KEY_EXTCLASS',get:function(){return 'xc'}},{key:'KEY_EXTPROP',get:function(){return 'xp'}},{key:'KEY_AUTOJOIN',get:function(){return 'aj'}},{key:'KEY_ROOM_TO_LEAVE',get:function(){return 'rl'}},{key:'KEY_ALLOW_JOIN_INVITATION_BY_OWNER',get:function(){return 'aji'}},{key:'KEY_MMO_DEFAULT_AOI',get:function(){return 'maoi'}},{key:'KEY_MMO_MAP_LOW_LIMIT',get:function(){return 'mllm'}},{key:'KEY_MMO_MAP_HIGH_LIMIT',get:function(){return 'mlhm'}},{key:'KEY_MMO_USER_MAX_LIMBO_SECONDS',get:function(){return 'muls'}},{key:'KEY_MMO_PROXIMITY_UPDATE_MILLIS',get:function(){return 'mpum'}},{key:'KEY_MMO_SEND_ENTRY_POINT',get:function(){return 'msep'}}]),g(t,[{key:'validate',value:function(g){if(!(this._settings instanceof a.RoomSettings)){throw new f.SFSValidationError('CreateRoomRequest Error',['Room configuration must be an instance of RoomSettings class'])}var e=[];if(null!=this._settings.name&&0!==this._settings.name.length||e.push('Missing Room name'),this._settings.maxUsers<=0&&e.push('Max number of users must be > 0'),this._settings.maxSpectators<0&&e.push('Max number of spectators must be >= 0'),this._settings.maxVariables<0&&e.push('Max number of Room Variables must be >= 0'),null!=this._settings.variables&&(this._settings.variables instanceof Array?this._settings.variables.every(function(a){return a instanceof h.SFSRoomVariable})||e.push('Each Room Variable must be an instance of SFSRoomVariable class'):e.push('Room Variables must be passed in an array')),null==this._settings.permissions||this._settings.permissions instanceof a.RoomPermissions||e.push('Allowed room permissions must be an instance of RoomPermissions class'),null==this._settings.events||this._settings.events instanceof a.RoomEvents||e.push('Allowed room events must be an instance of RoomEvents class'),null!=this._settings.extension&&(this._settings.extension instanceof a.RoomExtension?(null!=this._settings.extension.className&&0!==this._settings.extension.className.length||e.push('Missing Room Extension class name'),null!=this._settings.extension.id&&0!==this._settings.extension.id.length||e.push('Missing Room Extension id')):e.push('Room Extension settings must be an instance of RoomExtension class')),this._settings instanceof a.MMORoomSettings&&(null==this._settings.defaultAOI&&e.push("Missing MMORoom's default AoI (Area of Interest)"),this._settings.defaultAOI instanceof c.Vec3D||e.push("MMORoom's AoI (Area of Interest) must be an instance of Vec3D class"),null!=this._settings.mapLimits&&(this._settings.mapLimits instanceof a.MapLimits?(null!=this._settings.mapLimits.lowerLimit&&null!=this._settings.mapLimits.higherLimit||e.push("MMORoom's lower and higher map limits must be both set"),this._settings.mapLimits.lowerLimit instanceof c.Vec3D&&this._settings.mapLimits.higherLimit instanceof c.Vec3D||e.push("MMORoom's lower and higher map limits must be both instances of Vec3D class")):e.push("MMORoom's map limits must be set in an instance of MapLimits class"))),null==this._roomToLeave||this._roomToLeave instanceof j.SFSRoom||e.push('Room to leave must be an instance of SFSRoom class'),e.length>0){throw new f.SFSValidationError('CreateRoomRequest Error',e)}}},{key:'execute',value:function(p){if(this._reqObj.putUtfString(t.KEY_NAME,this._settings.name),this._reqObj.putUtfString(t.KEY_GROUP_ID,this._settings.groupId),this._reqObj.putUtfString(t.KEY_PASSWORD,this._settings.password),this._reqObj.putBool(t.KEY_ISGAME,this._settings.isGame),this._reqObj.putShort(t.KEY_MAXUSERS,this._settings.maxUsers),this._reqObj.putShort(t.KEY_MAXSPECTATORS,this._settings.maxSpectators),this._reqObj.putShort(t.KEY_MAXVARS,this._settings.maxVariables),this._reqObj.putBool(t.KEY_ALLOW_JOIN_INVITATION_BY_OWNER,this._settings.allowOwnerOnlyInvitation),null!=this._settings.variables&&this._settings.variables.length>0){var l=new c.SFSArray(),h=!0,j=!1,m=void 0;try{for(var n,g=this._settings.variables[Symbol.iterator]();!(h=(n=g.next()).done);h=!0){var o=n.value;l.addSFSArray(o.toSFSArray())}}catch(q){j=!0,m=q}finally{try{!h&&g['return']&&g['return']()}finally{if(j){throw m}}}this._reqObj.putSFSArray(t.KEY_ROOMVARS,l)}if(null!=this._settings.permissions){var e=[];e.push(this._settings.permissions.allowNameChange),e.push(this._settings.permissions.allowPasswordStateChange),e.push(this._settings.permissions.allowPublicMessages),e.push(this._settings.permissions.allowResizing),this._reqObj.putBoolArray(t.KEY_PERMISSIONS,e)}if(null!=this._settings.events){var f=[];f.push(this._settings.events.allowUserEnter),f.push(this._settings.events.allowUserExit),f.push(this._settings.events.allowUserCountChange),f.push(this._settings.events.allowUserVariablesUpdate),this._reqObj.putBoolArray(t.KEY_EVENTS,f)}null!=this._settings.extension&&(this._reqObj.putUtfString(t.KEY_EXTID,this._settings.extension.id),this._reqObj.putUtfString(t.KEY_EXTCLASS,this._settings.extension.className),null!=this._settings.extension.propertiesFile&&this._settings.extension.propertiesFile.length>0&&this._reqObj.putUtfString(t.KEY_EXTPROP,this._settings.extension.propertiesFile)),this._settings instanceof a.MMORoomSettings&&(this._settings.defaultAOI.isFloat?(this._reqObj.putFloatArray(t.KEY_MMO_DEFAULT_AOI,this._settings.defaultAOI.toArray()),null!=this._settings.mapLimits&&(this._reqObj.putFloatArray(t.KEY_MMO_MAP_LOW_LIMIT,this._settings.mapLimits.lowerLimit.toArray()),this._reqObj.putFloatArray(t.KEY_MMO_MAP_HIGH_LIMIT,this._settings.mapLimits.higherLimit.toArray()))):(this._reqObj.putIntArray(t.KEY_MMO_DEFAULT_AOI,this._settings.defaultAOI.toArray()),null!=this._settings.mapLimits&&(this._reqObj.putIntArray(t.KEY_MMO_MAP_LOW_LIMIT,this._settings.mapLimits.lowerLimit.toArray()),this._reqObj.putIntArray(t.KEY_MMO_MAP_HIGH_LIMIT,this._settings.mapLimits.higherLimit.toArray()))),this._reqObj.putShort(t.KEY_MMO_USER_MAX_LIMBO_SECONDS,this._settings.userMaxLimboSeconds),this._reqObj.putShort(t.KEY_MMO_PROXIMITY_UPDATE_MILLIS,this._settings.proximityListUpdateMillis),this._reqObj.putBool(t.KEY_MMO_SEND_ENTRY_POINT,this._settings.sendAOIEntryPoint)),this._reqObj.putBool(t.KEY_AUTOJOIN,this._autoJoin),null!=this._roomToLeave&&this._reqObj.putInt(t.KEY_ROOM_TO_LEAVE,this._roomToLeave.id)}}]),t}();d.CreateRoomRequest=i},function(e,a,f){Object.defineProperty(a,'__esModule',{value:!0});var d=function(){function e(g,d){for(var c=0;c<d.length;c++){var b=d[c];b.enumerable=b.enumerable||!1,b.configurable=!0,'value' in b&&(b.writable=!0),Object.defineProperty(g,b.key,b)}}return function(b,c,d){return c&&e(b.prototype,c),d&&e(b,d),b}}();var b=function(){function e(g,c){var d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:15,b=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;!function(b,d){if(!(b instanceof d)){throw new TypeError('Cannot call a class as a function')}}(this,e),this._id=-1,this._inviter=g,this._invitee=c,this._secondsForAnswer=d,this._params=b,Object.seal(this)}return d(e,[{key:'id',get:function(){return this._id}},{key:'inviter',get:function(){return this._inviter}},{key:'invitee',get:function(){return this._invitee}},{key:'secondsForAnswer',get:function(){return this._secondsForAnswer}},{key:'params',get:function(){return this._params}}]),e}(),c=Object.freeze({ACCEPT:0,REFUSE:1,EXPIRED:255});a.SFSInvitation=b,a.InvitationReply=c},function(f,a,c){Object.defineProperty(a,'__esModule',{value:!0}),a.MMOItemVariable=void 0;var e=function(){function e(g,e){for(var d=0;d<e.length;d++){var b=e[d];b.enumerable=b.enumerable||!1,b.configurable=!0,'value' in b&&(b.writable=!0),Object.defineProperty(g,b.key,b)}}return function(b,d,g){return d&&e(b.prototype,d),g&&e(b,g),b}}(),b=c(48);var d=function(d){function t(e,g){var h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;!function(b,h){if(!(b instanceof h)){throw new TypeError('Cannot call a class as a function')}}(this,t);var b=function(h,b){if(!h){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !b||'object'!=typeof b&&'function'!=typeof b?h:b}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,g,h));return Object.freeze(b),b}return function(e,b){if('function'!=typeof b&&null!==b){throw new TypeError('Super expression must either be null or a function, not '+typeof b)}e.prototype=Object.create(b&&b.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(e,b):e.__proto__=b)}(t,b.BaseVariable),e(t,[{key:'toString',value:function(){return '[ItemVar: '+this.name+', Type: '+this.type+', Value: '+this.value+']'}}],[{key:'fromSFSArray',value:function(b){return new t(b.get(0),b.get(2),b.get(1))}}]),t}();a.MMOItemVariable=d},function(e,a,f){Object.defineProperty(a,'__esModule',{value:!0});var d=function(){function e(g,d){for(var c=0;c<d.length;c++){var b=d[c];b.enumerable=b.enumerable||!1,b.configurable=!0,'value' in b&&(b.writable=!0),Object.defineProperty(g,b.key,b)}}return function(b,c,d){return c&&e(b.prototype,c),d&&e(b,d),b}}();var b=function(){function e(){throw function(b,c){if(!(b instanceof c)){throw new TypeError('Cannot call a class as a function')}}(this,e),'Class SFSErrorCodes cannot be instantiated. Please check the documentation for more details on its usage'}return d(e,null,[{key:'setErrorMessage',value:function(b,c){this._errorsByCode[b]=c}},{key:'getErrorMessage',value:function(b,c){return this.stringFormat(this._errorsByCode[b],c)}},{key:'stringFormat',value:function(b,d){if(null==b){return ''}if(null!=d){for(var c=0;c<d.length;c++){var g='{'+c+'}';b=b.replace(g,d[c])}}return b}},{key:'_errorsByCode',get:function(){return c}}]),e}();a.SFSErrorCodes=b;var c=['Client API version is obsolete: {0}; required version: {1}','Requested Zone {0} does not exist','User name {0} is not recognized','Wrong password for user {0}','User {0} is banned','Zone {0} is full','User {0} is already logged in Zone {1}','The server is full','Zone {0} is currently inactive','User name {0} contains bad words; filtered: {1}','Guest users not allowed in Zone {0}','IP address {0} is banned','A Room with the same name already exists: {0}','Requested Group is not available - Room: {0}; Group: {1}','Bad Room name length -  Min: {0}; max: {1}; passed name length: {2}','Room name contains bad words: {0}',"Zone is full; can't add Rooms anymore",'You have exceeded the number of Rooms that you can create per session: {0}','Room creation failed, wrong parameter: {0}','User {0} already joined in Room','Room {0} is full','Wrong password for Room {0}','Requested Room does not exist','Room {0} is locked','Group {0} is already subscribed','Group {0} does not exist','Group {0} is not subscribed','Group {0} does not exist','{0}','Room permission error; Room {0} cannot be renamed','Room permission error; Room {0} cannot change password state','Room permission error; Room {0} cannot change capacity','Switch user error; no player slots available in Room {0}','Switch user error; no spectator slots available in Room {0}','Switch user error; Room {0} is not a Game Room','Switch user error; you are not joined in Room {0}','Buddy Manager initialization error, could not load buddy list: {0}','Buddy Manager error, your buddy list is full; size is {0}','Buddy Manager error, was not able to block buddy {0} because offline','Buddy Manager error, you are attempting to set too many Buddy Variables; limit is {0}','Game {0} access denied, user does not match access criteria','QuickJoinGame action failed: no matching Rooms were found','Your previous invitation reply was invalid or arrived too late']},function(X,G,b){var h=b(6),n=b(11),Q=b(43),F=b(59),z=b(18),H=b(40),u=b(3),o=b(41),N=b(24),O=b(12),m=b(120),T=b(32).f,R=b(9).f,M=b(77),E=b(44),e='prototype',A='Wrong index!',a=h.ArrayBuffer,c=h.DataView,f=h.Math,k=h.RangeError,s=h.Infinity,i=a,S=f.abs,d=f.pow,J=f.floor,I=f.log,P=f.LN2,t=n?'_b':'buffer',g=n?'_l':'byteLength',r=n?'_o':'byteOffset';function j(c,e,n){var a,f,h,j=new Array(n),i=8*n-e-1,k=(1<<i)-1,g=k>>1,m=23===e?d(2,-24)-d(2,-77):0,l=0,o=c<0||0===c&&1/c<0?1:0;for((c=S(c))!=c||c===s?(f=c!=c?1:0,a=k):(a=J(I(c)/P),c*(h=d(2,-a))<1&&(a--,h*=2),(c+=a+g>=1?m/h:m*d(2,1-g))*h>=2&&(a++,h/=2),a+g>=k?(f=0,a=k):a+g>=1?(f=(c*h-1)*d(2,e),a+=g):(f=c*d(2,g-1)*d(2,e),a=0));e>=8;j[l++]=255&f,f/=256,e-=8){}for(a=a<<e|f,i+=e;i>0;j[l++]=255&a,a/=256,i-=8){}return j[--l]|=128*o,j}function U(i,h,k){var e,j=8*k-h-1,l=(1<<j)-1,m=l>>1,c=j-7,f=k-1,g=i[f--],a=127&g;for(g>>=7;c>0;a=256*a+i[f],f--,c-=8){}for(e=a&(1<<-c)-1,a>>=-c,c+=h;c>0;e=256*e+i[f],f--,c-=8){}if(0===a){a=1-m}else {if(a===l){return e?NaN:g?-s:s}e+=d(2,h),a-=m}return (g?-1:1)*e*d(2,a-h)}function D(a){return a[3]<<24|a[2]<<16|a[1]<<8|a[0]}function B(a){return [255&a]}function L(a){return [255&a,a>>8&255]}function Y(a){return [255&a,a>>8&255,a>>16&255,a>>24&255]}function C(a){return j(a,52,8)}function x(a){return j(a,23,4)}function q(a,d,c){R(a[e],d,{get:function(){return this[c]}})}function V(a,f,h,j){var d=m(+h);if(d+f>a[g]){throw k(A)}var i=a[t]._b,e=d+a[r],c=i.slice(e,e+f);return j?c:c.reverse()}function K(c,d,j,n,i,l){var e=m(+j);if(e+d>c[g]){throw k(A)}for(var f=c[t]._b,o=e+c[r],h=n(+i),a=0;a<d;a++){f[o+a]=h[l?a:d-a-1]}}if(F.ABV){if(!u(function(){a(1)})||!u(function(){new a(-1)})||u(function(){return new a(),new a(1.5),new a(NaN),'ArrayBuffer'!=a.name})){for(var p,W=(a=function(c){return o(this,a),new i(m(c))})[e]=i[e],v=T(i),w=0;v.length>w;){(p=v[w++]) in a||z(a,p,i[p])}Q||(W.constructor=a)}var l=new c(new a(2)),y=c[e].setInt8;l.setInt8(0,2.147483648E9),l.setInt8(1,2.147483649E9),!l.getInt8(0)&&l.getInt8(1)||H(c[e],{setInt8:function(a,c){y.call(this,a,c<<24>>24)},setUint8:function(a,c){y.call(this,a,c<<24>>24)}},!0)}else {a=function(d){o(this,a,'ArrayBuffer');var c=m(d);this._b=M.call(new Array(c),0),this[g]=c},c=function(f,i,e){o(this,c,'DataView'),o(f,a,'DataView');var h=f[g],d=N(i);if(d<0||d>h){throw k('Wrong offset!')}if(d+(e=void 0===e?h-d:O(e))>h){throw k('Wrong length!')}this[t]=f,this[r]=d,this[g]=e},n&&(q(a,'byteLength','_l'),q(c,'buffer','_b'),q(c,'byteLength','_l'),q(c,'byteOffset','_o')),H(c[e],{getInt8:function(a){return V(this,1,a)[0]<<24>>24},getUint8:function(a){return V(this,1,a)[0]},getInt16:function(c){var a=V(this,2,c,arguments[1]);return (a[1]<<8|a[0])<<16>>16},getUint16:function(c){var a=V(this,2,c,arguments[1]);return a[1]<<8|a[0]},getInt32:function(a){return D(V(this,4,a,arguments[1]))},getUint32:function(a){return D(V(this,4,a,arguments[1]))>>>0},getFloat32:function(a){return U(V(this,4,a,arguments[1]),23,4)},getFloat64:function(a){return U(V(this,8,a,arguments[1]),52,8)},setInt8:function(a,c){K(this,1,a,B,c)},setUint8:function(a,c){K(this,1,a,B,c)},setInt16:function(a,c){K(this,2,a,L,c,arguments[2])},setUint16:function(a,c){K(this,2,a,L,c,arguments[2])},setInt32:function(a,c){K(this,4,a,Y,c,arguments[2])},setUint32:function(a,c){K(this,4,a,Y,c,arguments[2])},setFloat32:function(a,c){K(this,4,a,x,c,arguments[2])},setFloat64:function(a,c){K(this,8,a,C,c,arguments[2])}})}E(a,'ArrayBuffer'),E(c,'DataView'),z(c[e],F.VIEW,!0),G.ArrayBuffer=a,G.DataView=c},function(c,f,a){var b=a(5),d=a(26),e=a(7)('species');c.exports=function(i,j){var g,h=b(i).constructor;return void 0===h||void 0==(g=b(h)[e])?j:d(g)}},function(a,d,b){var c=b(5);a.exports=function(){var f=c(this),e='';return f.global&&(e+='g'),f.ignoreCase&&(e+='i'),f.multiline&&(e+='m'),f.unicode&&(e+='u'),f.sticky&&(e+='y'),e}},function(c,f,a){var e=a(14),b=a(34),d=a(12);c.exports=function(m){for(var h=e(this),g=d(h.length),j=arguments.length,i=b(j>1?arguments[1]:void 0,g),k=j>2?arguments[2]:void 0,l=void 0===k?g:b(k,g);l>i;){h[i++]=m}return h}},function(b,f,a){var e=a(65),c=a(7)('iterator'),d=a(53);b.exports=a(37).getIteratorMethod=function(g){if(void 0!=g){return g[c]||g['@@iterator']||d[e(g)]}}},function(b,f,a){var e=a(53),c=a(7)('iterator'),d=Array.prototype;b.exports=function(g){return void 0!==g&&(e.Array===g||d[c]===g)}},function(a,d,b){var c=b(7)('match');a.exports=function(f){var e=/./;try{'/./'[f](e)}catch(g){try{return e[c]=!1,!'/./'[f](e)}catch(h){}}return !0}},function(b,f,a){var e=a(4),c=a(25),d=a(7)('match');b.exports=function(g){var h;return e(g)&&(void 0!==(h=g[d])?!!h:'RegExp'==c(g))}},function(b,e,a){var d=a(81),c=a(28);b.exports=function(f,h,g){if(d(h)){throw TypeError('String#'+g+" doesn't accept regex!")}return String(c(f))}},function(j,n,a){var g=a(43),d=a(0),l=a(15),h=a(18),f=a(53),m=a(132),i=a(44),k=a(31),b=a(7)('iterator'),c=!([].keys&&'next' in [].keys()),e=function(){return this};j.exports=function(C,s,z,G,q,F,D){m(z,s,G);var t,w,r,v=function(b){if(!c&&b in o){return o[b]}switch(b){case 'keys':case 'values':return function(){return new z(this,b)};}return function(){return new z(this,b)}},A=s+' Iterator',y='values'==q,x=!1,o=C.prototype,u=o[b]||o['@@iterator']||q&&o[q],p=u||v(q),E=q?y?v('entries'):p:void 0,B='Array'==s&&o.entries||u;if(B&&(r=k(B.call(new C())))!==Object.prototype&&r.next&&(i(r,A,!0),g||'function'==typeof r[b]||h(r,b,e)),y&&u&&'values'!==u.name&&(x=!0,p=function(){return u.call(this)}),g&&!D||!c&&!x&&o[b]||h(o,b,p),f[s]=p,f[A]=e,q){if(t={values:y?p:v('values'),keys:F?p:v('keys'),entries:E},D){for(w in t){w in o||l(o,w,t[w])}}else {d(d.P+d.F*(c||x),s,t)}}return t}},function(b,c){var a=Math.expm1;b.exports=!a||a(10)>22025.465794806718||a(10)<22025.465794806718||-2.0E-17!=a(-2.0E-17)?function(a){return 0==(a=+a)?a:a>-1.0E-6&&a<1.0E-6?a+a*a/2:Math.exp(a)-1}:a},function(a,b){a.exports=Math.sign||function(c){return 0==(c=+c)||c!=c?c:c<0?-1:1}},function(c,e,b){var d=b(4),a=b(88).set;c.exports=function(h,j,i){var f,g=j.constructor;return g!==i&&'function'==typeof g&&(f=g.prototype)!==i.prototype&&d(f)&&a&&a(h,f),h}},function(a,b){a.exports='\t\n\v\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff'},function(c,f,a){var e=a(4),d=a(5),b=function(g,b){if(d(g),!e(b)&&null!==b){throw TypeError(b+": can't set as prototype!")}};c.exports={set:Object.setPrototypeOf||('__proto__' in {}?function(e,d,g){try{(g=a(27)(Function.call,a(23).f(Object.prototype,'__proto__').set,2))(e,[]),d=!(e instanceof Array)}catch(h){d=!0}return function(h,i){return b(h,i),d?h.__proto__=i:g(h,i),h}}({},!1):void 0),check:b}},function(b,d,c){var a=c(6).document;b.exports=a&&a.documentElement},function(a,d,b){var c=b(25);a.exports=Array.isArray||function(e){return 'Array'==c(e)}},function(a,b){a.exports='constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf'.split(',')},function(c,e,a){var b=a(94)('keys'),d=a(35);c.exports=function(f){return b[f]||(b[f]=d(f))}},function(b,f,a){var e=a(21),c=a(12),d=a(34);b.exports=function(g){return function(n,k,m){var l,i=e(n),j=c(i.length),h=d(m,j);if(g&&k!=k){for(;j>h;){if((l=i[h++])!=l){return !0}}}else {for(;j>h;h++){if((g||h in i)&&i[h]===k){return g||h||0}}}return !g&&-1}}},function(c,e,d){var b=d(6),a=b['__core-js_shared__']||(b['__core-js_shared__']={});c.exports=function(b){return a[b]||(a[b]={})}},function(d,f,b){var c=b(4),a=b(6).document,e=c(a)&&c(a.createElement);d.exports=function(c){return e?a.createElement(c):{}}},function(i,b,a){Object.defineProperty(b,'__esModule',{value:!0}),b.ExtensionRequest=void 0;var d=function(){function e(f,e){for(var d=0;d<e.length;d++){var c=e[d];c.enumerable=c.enumerable||!1,c.configurable=!0,'value' in c&&(c.writable=!0),Object.defineProperty(f,c.key,c)}}return function(c,d,f){return d&&e(c.prototype,d),f&&e(c,f),c}}(),c=a(2),g=a(1),e=a(8),f=a(10);var h=function(h){function t(f){var g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,j=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;!function(c,d){if(!(c instanceof d)){throw new TypeError('Cannot call a class as a function')}}(this,t);var d=function(d,c){if(!d){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !c||'object'!=typeof c&&'function'!=typeof c?d:c}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,c.Requests.CallExtension));return d._targetController=1,d._extCmd=f,d._params=g,d._room=j,null==d._params&&(d._params=new e.SFSObject()),Object.seal(d),d}return function(d,c){if('function'!=typeof c&&null!==c){throw new TypeError('Super expression must either be null or a function, not '+typeof c)}d.prototype=Object.create(c&&c.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),c&&(Object.setPrototypeOf?Object.setPrototypeOf(d,c):d.__proto__=c)}(t,c.BaseRequest),d(t,null,[{key:'KEY_CMD',get:function(){return 'c'}},{key:'KEY_PARAMS',get:function(){return 'p'}},{key:'KEY_ROOM',get:function(){return 'r'}}]),d(t,[{key:'validate',value:function(d){var c=[];if(null!=this._extCmd&&0!==this._extCmd.length||c.push('Missing extension command'),null==this._params||this._params instanceof e.SFSObject||c.push('Custom parameters must be set in a SFSObject class instance'),null==this._room||this._room instanceof f.SFSRoom||c.push('Room must be an instance of SFSRoom class'),c.length>0){throw new g.SFSValidationError('ExtensionRequest Error',c)}}},{key:'execute',value:function(c){this._reqObj.putUtfString(t.KEY_CMD,this._extCmd),this._reqObj.putInt(t.KEY_ROOM,null==this._room?-1:this._room.id),this._reqObj.putSFSObject(t.KEY_PARAMS,this._params)}}]),t}();b.ExtensionRequest=h},function(i,b,a){Object.defineProperty(b,'__esModule',{value:!0}),b.SetBuddyVariablesRequest=void 0;var d=function(){function e(f,e){for(var d=0;d<e.length;d++){var c=e[d];c.enumerable=c.enumerable||!1,c.configurable=!0,'value' in c&&(c.writable=!0),Object.defineProperty(f,c.key,c)}}return function(c,d,f){return d&&e(c.prototype,d),f&&e(c,f),c}}(),c=a(2),f=a(1),g=a(8),e=a(46);var h=function(h){function t(e){!function(c,d){if(!(c instanceof d)){throw new TypeError('Cannot call a class as a function')}}(this,t);var d=function(d,c){if(!d){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !c||'object'!=typeof c&&'function'!=typeof c?d:c}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,c.Requests.SetBuddyVariables));return d._buddyVariables=e,Object.seal(d),d}return function(d,c){if('function'!=typeof c&&null!==c){throw new TypeError('Super expression must either be null or a function, not '+typeof c)}d.prototype=Object.create(c&&c.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),c&&(Object.setPrototypeOf?Object.setPrototypeOf(d,c):d.__proto__=c)}(t,c.BaseRequest),d(t,null,[{key:'KEY_BUDDY_NAME',get:function(){return 'bn'}},{key:'KEY_BUDDY_VARS',get:function(){return 'bv'}}]),d(t,[{key:'validate',value:function(d){var c=[];if(d.buddyManager.isInited||c.push('Buddy List not yet initialized; please send an InitBuddyRequest first'),!1===d.buddyManager.getMyOnlineState()&&c.push("Can't set Buddy Variables while you are offline in the Buddy List system"),null==this._buddyVariables?c.push('No Buddy Variables specified'):this._buddyVariables instanceof Array?0===this._buddyVariables.length?c.push('No Buddy Variables specified'):this._buddyVariables.every(function(c){return c instanceof e.SFSBuddyVariable})||c.push('Buddy Variables must be passed as instances of SFSBuddyVariable class'):c.push('Buddy Variables must be passed in an array'),c.length>0){throw new f.SFSValidationError('SetBuddyVariablesRequest Error',c)}}},{key:'execute',value:function(m){var j=new g.SFSArray(),c=!0,f=!1,k=void 0;try{for(var e,d=this._buddyVariables[Symbol.iterator]();!(c=(e=d.next()).done);c=!0){var l=e.value;j.addSFSArray(l.toSFSArray())}}catch(n){f=!0,k=n}finally{try{!c&&d['return']&&d['return']()}finally{if(f){throw k}}}this._reqObj.putSFSArray(t.KEY_BUDDY_VARS,j)}}]),t}();b.SetBuddyVariablesRequest=h},function(g,a,c){Object.defineProperty(a,'__esModule',{value:!0}),a.GoOnlineRequest=void 0;var d=function(){function e(f,e){for(var d=0;d<e.length;d++){var b=e[d];b.enumerable=b.enumerable||!1,b.configurable=!0,'value' in b&&(b.writable=!0),Object.defineProperty(f,b.key,b)}}return function(b,d,f){return d&&e(b.prototype,d),f&&e(b,f),b}}(),b=c(2),e=c(1);var f=function(f){function t(e){!function(b,d){if(!(b instanceof d)){throw new TypeError('Cannot call a class as a function')}}(this,t);var d=function(d,b){if(!d){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !b||'object'!=typeof b&&'function'!=typeof b?d:b}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,b.Requests.GoOnline));return d._online=e,Object.seal(d),d}return function(d,b){if('function'!=typeof b&&null!==b){throw new TypeError('Super expression must either be null or a function, not '+typeof b)}d.prototype=Object.create(b&&b.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(d,b):d.__proto__=b)}(t,b.BaseRequest),d(t,null,[{key:'KEY_ONLINE',get:function(){return 'o'}},{key:'KEY_BUDDY_NAME',get:function(){return 'bn'}},{key:'KEY_BUDDY_ID',get:function(){return 'bi'}}]),d(t,[{key:'validate',value:function(d){var b=[];if(d.buddyManager.isInited||b.push('Buddy List not yet initialized; please send an InitBuddyRequest first'),b.length>0){throw new e.SFSValidationError('GoOnlineRequest Error',b)}}},{key:'execute',value:function(b){b.buddyManager._setMyOnlineState(this._online),this._reqObj.putBool(t.KEY_ONLINE,this._online)}}]),t}();a.GoOnlineRequest=f},function(g,a,c){Object.defineProperty(a,'__esModule',{value:!0}),a.BlockBuddyRequest=void 0;var d=function(){function e(f,e){for(var d=0;d<e.length;d++){var b=e[d];b.enumerable=b.enumerable||!1,b.configurable=!0,'value' in b&&(b.writable=!0),Object.defineProperty(f,b.key,b)}}return function(b,d,f){return d&&e(b.prototype,d),f&&e(b,f),b}}(),b=c(2),e=c(1);var f=function(f){function t(e,h){!function(b,d){if(!(b instanceof d)){throw new TypeError('Cannot call a class as a function')}}(this,t);var d=function(d,b){if(!d){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !b||'object'!=typeof b&&'function'!=typeof b?d:b}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,b.Requests.BlockBuddy));return d._name=e,d._blocked=h,Object.seal(d),d}return function(d,b){if('function'!=typeof b&&null!==b){throw new TypeError('Super expression must either be null or a function, not '+typeof b)}d.prototype=Object.create(b&&b.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(d,b):d.__proto__=b)}(t,b.BaseRequest),d(t,null,[{key:'KEY_BUDDY_NAME',get:function(){return 'bn'}},{key:'KEY_BUDDY_BLOCK_STATE',get:function(){return 'bs'}},{key:'KEY_BUDDY',get:function(){return 'bd'}}]),d(t,[{key:'validate',value:function(d){var b=[];if(d.buddyManager.isInited||b.push('Buddy List not yet initialized; please send an InitBuddyRequest first'),!1===d.buddyManager.getMyOnlineState()&&b.push("Can't block a buddy while you are offline in the Buddy List system"),null==this._name||this._name.length<1){b.push('Invalid buddy name (null or empty string)')}else {var h=d.buddyManager.getBuddyByName(this._name);null==h?b.push("Can't block buddy '"+this._name+"' because it isn't in your list"):h.isBlocked==this._blocked&&b.push("Block flag is already in the requested '"+this._blocked+"' state for buddy '"+this._name+"'")}if(b.length>0){throw new e.SFSValidationError('BlockBuddyRequest Error',b)}}},{key:'execute',value:function(b){this._reqObj.putUtfString(t.KEY_BUDDY_NAME,this._name),this._reqObj.putBool(t.KEY_BUDDY_BLOCK_STATE,this._blocked)}}]),t}();a.BlockBuddyRequest=f},function(g,a,c){Object.defineProperty(a,'__esModule',{value:!0}),a.RemoveBuddyRequest=void 0;var d=function(){function e(f,e){for(var d=0;d<e.length;d++){var b=e[d];b.enumerable=b.enumerable||!1,b.configurable=!0,'value' in b&&(b.writable=!0),Object.defineProperty(f,b.key,b)}}return function(b,d,f){return d&&e(b.prototype,d),f&&e(b,f),b}}(),b=c(2),e=c(1);var f=function(f){function t(e){!function(b,d){if(!(b instanceof d)){throw new TypeError('Cannot call a class as a function')}}(this,t);var d=function(d,b){if(!d){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !b||'object'!=typeof b&&'function'!=typeof b?d:b}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,b.Requests.RemoveBuddy));return d._name=e,Object.seal(d),d}return function(d,b){if('function'!=typeof b&&null!==b){throw new TypeError('Super expression must either be null or a function, not '+typeof b)}d.prototype=Object.create(b&&b.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(d,b):d.__proto__=b)}(t,b.BaseRequest),d(t,null,[{key:'KEY_BUDDY_NAME',get:function(){return 'bn'}}]),d(t,[{key:'validate',value:function(d){var b=[];if(d.buddyManager.isInited||b.push('Buddy List not yet initialized; please send an InitBuddyRequest first'),!1===d.buddyManager.getMyOnlineState()&&b.push("Can't remove a buddy while you are offline in the Buddy List system"),null==this._name||this._name.length<1?b.push('Invalid buddy name (null or empty string)'):d.buddyManager.containsBuddy(this._name)||b.push("Can't remove buddy '"+this._name+"' because it isn't in your list"),b.length>0){throw new e.SFSValidationError('RemoveBuddyRequest Error',b)}}},{key:'execute',value:function(b){this._reqObj.putUtfString(t.KEY_BUDDY_NAME,this._name)}}]),t}();a.RemoveBuddyRequest=f},function(g,a,c){Object.defineProperty(a,'__esModule',{value:!0}),a.AddBuddyRequest=void 0;var d=function(){function e(f,e){for(var d=0;d<e.length;d++){var b=e[d];b.enumerable=b.enumerable||!1,b.configurable=!0,'value' in b&&(b.writable=!0),Object.defineProperty(f,b.key,b)}}return function(b,d,f){return d&&e(b.prototype,d),f&&e(b,f),b}}(),b=c(2),e=c(1);var f=function(f){function t(e){!function(b,d){if(!(b instanceof d)){throw new TypeError('Cannot call a class as a function')}}(this,t);var d=function(d,b){if(!d){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !b||'object'!=typeof b&&'function'!=typeof b?d:b}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,b.Requests.AddBuddy));return d._name=e,Object.seal(d),d}return function(d,b){if('function'!=typeof b&&null!==b){throw new TypeError('Super expression must either be null or a function, not '+typeof b)}d.prototype=Object.create(b&&b.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(d,b):d.__proto__=b)}(t,b.BaseRequest),d(t,null,[{key:'KEY_BUDDY_NAME',get:function(){return 'bn'}}]),d(t,[{key:'validate',value:function(d){var b=[];d.buddyManager.isInited||b.push('Buddy List not yet initialized; please send an InitBuddyRequest first'),(null==this._name||this._name.length<1)&&b.push('Invalid buddy name (null or empty string)'),!1===d.buddyManager.getMyOnlineState()&&b.push("Can't add a buddy while you are offline in the Buddy List system");var h=d.buddyManager.getBuddyByName(this._name);if(null==h||h.isTemp||b.push("Can't add buddy '"+this._name+"' because it is already in your list"),b.length>0){throw new e.SFSValidationError('AddBuddyRequest Error',b)}}},{key:'execute',value:function(b){this._reqObj.putUtfString(t.KEY_BUDDY_NAME,this._name)}}]),t}();a.AddBuddyRequest=f},function(g,a,c){Object.defineProperty(a,'__esModule',{value:!0}),a.InitBuddyListRequest=void 0;var d=function(){function e(f,e){for(var d=0;d<e.length;d++){var b=e[d];b.enumerable=b.enumerable||!1,b.configurable=!0,'value' in b&&(b.writable=!0),Object.defineProperty(f,b.key,b)}}return function(b,d,f){return d&&e(b.prototype,d),f&&e(b,f),b}}(),b=c(2),e=c(1);var f=function(f){function t(){!function(b,d){if(!(b instanceof d)){throw new TypeError('Cannot call a class as a function')}}(this,t);var d=function(d,b){if(!d){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !b||'object'!=typeof b&&'function'!=typeof b?d:b}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,b.Requests.InitBuddyList));return Object.seal(d),d}return function(d,b){if('function'!=typeof b&&null!==b){throw new TypeError('Super expression must either be null or a function, not '+typeof b)}d.prototype=Object.create(b&&b.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(d,b):d.__proto__=b)}(t,b.BaseRequest),d(t,null,[{key:'KEY_BLIST',get:function(){return 'bl'}},{key:'KEY_BUDDY_STATES',get:function(){return 'bs'}},{key:'KEY_MY_VARS',get:function(){return 'mv'}}]),d(t,[{key:'validate',value:function(d){var b=[];if(d.buddyManager.isInited&&b.push('Buddy List is already initialized'),b.length>0){throw new e.SFSValidationError('InitBuddyListRequest Error',b)}}},{key:'execute',value:function(b){}}]),t}();a.InitBuddyListRequest=f},function(i,b,a){Object.defineProperty(b,'__esModule',{value:!0}),b.SetUserPositionRequest=void 0;var d=function(){function e(f,e){for(var d=0;d<e.length;d++){var c=e[d];c.enumerable=c.enumerable||!1,c.configurable=!0,'value' in c&&(c.writable=!0),Object.defineProperty(f,c.key,c)}}return function(c,d,f){return d&&e(c.prototype,d),f&&e(c,f),c}}(),c=a(2),f=a(1),g=a(8),e=a(10);var h=function(h){function t(e){var f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;!function(c,d){if(!(c instanceof d)){throw new TypeError('Cannot call a class as a function')}}(this,t);var d=function(d,c){if(!d){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !c||'object'!=typeof c&&'function'!=typeof c?d:c}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,c.Requests.SetUserPosition));return d._pos=e,d._room=f,Object.seal(d),d}return function(d,c){if('function'!=typeof c&&null!==c){throw new TypeError('Super expression must either be null or a function, not '+typeof c)}d.prototype=Object.create(c&&c.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),c&&(Object.setPrototypeOf?Object.setPrototypeOf(d,c):d.__proto__=c)}(t,c.BaseRequest),d(t,null,[{key:'KEY_ROOM',get:function(){return 'r'}},{key:'KEY_VEC3D',get:function(){return 'v'}},{key:'KEY_PLUS_USER_LIST',get:function(){return 'p'}},{key:'KEY_MINUS_USER_LIST',get:function(){return 'm'}},{key:'KEY_PLUS_ITEM_LIST',get:function(){return 'q'}},{key:'KEY_MINUS_ITEM_LIST',get:function(){return 'n'}}]),d(t,[{key:'validate',value:function(d){var c=[];if(null!=this._pos&&this._pos instanceof g.Vec3D||c.push('Position must be an instance of Vec3D class'),null==this._room&&(this._room=d.lastJoinedRoom),null==this._room&&c.push('You are not joined in any room'),this._room instanceof e.MMORoom||c.push('Target room must be an instance of MMORoom class'),c.length>0){throw new f.SFSValidationError('SetUserPosition Error',c)}}},{key:'execute',value:function(c){this._reqObj.putInt(t.KEY_ROOM,this._room.id),this._pos.isFloat?this._reqObj.putFloatArray(t.KEY_VEC3D,this._pos.toArray()):this._reqObj.putIntArray(t.KEY_VEC3D,this._pos.toArray())}}]),t}();b.SetUserPositionRequest=h},function(i,b,a){Object.defineProperty(b,'__esModule',{value:!0}),b.FindUsersRequest=void 0;var d=function(){function e(f,e){for(var d=0;d<e.length;d++){var c=e[d];c.enumerable=c.enumerable||!1,c.configurable=!0,'value' in c&&(c.writable=!0),Object.defineProperty(f,c.key,c)}}return function(c,d,f){return d&&e(c.prototype,d),f&&e(c,f),c}}(),c=a(2),f=a(1),g=a(10),e=a(45);var h=function(h){function t(e){var f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,g=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;!function(c,d){if(!(c instanceof d)){throw new TypeError('Cannot call a class as a function')}}(this,t);var d=function(d,c){if(!d){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !c||'object'!=typeof c&&'function'!=typeof c?d:c}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,c.Requests.FindUsers));return d._matchExpr=e,d._target=f,d._limit=g,Object.seal(d),d}return function(d,c){if('function'!=typeof c&&null!==c){throw new TypeError('Super expression must either be null or a function, not '+typeof c)}d.prototype=Object.create(c&&c.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),c&&(Object.setPrototypeOf?Object.setPrototypeOf(d,c):d.__proto__=c)}(t,c.BaseRequest),d(t,null,[{key:'KEY_EXPRESSION',get:function(){return 'e'}},{key:'KEY_GROUP',get:function(){return 'g'}},{key:'KEY_ROOM',get:function(){return 'r'}},{key:'KEY_LIMIT',get:function(){return 'l'}},{key:'KEY_FILTERED_USERS',get:function(){return 'fu'}}]),d(t,[{key:'validate',value:function(d){var c=[];if(null==this._matchExpr&&c.push('Missing match expression'),null==this._matchExpr||this._matchExpr instanceof e.MatchExpression||c.push('Match expression must be passed as an instance of MatchExpression class'),c.length>0){throw new f.SFSValidationError('FindUsersRequest Error',c)}}},{key:'execute',value:function(c){this._reqObj.putSFSArray(t.KEY_EXPRESSION,this._matchExpr.toSFSArray()),null!=this._target&&(this._target instanceof g.SFSRoom?this._reqObj.putInt(t.KEY_ROOM,this._target.id):'string'==typeof this._target?this._reqObj.putUtfString(t.KEY_GROUP,this._target):this._logger.warn('Unsupported target type for FindUsersRequest: '+this._target)),this._limit>0&&this._reqObj.putShort(t.KEY_LIMIT,this._limit)}}]),t}();b.FindUsersRequest=h},function(h,b,a){Object.defineProperty(b,'__esModule',{value:!0}),b.FindRoomsRequest=void 0;var d=function(){function e(f,e){for(var d=0;d<e.length;d++){var c=e[d];c.enumerable=c.enumerable||!1,c.configurable=!0,'value' in c&&(c.writable=!0),Object.defineProperty(f,c.key,c)}}return function(c,d,f){return d&&e(c.prototype,d),f&&e(c,f),c}}(),c=a(2),f=a(1),g=a(45);var e=function(e){function t(f){var g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;!function(c,d){if(!(c instanceof d)){throw new TypeError('Cannot call a class as a function')}}(this,t);var d=function(d,c){if(!d){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !c||'object'!=typeof c&&'function'!=typeof c?d:c}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,c.Requests.FindRooms));return d._matchExpr=f,d._groupId=g,d._limit=i,Object.seal(d),d}return function(d,c){if('function'!=typeof c&&null!==c){throw new TypeError('Super expression must either be null or a function, not '+typeof c)}d.prototype=Object.create(c&&c.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),c&&(Object.setPrototypeOf?Object.setPrototypeOf(d,c):d.__proto__=c)}(t,c.BaseRequest),d(t,null,[{key:'KEY_EXPRESSION',get:function(){return 'e'}},{key:'KEY_GROUP',get:function(){return 'g'}},{key:'KEY_LIMIT',get:function(){return 'l'}},{key:'KEY_FILTERED_ROOMS',get:function(){return 'fr'}}]),d(t,[{key:'validate',value:function(d){var c=[];if(null==this._matchExpr&&c.push('Missing match expression'),null==this._matchExpr||this._matchExpr instanceof g.MatchExpression||c.push('Match expression must be passed as an instance of MatchExpression class'),c.length>0){throw new f.SFSValidationError('FindRoomsRequest Error',c)}}},{key:'execute',value:function(c){this._reqObj.putSFSArray(t.KEY_EXPRESSION,this._matchExpr.toSFSArray()),null!=this._groupId&&this._reqObj.putUtfString(t.KEY_GROUP,this._groupId),this._limit>0&&this._reqObj.putShort(t.KEY_LIMIT,this._limit)}}]),t}();b.FindRoomsRequest=e},function(h,b,a){Object.defineProperty(b,'__esModule',{value:!0}),b.PlayerToSpectatorRequest=void 0;var d=function(){function e(f,e){for(var d=0;d<e.length;d++){var c=e[d];c.enumerable=c.enumerable||!1,c.configurable=!0,'value' in c&&(c.writable=!0),Object.defineProperty(f,c.key,c)}}return function(c,d,f){return d&&e(c.prototype,d),f&&e(c,f),c}}(),c=a(2),f=a(1),g=a(10);var e=function(e){function t(){var f=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;!function(c,d){if(!(c instanceof d)){throw new TypeError('Cannot call a class as a function')}}(this,t);var d=function(d,c){if(!d){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !c||'object'!=typeof c&&'function'!=typeof c?d:c}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,c.Requests.PlayerToSpectator));return d._room=f,Object.seal(d),d}return function(d,c){if('function'!=typeof c&&null!==c){throw new TypeError('Super expression must either be null or a function, not '+typeof c)}d.prototype=Object.create(c&&c.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),c&&(Object.setPrototypeOf?Object.setPrototypeOf(d,c):d.__proto__=c)}(t,c.BaseRequest),d(t,null,[{key:'KEY_ROOM_ID',get:function(){return 'r'}},{key:'KEY_USER_ID',get:function(){return 'u'}}]),d(t,[{key:'validate',value:function(d){var c=[];if(d.getJoinedRooms().length<1&&c.push('You are not joined in any Room'),null==this._room||this._room instanceof g.SFSRoom||c.push('Target Room must be an instance of SFSRoom class'),c.length>0){throw new f.SFSValidationError('PlayerToSpectatorRequest Error',c)}}},{key:'execute',value:function(c){null==this._room&&(this._room=c.lastJoinedRoom),this._reqObj.putInt(t.KEY_ROOM_ID,this._room.id)}}]),t}();b.PlayerToSpectatorRequest=e},function(h,b,a){Object.defineProperty(b,'__esModule',{value:!0}),b.SpectatorToPlayerRequest=void 0;var d=function(){function e(f,e){for(var d=0;d<e.length;d++){var c=e[d];c.enumerable=c.enumerable||!1,c.configurable=!0,'value' in c&&(c.writable=!0),Object.defineProperty(f,c.key,c)}}return function(c,d,f){return d&&e(c.prototype,d),f&&e(c,f),c}}(),c=a(2),f=a(1),g=a(10);var e=function(e){function t(){var f=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;!function(c,d){if(!(c instanceof d)){throw new TypeError('Cannot call a class as a function')}}(this,t);var d=function(d,c){if(!d){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !c||'object'!=typeof c&&'function'!=typeof c?d:c}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,c.Requests.SpectatorToPlayer));return d._room=f,Object.seal(d),d}return function(d,c){if('function'!=typeof c&&null!==c){throw new TypeError('Super expression must either be null or a function, not '+typeof c)}d.prototype=Object.create(c&&c.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),c&&(Object.setPrototypeOf?Object.setPrototypeOf(d,c):d.__proto__=c)}(t,c.BaseRequest),d(t,null,[{key:'KEY_ROOM_ID',get:function(){return 'r'}},{key:'KEY_USER_ID',get:function(){return 'u'}},{key:'KEY_PLAYER_ID',get:function(){return 'p'}}]),d(t,[{key:'validate',value:function(d){var c=[];if(d.getJoinedRooms().length<1&&c.push('You are not joined in any Room'),null==this._room||this._room instanceof g.SFSRoom||c.push('Target Room must be an instance of SFSRoom class'),c.length>0){throw new f.SFSValidationError('SpectatorToPlayerRequest Error',c)}}},{key:'execute',value:function(c){null==this._room&&(this._room=c.lastJoinedRoom),this._reqObj.putInt(t.KEY_ROOM_ID,this._room.id)}}]),t}();b.SpectatorToPlayerRequest=e},function(g,a,c){Object.defineProperty(a,'__esModule',{value:!0}),a.UnsubscribeRoomGroupRequest=void 0;var d=function(){function e(f,e){for(var d=0;d<e.length;d++){var b=e[d];b.enumerable=b.enumerable||!1,b.configurable=!0,'value' in b&&(b.writable=!0),Object.defineProperty(f,b.key,b)}}return function(b,d,f){return d&&e(b.prototype,d),f&&e(b,f),b}}(),b=c(2),e=c(1);var f=function(f){function t(e){!function(b,d){if(!(b instanceof d)){throw new TypeError('Cannot call a class as a function')}}(this,t);var d=function(d,b){if(!d){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !b||'object'!=typeof b&&'function'!=typeof b?d:b}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,b.Requests.UnsubscribeRoomGroup));return d._groupId=e,Object.seal(d),d}return function(d,b){if('function'!=typeof b&&null!==b){throw new TypeError('Super expression must either be null or a function, not '+typeof b)}d.prototype=Object.create(b&&b.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(d,b):d.__proto__=b)}(t,b.BaseRequest),d(t,null,[{key:'KEY_GROUP_ID',get:function(){return 'g'}}]),d(t,[{key:'validate',value:function(d){var b=[];if(null!=this._groupId&&0!==this._groupId.length||b.push('Invalid group id passed; must be a string with at least one character'),b.length>0){throw new e.SFSValidationError('UnsubscribeGroupRequest Error',b)}}},{key:'execute',value:function(b){this._reqObj.putUtfString(t.KEY_GROUP_ID,this._groupId)}}]),t}();a.UnsubscribeRoomGroupRequest=f},function(g,a,c){Object.defineProperty(a,'__esModule',{value:!0}),a.SubscribeRoomGroupRequest=void 0;var d=function(){function e(f,e){for(var d=0;d<e.length;d++){var b=e[d];b.enumerable=b.enumerable||!1,b.configurable=!0,'value' in b&&(b.writable=!0),Object.defineProperty(f,b.key,b)}}return function(b,d,f){return d&&e(b.prototype,d),f&&e(b,f),b}}(),b=c(2),e=c(1);var f=function(f){function t(e){!function(b,d){if(!(b instanceof d)){throw new TypeError('Cannot call a class as a function')}}(this,t);var d=function(d,b){if(!d){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !b||'object'!=typeof b&&'function'!=typeof b?d:b}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,b.Requests.SubscribeRoomGroup));return d._groupId=e,Object.seal(d),d}return function(d,b){if('function'!=typeof b&&null!==b){throw new TypeError('Super expression must either be null or a function, not '+typeof b)}d.prototype=Object.create(b&&b.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(d,b):d.__proto__=b)}(t,b.BaseRequest),d(t,null,[{key:'KEY_GROUP_ID',get:function(){return 'g'}},{key:'KEY_ROOM_LIST',get:function(){return 'rl'}}]),d(t,[{key:'validate',value:function(d){var b=[];if(null!=this._groupId&&0!==this._groupId.length||b.push('Invalid group id passed; must be a string with at least one character'),b.length>0){throw new e.SFSValidationError('SubscribeGroupRequest Error',b)}}},{key:'execute',value:function(b){this._reqObj.putUtfString(t.KEY_GROUP_ID,this._groupId)}}]),t}();a.SubscribeRoomGroupRequest=f},function(i,b,a){Object.defineProperty(b,'__esModule',{value:!0}),b.SetUserVariablesRequest=void 0;var d=function(){function e(f,e){for(var d=0;d<e.length;d++){var c=e[d];c.enumerable=c.enumerable||!1,c.configurable=!0,'value' in c&&(c.writable=!0),Object.defineProperty(f,c.key,c)}}return function(c,d,f){return d&&e(c.prototype,d),f&&e(c,f),c}}(),c=a(2),f=a(1),g=a(8),e=a(58);var h=function(h){function t(e){!function(c,d){if(!(c instanceof d)){throw new TypeError('Cannot call a class as a function')}}(this,t);var d=function(d,c){if(!d){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !c||'object'!=typeof c&&'function'!=typeof c?d:c}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,c.Requests.SetUserVariables));return d._userVariables=e,Object.seal(d),d}return function(d,c){if('function'!=typeof c&&null!==c){throw new TypeError('Super expression must either be null or a function, not '+typeof c)}d.prototype=Object.create(c&&c.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),c&&(Object.setPrototypeOf?Object.setPrototypeOf(d,c):d.__proto__=c)}(t,c.BaseRequest),d(t,null,[{key:'KEY_USER',get:function(){return 'u'}},{key:'KEY_VAR_LIST',get:function(){return 'vl'}}]),d(t,[{key:'validate',value:function(d){var c=[];if(null==this._userVariables?c.push('No User Variables specified'):this._userVariables instanceof Array?0===this._userVariables.length?c.push('No User Variables specified'):this._userVariables.every(function(c){return c instanceof e.SFSUserVariable})||c.push('User Variables must be passed as instances of SFSUserVariable class'):c.push('User Variables must be passed in an array'),c.length>0){throw new f.SFSValidationError('SetUserVariablesRequest Error',c)}}},{key:'execute',value:function(m){var j=new g.SFSArray(),c=!0,f=!1,k=void 0;try{for(var e,d=this._userVariables[Symbol.iterator]();!(c=(e=d.next()).done);c=!0){var l=e.value;j.addSFSArray(l.toSFSArray())}}catch(n){f=!0,k=n}finally{try{!c&&d['return']&&d['return']()}finally{if(f){throw k}}}this._reqObj.putSFSArray(t.KEY_VAR_LIST,j)}}]),t}();b.SetUserVariablesRequest=h},function(j,b,a){Object.defineProperty(b,'__esModule',{value:!0}),b.SetRoomVariablesRequest=void 0;var d=function(){function e(f,e){for(var d=0;d<e.length;d++){var c=e[d];c.enumerable=c.enumerable||!1,c.configurable=!0,'value' in c&&(c.writable=!0),Object.defineProperty(f,c.key,c)}}return function(c,d,f){return d&&e(c.prototype,d),f&&e(c,f),c}}(),c=a(2),g=a(1),h=a(8),e=a(10),i=a(49);var f=function(f){function t(e){var g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;!function(c,d){if(!(c instanceof d)){throw new TypeError('Cannot call a class as a function')}}(this,t);var d=function(d,c){if(!d){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !c||'object'!=typeof c&&'function'!=typeof c?d:c}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,c.Requests.SetRoomVariables));return d._roomVariables=e,d._room=g,Object.seal(d),d}return function(d,c){if('function'!=typeof c&&null!==c){throw new TypeError('Super expression must either be null or a function, not '+typeof c)}d.prototype=Object.create(c&&c.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),c&&(Object.setPrototypeOf?Object.setPrototypeOf(d,c):d.__proto__=c)}(t,c.BaseRequest),d(t,null,[{key:'KEY_VAR_ROOM',get:function(){return 'r'}},{key:'KEY_VAR_LIST',get:function(){return 'vl'}}]),d(t,[{key:'validate',value:function(d){var c=[];if(null==this._room&&(this._room=d.lastJoinedRoom),null==this._room?c.push('You must be joined in a Room to send a message'):this._room instanceof e.SFSRoom?d.getJoinedRooms().indexOf(this._room)<0&&c.push('You are not joined in the target Room: '+this._room):c.push('Target Room must be an instance of SFSRoom class'),null==this._roomVariables?c.push('No Room Variables specified'):this._roomVariables instanceof Array?0===this._roomVariables.length?c.push('No Room Variables specified'):this._roomVariables.every(function(c){return c instanceof i.SFSRoomVariable})||c.push('Room Variables must be passed as instances of SFSRoomVariable class'):c.push('Room Variables must be passed in an array'),c.length>0){throw new g.SFSValidationError('SetRoomVariablesRequest Error',c)}}},{key:'execute',value:function(m){var i=new h.SFSArray(),c=!0,g=!1,k=void 0;try{for(var e,d=this._roomVariables[Symbol.iterator]();!(c=(e=d.next()).done);c=!0){var l=e.value;i.addSFSArray(l.toSFSArray())}}catch(n){g=!0,k=n}finally{try{!c&&d['return']&&d['return']()}finally{if(g){throw k}}}this._reqObj.putSFSArray(t.KEY_VAR_LIST,i),this._reqObj.putInt(t.KEY_VAR_ROOM,this._room.id)}}]),t}();b.SetRoomVariablesRequest=f},function(h,b,a){Object.defineProperty(b,'__esModule',{value:!0}),b.ChangeRoomCapacityRequest=void 0;var d=function(){function e(f,e){for(var d=0;d<e.length;d++){var c=e[d];c.enumerable=c.enumerable||!1,c.configurable=!0,'value' in c&&(c.writable=!0),Object.defineProperty(f,c.key,c)}}return function(c,d,f){return d&&e(c.prototype,d),f&&e(c,f),c}}(),c=a(2),f=a(1),g=a(10);var e=function(e){function t(f,g,i){!function(c,d){if(!(c instanceof d)){throw new TypeError('Cannot call a class as a function')}}(this,t);var d=function(d,c){if(!d){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !c||'object'!=typeof c&&'function'!=typeof c?d:c}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,c.Requests.ChangeRoomCapacity));return d._room=f,d._newMaxUsers=g,d._newMaxSpect=i,Object.seal(d),d}return function(d,c){if('function'!=typeof c&&null!==c){throw new TypeError('Super expression must either be null or a function, not '+typeof c)}d.prototype=Object.create(c&&c.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),c&&(Object.setPrototypeOf?Object.setPrototypeOf(d,c):d.__proto__=c)}(t,c.BaseRequest),d(t,null,[{key:'KEY_ROOM',get:function(){return 'r'}},{key:'KEY_USER_SIZE',get:function(){return 'u'}},{key:'KEY_SPEC_SIZE',get:function(){return 's'}}]),d(t,[{key:'validate',value:function(d){var c=[];if(this._room instanceof g.SFSRoom||c.push('Room must be an instance of SFSRoom class'),c.length>0){throw new f.SFSValidationError('ChangeRoomCapacityRequest Error',c)}}},{key:'execute',value:function(c){this._reqObj.putInt(t.KEY_ROOM,this._room.id),this._reqObj.putInt(t.KEY_USER_SIZE,this._newMaxUsers),this._reqObj.putInt(t.KEY_SPEC_SIZE,this._newMaxSpect)}}]),t}();b.ChangeRoomCapacityRequest=e},function(h,b,a){Object.defineProperty(b,'__esModule',{value:!0}),b.ChangeRoomPasswordStateRequest=void 0;var d=function(){function e(f,e){for(var d=0;d<e.length;d++){var c=e[d];c.enumerable=c.enumerable||!1,c.configurable=!0,'value' in c&&(c.writable=!0),Object.defineProperty(f,c.key,c)}}return function(c,d,f){return d&&e(c.prototype,d),f&&e(c,f),c}}(),c=a(2),f=a(1),g=a(10);var e=function(e){function t(f,g){!function(c,d){if(!(c instanceof d)){throw new TypeError('Cannot call a class as a function')}}(this,t);var d=function(d,c){if(!d){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !c||'object'!=typeof c&&'function'!=typeof c?d:c}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,c.Requests.ChangeRoomPassword));return d._room=f,d._newPass=g,Object.seal(d),d}return function(d,c){if('function'!=typeof c&&null!==c){throw new TypeError('Super expression must either be null or a function, not '+typeof c)}d.prototype=Object.create(c&&c.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),c&&(Object.setPrototypeOf?Object.setPrototypeOf(d,c):d.__proto__=c)}(t,c.BaseRequest),d(t,null,[{key:'KEY_ROOM',get:function(){return 'r'}},{key:'KEY_PASS',get:function(){return 'p'}}]),d(t,[{key:'validate',value:function(d){var c=[];if(this._room instanceof g.SFSRoom||c.push('Room must be an instance of SFSRoom class'),null==this._newPass&&c.push('New room password must be a non-null string (empty string to remove the password)'),c.length>0){throw new f.SFSValidationError('ChangeRoomPasswordStateRequest Error',c)}}},{key:'execute',value:function(c){this._reqObj.putInt(t.KEY_ROOM,this._room.id),this._reqObj.putUtfString(t.KEY_PASS,this._newPass)}}]),t}();b.ChangeRoomPasswordStateRequest=e},function(h,b,a){Object.defineProperty(b,'__esModule',{value:!0}),b.ChangeRoomNameRequest=void 0;var d=function(){function e(f,e){for(var d=0;d<e.length;d++){var c=e[d];c.enumerable=c.enumerable||!1,c.configurable=!0,'value' in c&&(c.writable=!0),Object.defineProperty(f,c.key,c)}}return function(c,d,f){return d&&e(c.prototype,d),f&&e(c,f),c}}(),c=a(2),f=a(1),g=a(10);var e=function(e){function t(f,g){!function(c,d){if(!(c instanceof d)){throw new TypeError('Cannot call a class as a function')}}(this,t);var d=function(d,c){if(!d){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !c||'object'!=typeof c&&'function'!=typeof c?d:c}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,c.Requests.ChangeRoomName));return d._room=f,d._newName=g,Object.seal(d),d}return function(d,c){if('function'!=typeof c&&null!==c){throw new TypeError('Super expression must either be null or a function, not '+typeof c)}d.prototype=Object.create(c&&c.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),c&&(Object.setPrototypeOf?Object.setPrototypeOf(d,c):d.__proto__=c)}(t,c.BaseRequest),d(t,null,[{key:'KEY_ROOM',get:function(){return 'r'}},{key:'KEY_NAME',get:function(){return 'n'}}]),d(t,[{key:'validate',value:function(d){var c=[];if(this._room instanceof g.SFSRoom||c.push('Room must be an instance of SFSRoom class'),null!=this._newName&&0!==this._newName.length||c.push('New room name must be a non-null and non-empty string'),c.length>0){throw new f.SFSValidationError('ChangeRoomNameRequest Error',c)}}},{key:'execute',value:function(c){this._reqObj.putInt(t.KEY_ROOM,this._room.id),this._reqObj.putUtfString(t.KEY_NAME,this._newName)}}]),t}();b.ChangeRoomNameRequest=e},function(h,b,a){Object.defineProperty(b,'__esModule',{value:!0}),b.JoinRoomRequest=void 0;var d=function(){function e(f,e){for(var d=0;d<e.length;d++){var c=e[d];c.enumerable=c.enumerable||!1,c.configurable=!0,'value' in c&&(c.writable=!0),Object.defineProperty(f,c.key,c)}}return function(c,d,f){return d&&e(c.prototype,d),f&&e(c,f),c}}(),c=a(2),f=a(1),g=a(10);var e=function(e){function t(f){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,k=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,j=arguments.length>3&&void 0!==arguments[3]&&arguments[3];!function(c,d){if(!(c instanceof d)){throw new TypeError('Cannot call a class as a function')}}(this,t);var d=function(d,c){if(!d){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !c||'object'!=typeof c&&'function'!=typeof c?d:c}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,c.Requests.JoinRoom));return 'string'==typeof f?d._rName=f:'number'==typeof f?d._rId=f:f instanceof g.SFSRoom&&(d._rId=f.id,d._rName=f.name),d._password=i,d._roomIdToLeave=k,d._asSpectator=j,Object.seal(d),d}return function(d,c){if('function'!=typeof c&&null!==c){throw new TypeError('Super expression must either be null or a function, not '+typeof c)}d.prototype=Object.create(c&&c.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),c&&(Object.setPrototypeOf?Object.setPrototypeOf(d,c):d.__proto__=c)}(t,c.BaseRequest),d(t,null,[{key:'KEY_ROOM',get:function(){return 'r'}},{key:'KEY_USER_LIST',get:function(){return 'ul'}},{key:'KEY_ROOM_NAME',get:function(){return 'n'}},{key:'KEY_ROOM_ID',get:function(){return 'i'}},{key:'KEY_PASS',get:function(){return 'p'}},{key:'KEY_ROOM_TO_LEAVE',get:function(){return 'rl'}},{key:'KEY_AS_SPECTATOR',get:function(){return 'sp'}}]),d(t,[{key:'validate',value:function(c){if(null==this._rId&&null==this._rName){throw new f.SFSValidationError('JoinRoomRequest Error',['Missing Room id or name, please provide one of the two or an existing SFSRoom object'])}}},{key:'execute',value:function(c){c._isJoining=!0,this._rId>=0?this._reqObj.putInt(t.KEY_ROOM_ID,this._rId):null!=this._rName&&this._reqObj.putUtfString(t.KEY_ROOM_NAME,this._rName),null!=this._password&&this._reqObj.putUtfString(t.KEY_PASS,this._password),null!=this._roomIdToLeave&&this._reqObj.putInt(t.KEY_ROOM_TO_LEAVE,this._roomIdToLeave),this._asSpectator&&this._reqObj.putBool(t.KEY_AS_SPECTATOR,this._asSpectator)}}]),t}();b.JoinRoomRequest=e},function(g,a,c){Object.defineProperty(a,'__esModule',{value:!0}),a.LogoutRequest=void 0;var d=function(){function e(f,e){for(var d=0;d<e.length;d++){var b=e[d];b.enumerable=b.enumerable||!1,b.configurable=!0,'value' in b&&(b.writable=!0),Object.defineProperty(f,b.key,b)}}return function(b,d,f){return d&&e(b.prototype,d),f&&e(b,f),b}}(),b=c(2),e=c(1);var f=function(f){function t(){!function(b,d){if(!(b instanceof d)){throw new TypeError('Cannot call a class as a function')}}(this,t);var d=function(d,b){if(!d){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !b||'object'!=typeof b&&'function'!=typeof b?d:b}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,b.Requests.Logout));return Object.seal(d),d}return function(d,b){if('function'!=typeof b&&null!==b){throw new TypeError('Super expression must either be null or a function, not '+typeof b)}d.prototype=Object.create(b&&b.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(d,b):d.__proto__=b)}(t,b.BaseRequest),d(t,null,[{key:'KEY_ZONE_NAME',get:function(){return 'zn'}}]),d(t,[{key:'validate',value:function(b){if(null==b.mySelf){throw new e.SFSValidationError('LogoutRequest error',['You are not logged in'])}}},{key:'execute',value:function(b){}}]),t}();a.LogoutRequest=f},function(i,b,a){Object.defineProperty(b,'__esModule',{value:!0}),b.LoginRequest=void 0;var d=function(){function e(f,e){for(var d=0;d<e.length;d++){var c=e[d];c.enumerable=c.enumerable||!1,c.configurable=!0,'value' in c&&(c.writable=!0),Object.defineProperty(f,c.key,c)}}return function(c,d,f){return d&&e(c.prototype,d),f&&e(c,f),c}}(),g=a(168),c=a(2),e=a(1),f=a(8);var h=function(h){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,j=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,f=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;!function(c,d){if(!(c instanceof d)){throw new TypeError('Cannot call a class as a function')}}(this,t);var d=function(d,c){if(!d){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !c||'object'!=typeof c&&'function'!=typeof c?d:c}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,c.Requests.Login));return d._userName=e,d._password=g,d._params=j,d._zoneName=f,Object.seal(d),d}return function(d,c){if('function'!=typeof c&&null!==c){throw new TypeError('Super expression must either be null or a function, not '+typeof c)}d.prototype=Object.create(c&&c.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),c&&(Object.setPrototypeOf?Object.setPrototypeOf(d,c):d.__proto__=c)}(t,c.BaseRequest),d(t,null,[{key:'KEY_ZONE_NAME',get:function(){return 'zn'}},{key:'KEY_USER_NAME',get:function(){return 'un'}},{key:'KEY_PASSWORD',get:function(){return 'pw'}},{key:'KEY_PARAMS',get:function(){return 'p'}},{key:'KEY_PRIVILEGE_ID',get:function(){return 'pi'}},{key:'KEY_ID',get:function(){return 'id'}},{key:'KEY_ROOMLIST',get:function(){return 'rl'}},{key:'KEY_RECONNECTION_SECONDS',get:function(){return 'rs'}}]),d(t,[{key:'validate',value:function(c){if(null!=c.mySelf){throw new e.SFSValidationError('LoginRequest error',['You are already logged in; logout before attempting a new login'])}var g=[],d=null!=c.config&&null!=c.config.zone?c.config.zone:null;if(null!=this._zoneName&&(d=this._zoneName),null==d||0===d.length?g.push('Missing Zone name'):this._zoneName=d,null==this._params||this._params instanceof f.SFSObject||g.push('Custom parameters must be passed in a SFSObject'),g.length>0){throw new e.SFSValidationError('LoginRequest Error',g)}}},{key:'execute',value:function(c){null==this._userName&&(this._userName=''),null==this._password&&(this._password=''),this._reqObj.putUtfString(t.KEY_ZONE_NAME,this._zoneName),this._reqObj.putUtfString(t.KEY_USER_NAME,this._userName),this._reqObj.putUtfString(t.KEY_PASSWORD,this._password.length>0?(new g.MD5()).hex_md5(c.sessionToken+this._password):''),null!=this._params&&this._reqObj.putSFSObject(t.KEY_PARAMS,this._params)}}]),t}();b.LoginRequest=h},function(e,a,f){Object.defineProperty(a,'__esModule',{value:!0});var c=function(){function e(g,d){for(var c=0;c<d.length;c++){var b=d[c];b.enumerable=b.enumerable||!1,b.configurable=!0,'value' in b&&(b.writable=!0),Object.defineProperty(g,b.key,b)}}return function(b,c,d){return c&&e(b.prototype,c),d&&e(b,d),b}}();function i(b,c){if(!(b instanceof c)){throw new TypeError('Cannot call a class as a function')}}var b=function(){function e(b){i(this,e),this._sfs=b,this._usersById=new Map(),this._usersByName=new Map()}return c(e,[{key:'containsUserName',value:function(b){return this._usersByName.has(b)}},{key:'containsUserId',value:function(b){return this._usersById.has(b)}},{key:'containsUser',value:function(b){return this._usersById.has(b.id)}},{key:'getUserById',value:function(b){return this._usersById.get(b)}},{key:'getUserByName',value:function(b){return this._usersByName.get(b)}},{key:'getUserCount',value:function(){return this._usersById.size}},{key:'getUserList',value:function(){return Array.from(this._usersById.values())}},{key:'_addUser',value:function(b){this._usersById.has(b.id)&&this._sfs.debug&&this._sfs.logger.warn('Unexpected, duplicate user in UserManager: '+b.toString()),this.__addUser(b)}},{key:'__addUser',value:function(b){this._usersByName.set(b.name,b),this._usersById.set(b.id,b)}},{key:'_removeUser',value:function(b){this._usersById['delete'](b.id),this._usersByName['delete'](b.name)}},{key:'_clearAll',value:function(){this._usersById.clear(),this._usersByName.clear()}}]),e}(),d=function(d){function t(c){i(this,t);var b=function(g,b){if(!g){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !b||'object'!=typeof b&&'function'!=typeof b?g:b}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,c));return b._roomRefCount=new Map(),Object.freeze(b),b}return function(c,b){if('function'!=typeof b&&null!==b){throw new TypeError('Super expression must either be null or a function, not '+typeof b)}c.prototype=Object.create(b&&b.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(c,b):c.__proto__=b)}(t,b),c(t,[{key:'_addUser',value:function(b){this._roomRefCount.has(b)?this._roomRefCount.set(b,this._roomRefCount.get(b)+1):this._roomRefCount.set(b,1),this.__addUser(b)}},{key:'_removeUser',value:function(b){this._removeUserReference(b,!1)}},{key:'_removeUserReference',value:function(b,g){var c=this._roomRefCount.get(b);c<1?this._sfs.logger.warn('GlobalUserManager RefCount is already at zero. User: '+b):(this._roomRefCount.set(b,this._roomRefCount.get(b)-1),(0===c||g)&&(function b(h,i,k){null===h&&(h=Function.prototype);var c=Object.getOwnPropertyDescriptor(h,i);if(void 0===c){var j=Object.getPrototypeOf(h);return null===j?void 0:b(j,i,k)}if('value' in c){return c.value}var l=c.get;return void 0!==l?l.call(k):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),'_removeUser',this).call(this,b),this._roomRefCount['delete'](b)))}}]),t}();a.SFSUserManager=b,a.GlobalUserManager=d},function(a,c,b){(function(d){var e;DataStream=function(e,f,g){this._byteOffset=f||0,e instanceof ArrayBuffer?this.buffer=e:'object'==typeof e?(this.dataView=e,f&&(this._byteOffset+=f)):this.buffer=new ArrayBuffer(e||1),this.position=0,this.endianness=null==g?DataStream.LITTLE_ENDIAN:g},DataStream.prototype={},void 0===Uint8Array.prototype.BYTES_PER_ELEMENT&&(Uint8Array.prototype.BYTES_PER_ELEMENT=Uint8Array.BYTES_PER_ELEMENT,Int8Array.prototype.BYTES_PER_ELEMENT=Int8Array.BYTES_PER_ELEMENT,Uint8ClampedArray.prototype.BYTES_PER_ELEMENT=Uint8ClampedArray.BYTES_PER_ELEMENT,Uint16Array.prototype.BYTES_PER_ELEMENT=Uint16Array.BYTES_PER_ELEMENT,Int16Array.prototype.BYTES_PER_ELEMENT=Int16Array.BYTES_PER_ELEMENT,Uint32Array.prototype.BYTES_PER_ELEMENT=Uint32Array.BYTES_PER_ELEMENT,Int32Array.prototype.BYTES_PER_ELEMENT=Int32Array.BYTES_PER_ELEMENT,Float64Array.prototype.BYTES_PER_ELEMENT=Float64Array.BYTES_PER_ELEMENT),DataStream.prototype.save=function(h){var i=new Blob(this.buffer),e=window.webkitURL||window.URL;if(!e||!e.createObjectURL){throw "DataStream.save: Can't create object URL."}var g=e.createObjectURL(i),f=document.createElement('a');f.setAttribute('href',g),f.setAttribute('download',h),f.click(),e.revokeObjectURL(g)},DataStream.BIG_ENDIAN=!1,DataStream.LITTLE_ENDIAN=!0,DataStream.prototype._dynamicSize=!0,Object.defineProperty(DataStream.prototype,'dynamicSize',{get:function(){return this._dynamicSize},set:function(e){e||this._trimAlloc(),this._dynamicSize=e}}),DataStream.prototype._byteLength=0,Object.defineProperty(DataStream.prototype,'byteLength',{get:function(){return this._byteLength-this._byteOffset}}),Object.defineProperty(DataStream.prototype,'buffer',{get:function(){return this._trimAlloc(),this._buffer},set:function(e){this._buffer=e,this._dataView=new DataView(this._buffer,this._byteOffset),this._byteLength=this._buffer.byteLength}}),Object.defineProperty(DataStream.prototype,'byteOffset',{get:function(){return this._byteOffset},set:function(e){this._byteOffset=e,this._dataView=new DataView(this._buffer,this._byteOffset),this._byteLength=this._buffer.byteLength}}),Object.defineProperty(DataStream.prototype,'dataView',{get:function(){return this._dataView},set:function(e){this._byteOffset=e.byteOffset,this._buffer=e.buffer,this._dataView=new DataView(this._buffer,this._byteOffset),this._byteLength=this._byteOffset+e.byteLength}}),DataStream.prototype._realloc=function(i){if(this._dynamicSize){var f=this._byteOffset+this.position+i,e=this._buffer.byteLength;if(f<=e){f>this._byteLength&&(this._byteLength=f)}else {for(e<1&&(e=1);f>e;){e*=2}var h=new ArrayBuffer(e),g=new Uint8Array(this._buffer);(new Uint8Array(h,0,g.length)).set(g),this.buffer=h,this._byteLength=f}}},DataStream.prototype._trimAlloc=function(){if(this._byteLength!=this._buffer.byteLength){var e=new ArrayBuffer(this._byteLength),f=new Uint8Array(e),g=new Uint8Array(this._buffer,0,f.length);f.set(g),this.buffer=e}},DataStream.prototype.seek=function(f){var e=Math.max(0,Math.min(this.byteLength,f));this.position=isNaN(e)||!isFinite(e)?0:e},DataStream.prototype.isEof=function(){return this.position>=this.byteLength},DataStream.prototype.mapInt32Array=function(e,g){this._realloc(4*e);var f=new Int32Array(this._buffer,this.byteOffset+this.position,e);return DataStream.arrayToNative(f,null==g?this.endianness:g),this.position+=4*e,f},DataStream.prototype.mapInt16Array=function(e,g){this._realloc(2*e);var f=new Int16Array(this._buffer,this.byteOffset+this.position,e);return DataStream.arrayToNative(f,null==g?this.endianness:g),this.position+=2*e,f},DataStream.prototype.mapInt8Array=function(e){this._realloc(1*e);var f=new Int8Array(this._buffer,this.byteOffset+this.position,e);return this.position+=1*e,f},DataStream.prototype.mapUint32Array=function(e,g){this._realloc(4*e);var f=new Uint32Array(this._buffer,this.byteOffset+this.position,e);return DataStream.arrayToNative(f,null==g?this.endianness:g),this.position+=4*e,f},DataStream.prototype.mapUint16Array=function(e,g){this._realloc(2*e);var f=new Uint16Array(this._buffer,this.byteOffset+this.position,e);return DataStream.arrayToNative(f,null==g?this.endianness:g),this.position+=2*e,f},DataStream.prototype.mapUint8Array=function(e){this._realloc(1*e);var f=new Uint8Array(this._buffer,this.byteOffset+this.position,e);return this.position+=1*e,f},DataStream.prototype.mapFloat64Array=function(e,g){this._realloc(8*e);var f=new Float64Array(this._buffer,this.byteOffset+this.position,e);return DataStream.arrayToNative(f,null==g?this.endianness:g),this.position+=8*e,f},DataStream.prototype.mapFloat32Array=function(e,g){this._realloc(4*e);var f=new Float32Array(this._buffer,this.byteOffset+this.position,e);return DataStream.arrayToNative(f,null==g?this.endianness:g),this.position+=4*e,f},DataStream.prototype.readInt32Array=function(e,g){e=null==e?this.byteLength-this.position/4:e;var f=new Int32Array(e);return DataStream.memcpy(f.buffer,0,this.buffer,this.byteOffset+this.position,e*f.BYTES_PER_ELEMENT),DataStream.arrayToNative(f,null==g?this.endianness:g),this.position+=f.byteLength,f},DataStream.prototype.readInt16Array=function(e,g){e=null==e?this.byteLength-this.position/2:e;var f=new Int16Array(e);return DataStream.memcpy(f.buffer,0,this.buffer,this.byteOffset+this.position,e*f.BYTES_PER_ELEMENT),DataStream.arrayToNative(f,null==g?this.endianness:g),this.position+=f.byteLength,f},DataStream.prototype.readInt8Array=function(e){e=null==e?this.byteLength-this.position:e;var f=new Int8Array(e);return DataStream.memcpy(f.buffer,0,this.buffer,this.byteOffset+this.position,e*f.BYTES_PER_ELEMENT),this.position+=f.byteLength,f},DataStream.prototype.readUint32Array=function(e,g){e=null==e?this.byteLength-this.position/4:e;var f=new Uint32Array(e);return DataStream.memcpy(f.buffer,0,this.buffer,this.byteOffset+this.position,e*f.BYTES_PER_ELEMENT),DataStream.arrayToNative(f,null==g?this.endianness:g),this.position+=f.byteLength,f},DataStream.prototype.readUint16Array=function(e,g){e=null==e?this.byteLength-this.position/2:e;var f=new Uint16Array(e);return DataStream.memcpy(f.buffer,0,this.buffer,this.byteOffset+this.position,e*f.BYTES_PER_ELEMENT),DataStream.arrayToNative(f,null==g?this.endianness:g),this.position+=f.byteLength,f},DataStream.prototype.readUint8Array=function(e){e=null==e?this.byteLength-this.position:e;var f=new Uint8Array(e);return DataStream.memcpy(f.buffer,0,this.buffer,this.byteOffset+this.position,e*f.BYTES_PER_ELEMENT),this.position+=f.byteLength,f},DataStream.prototype.readFloat64Array=function(e,g){e=null==e?this.byteLength-this.position/8:e;var f=new Float64Array(e);return DataStream.memcpy(f.buffer,0,this.buffer,this.byteOffset+this.position,e*f.BYTES_PER_ELEMENT),DataStream.arrayToNative(f,null==g?this.endianness:g),this.position+=f.byteLength,f},DataStream.prototype.readFloat32Array=function(e,g){e=null==e?this.byteLength-this.position/4:e;var f=new Float32Array(e);return DataStream.memcpy(f.buffer,0,this.buffer,this.byteOffset+this.position,e*f.BYTES_PER_ELEMENT),DataStream.arrayToNative(f,null==g?this.endianness:g),this.position+=f.byteLength,f},DataStream.prototype.writeInt32Array=function(e,g){if(this._realloc(4*e.length),e instanceof Int32Array&&(this.byteOffset+this.position)%e.BYTES_PER_ELEMENT==0){DataStream.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,e.byteOffset,e.byteLength),this.mapInt32Array(e.length,g)}else {for(var f=0;f<e.length;f++){this.writeInt32(e[f],g)}}},DataStream.prototype.writeInt16Array=function(e,g){if(this._realloc(2*e.length),e instanceof Int16Array&&(this.byteOffset+this.position)%e.BYTES_PER_ELEMENT==0){DataStream.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,e.byteOffset,e.byteLength),this.mapInt16Array(e.length,g)}else {for(var f=0;f<e.length;f++){this.writeInt16(e[f],g)}}},DataStream.prototype.writeInt8Array=function(e){if(this._realloc(1*e.length),e instanceof Int8Array&&(this.byteOffset+this.position)%e.BYTES_PER_ELEMENT==0){DataStream.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,e.byteOffset,e.byteLength),this.mapInt8Array(e.length)}else {for(var f=0;f<e.length;f++){this.writeInt8(e[f])}}},DataStream.prototype.writeUint32Array=function(e,g){if(this._realloc(4*e.length),e instanceof Uint32Array&&(this.byteOffset+this.position)%e.BYTES_PER_ELEMENT==0){DataStream.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,e.byteOffset,e.byteLength),this.mapUint32Array(e.length,g)}else {for(var f=0;f<e.length;f++){this.writeUint32(e[f],g)}}},DataStream.prototype.writeUint16Array=function(e,g){if(this._realloc(2*e.length),e instanceof Uint16Array&&(this.byteOffset+this.position)%e.BYTES_PER_ELEMENT==0){DataStream.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,e.byteOffset,e.byteLength),this.mapUint16Array(e.length,g)}else {for(var f=0;f<e.length;f++){this.writeUint16(e[f],g)}}},DataStream.prototype.writeUint8Array=function(e){if(this._realloc(1*e.length),e instanceof Uint8Array&&(this.byteOffset+this.position)%e.BYTES_PER_ELEMENT==0){DataStream.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,e.byteOffset,e.byteLength),this.mapUint8Array(e.length)}else {for(var f=0;f<e.length;f++){this.writeUint8(e[f])}}},DataStream.prototype.writeFloat64Array=function(e,g){if(this._realloc(8*e.length),e instanceof Float64Array&&(this.byteOffset+this.position)%e.BYTES_PER_ELEMENT==0){DataStream.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,e.byteOffset,e.byteLength),this.mapFloat64Array(e.length,g)}else {for(var f=0;f<e.length;f++){this.writeFloat64(e[f],g)}}},DataStream.prototype.writeFloat32Array=function(e,g){if(this._realloc(4*e.length),e instanceof Float32Array&&(this.byteOffset+this.position)%e.BYTES_PER_ELEMENT==0){DataStream.memcpy(this._buffer,this.byteOffset+this.position,e.buffer,e.byteOffset,e.byteLength),this.mapFloat32Array(e.length,g)}else {for(var f=0;f<e.length;f++){this.writeFloat32(e[f],g)}}},DataStream.prototype.readInt32=function(e){var f=this._dataView.getInt32(this.position,null==e?this.endianness:e);return this.position+=4,f},DataStream.prototype.readInt16=function(e){var f=this._dataView.getInt16(this.position,null==e?this.endianness:e);return this.position+=2,f},DataStream.prototype.readInt8=function(){var e=this._dataView.getInt8(this.position);return this.position+=1,e},DataStream.prototype.readUint32=function(e){var f=this._dataView.getUint32(this.position,null==e?this.endianness:e);return this.position+=4,f},DataStream.prototype.readUint16=function(e){var f=this._dataView.getUint16(this.position,null==e?this.endianness:e);return this.position+=2,f},DataStream.prototype.readUint8=function(){var e=this._dataView.getUint8(this.position);return this.position+=1,e},DataStream.prototype.readFloat32=function(e){var f=this._dataView.getFloat32(this.position,null==e?this.endianness:e);return this.position+=4,f},DataStream.prototype.readFloat64=function(e){var f=this._dataView.getFloat64(this.position,null==e?this.endianness:e);return this.position+=8,f},DataStream.prototype.writeInt32=function(f,e){this._realloc(4),this._dataView.setInt32(this.position,f,null==e?this.endianness:e),this.position+=4},DataStream.prototype.writeInt16=function(f,e){this._realloc(2),this._dataView.setInt16(this.position,f,null==e?this.endianness:e),this.position+=2},DataStream.prototype.writeInt8=function(e){this._realloc(1),this._dataView.setInt8(this.position,e),this.position+=1},DataStream.prototype.writeUint32=function(f,e){this._realloc(4),this._dataView.setUint32(this.position,f,null==e?this.endianness:e),this.position+=4},DataStream.prototype.writeUint16=function(f,e){this._realloc(2),this._dataView.setUint16(this.position,f,null==e?this.endianness:e),this.position+=2},DataStream.prototype.writeUint8=function(e){this._realloc(1),this._dataView.setUint8(this.position,e),this.position+=1},DataStream.prototype.writeFloat32=function(f,e){this._realloc(4),this._dataView.setFloat32(this.position,f,null==e?this.endianness:e),this.position+=4},DataStream.prototype.writeFloat64=function(f,e){this._realloc(8),this._dataView.setFloat64(this.position,f,null==e?this.endianness:e),this.position+=8},DataStream.endianness=(new Int8Array((new Int16Array([1])).buffer))[0]>0,DataStream.memcpy=function(f,k,g,i,e){var h=new Uint8Array(f,k,e),j=new Uint8Array(g,i,e);h.set(j)},DataStream.arrayToNative=function(e,f){return f==this.endianness?e:this.flipArrayEndianness(e)},DataStream.nativeToEndian=function(e,f){return this.endianness==f?e:this.flipArrayEndianness(e)},DataStream.flipArrayEndianness=function(e){for(var i=new Uint8Array(e.buffer,e.byteOffset,e.byteLength),g=0;g<e.byteLength;g+=e.BYTES_PER_ELEMENT){for(var h=g+e.BYTES_PER_ELEMENT-1,f=g;h>f;h--,f++){var j=i[f];i[f]=i[h],i[h]=j}}return e},DataStream.createStringFromArray=function(f){for(var g=[],e=0;e<f.length;e+=32768){g.push(String.fromCharCode.apply(null,f.subarray(e,e+32768)))}return g.join('')},DataStream.prototype.failurePosition=0,DataStream.prototype.readStruct=function(f){for(var i,h,g={},j=this.position,e=0;e<f.length;e+=2){if(i=f[e+1],null==(h=this.readType(i,g))){return 0==this.failurePosition&&(this.failurePosition=this.position),this.position=j,null}g[f[e]]=h}return g},DataStream.prototype.readUCS2String=function(e,f){return DataStream.createStringFromArray(this.readUint16Array(e,f))},DataStream.prototype.writeUCS2String=function(g,h,f){null==f&&(f=g.length);for(var e=0;e<g.length&&e<f;e++){this.writeUint16(g.charCodeAt(e),h)}for(;e<f;e++){this.writeUint16(0)}},DataStream.prototype.readString=function(e,f){return null==f||'ASCII'==f?DataStream.createStringFromArray(this.mapUint8Array(null==e?this.byteLength-this.position:e)):(new TextDecoder(f)).decode(this.mapUint8Array(e))},DataStream.prototype.writeString=function(f,h,g){if(null==h||'ASCII'==h){if(null!=g){var e=0,i=Math.min(f.length,g);for(e=0;e<i;e++){this.writeUint8(f.charCodeAt(e))}for(;e<g;e++){this.writeUint8(0)}}else {for(e=0;e<f.length;e++){this.writeUint8(f.charCodeAt(e))}}}else {this.writeUint8Array((new TextEncoder(h)).encode(f.substring(0,g)))}},DataStream.prototype.readCString=function(f){var h=this.byteLength-this.position,i=new Uint8Array(this._buffer,this._byteOffset+this.position),g=h;null!=f&&(g=Math.min(f,h));for(var e=0;e<g&&0!=i[e];e++){}var j=DataStream.createStringFromArray(this.mapUint8Array(e));return null!=f?this.position+=g-e:e!=h&&(this.position+=1),j},DataStream.prototype.writeCString=function(f,g){if(null!=g){var e=0,h=Math.min(f.length,g);for(e=0;e<h;e++){this.writeUint8(f.charCodeAt(e))}for(;e<g;e++){this.writeUint8(0)}}else {for(e=0;e<f.length;e++){this.writeUint8(f.charCodeAt(e))}this.writeUint8(0)}},DataStream.prototype.readType=function(f,h){if('function'==typeof f){return f(this,h)}if(!('object'!=typeof f||f instanceof Array)){return f.get(this,h)}if(f instanceof Array&&3!=f.length){return this.readStruct(f,h)}var n,e=null,k=null,q='ASCII',t=this.position;'string'==typeof f&&/:/.test(f)&&(f=(n=f.split(':'))[0],k=null!=h[i=n[1]]?parseInt(h[i]):parseInt(n[1]));'string'==typeof f&&/,/.test(f)&&(f=(n=f.split(','))[0],q=parseInt(n[1]));switch(f){case 'uint8':e=this.readUint8();break;case 'int8':e=this.readInt8();break;case 'uint16':e=this.readUint16(this.endianness);break;case 'int16':e=this.readInt16(this.endianness);break;case 'uint32':e=this.readUint32(this.endianness);break;case 'int32':e=this.readInt32(this.endianness);break;case 'float32':e=this.readFloat32(this.endianness);break;case 'float64':e=this.readFloat64(this.endianness);break;case 'uint16be':e=this.readUint16(DataStream.BIG_ENDIAN);break;case 'int16be':e=this.readInt16(DataStream.BIG_ENDIAN);break;case 'uint32be':e=this.readUint32(DataStream.BIG_ENDIAN);break;case 'int32be':e=this.readInt32(DataStream.BIG_ENDIAN);break;case 'float32be':e=this.readFloat32(DataStream.BIG_ENDIAN);break;case 'float64be':e=this.readFloat64(DataStream.BIG_ENDIAN);break;case 'uint16le':e=this.readUint16(DataStream.LITTLE_ENDIAN);break;case 'int16le':e=this.readInt16(DataStream.LITTLE_ENDIAN);break;case 'uint32le':e=this.readUint32(DataStream.LITTLE_ENDIAN);break;case 'int32le':e=this.readInt32(DataStream.LITTLE_ENDIAN);break;case 'float32le':e=this.readFloat32(DataStream.LITTLE_ENDIAN);break;case 'float64le':e=this.readFloat64(DataStream.LITTLE_ENDIAN);break;case 'cstring':e=this.readCString(k);break;case 'string':e=this.readString(k,q);break;case 'u16string':e=this.readUCS2String(k,this.endianness);break;case 'u16stringle':e=this.readUCS2String(k,DataStream.LITTLE_ENDIAN);break;case 'u16stringbe':e=this.readUCS2String(k,DataStream.BIG_ENDIAN);break;default:if(3==f.length){var i,l=f[1],g=0;if(g='function'==typeof (i=f[2])?i(h,this,f):'string'==typeof i&&null!=h[i]?parseInt(h[i]):parseInt(i),'string'==typeof l){var s=l.replace(/(le|be)$/,''),j=null;switch(/le$/.test(l)?j=DataStream.LITTLE_ENDIAN:/be$/.test(l)&&(j=DataStream.BIG_ENDIAN),'*'==i&&(g=null),s){case 'uint8':e=this.readUint8Array(g);break;case 'uint16':e=this.readUint16Array(g,j);break;case 'uint32':e=this.readUint32Array(g,j);break;case 'int8':e=this.readInt8Array(g);break;case 'int16':e=this.readInt16Array(g,j);break;case 'int32':e=this.readInt32Array(g,j);break;case 'float32':e=this.readFloat32Array(g,j);break;case 'float64':e=this.readFloat64Array(g,j);break;case 'cstring':case 'utf16string':case 'string':if(null==g){for(e=[];!this.isEof();){if(null==(o=this.readType(l,h))){break}e.push(o)}}else {e=new Array(g);for(var m=0;m<g;m++){e[m]=this.readType(l,h)}};}}else {if('*'==i){for(e=[],this.buffer;;){var p=this.position;try{var r=this.readType(l,h);if(null==r){this.position=p;break}e.push(r)}catch(u){this.position=p;break}}}else {e=new Array(g);for(m=0;m<g;m++){var o;if(null==(o=this.readType(l,h))){return null}e[m]=o}}}break};}return null!=k&&(this.position=t+k),e},DataStream.prototype.writeStruct=function(f,g){for(var e=0;e<f.length;e+=2){var h=f[e+1];this.writeType(h,g[f[e]],g)}},DataStream.prototype.writeType=function(f,e,m){if('function'==typeof f){return f(this,e)}if('object'==typeof f&&!(f instanceof Array)){return f.set(this,e,m)}var h,g=null,j='ASCII',k=this.position;'string'==typeof f&&/:/.test(f)&&(f=(h=f.split(':'))[0],g=parseInt(h[1]));'string'==typeof f&&/,/.test(f)&&(f=(h=f.split(','))[0],j=parseInt(h[1]));switch(f){case 'uint8':this.writeUint8(e);break;case 'int8':this.writeInt8(e);break;case 'uint16':this.writeUint16(e,this.endianness);break;case 'int16':this.writeInt16(e,this.endianness);break;case 'uint32':this.writeUint32(e,this.endianness);break;case 'int32':this.writeInt32(e,this.endianness);break;case 'float32':this.writeFloat32(e,this.endianness);break;case 'float64':this.writeFloat64(e,this.endianness);break;case 'uint16be':this.writeUint16(e,DataStream.BIG_ENDIAN);break;case 'int16be':this.writeInt16(e,DataStream.BIG_ENDIAN);break;case 'uint32be':this.writeUint32(e,DataStream.BIG_ENDIAN);break;case 'int32be':this.writeInt32(e,DataStream.BIG_ENDIAN);break;case 'float32be':this.writeFloat32(e,DataStream.BIG_ENDIAN);break;case 'float64be':this.writeFloat64(e,DataStream.BIG_ENDIAN);break;case 'uint16le':this.writeUint16(e,DataStream.LITTLE_ENDIAN);break;case 'int16le':this.writeInt16(e,DataStream.LITTLE_ENDIAN);break;case 'uint32le':this.writeUint32(e,DataStream.LITTLE_ENDIAN);break;case 'int32le':this.writeInt32(e,DataStream.LITTLE_ENDIAN);break;case 'float32le':this.writeFloat32(e,DataStream.LITTLE_ENDIAN);break;case 'float64le':this.writeFloat64(e,DataStream.LITTLE_ENDIAN);break;case 'cstring':this.writeCString(e,g);break;case 'string':this.writeString(e,j,g);break;case 'u16string':this.writeUCS2String(e,this.endianness,g);break;case 'u16stringle':this.writeUCS2String(e,DataStream.LITTLE_ENDIAN,g);break;case 'u16stringbe':this.writeUCS2String(e,DataStream.BIG_ENDIAN,g);break;default:if(3==f.length){for(var l=f[1],i=0;i<e.length;i++){this.writeType(l,e[i])}break};this.writeStruct(f,e);}null!=g&&(this.position=k,this._realloc(g),this.position=k+g)},void 0===(e=function(){return DataStream}.apply(c,[]))||(d.exports=e),'object'==typeof d&&d&&d.exports&&(d.exports=DataStream)}).call(this,b(171)(a))},function(b,e,a){var d=a(24),c=a(12);b.exports=function(f){if(void 0===f){return 0}var h=d(f),g=c(h);if(h!==g){throw RangeError('Wrong length!')}return g}},function(l,r,a){var o=a(40),d=a(29).getWeak,n=a(5),i=a(4),k=a(41),p=a(61),e=a(19),h=a(16),g=a(39),m=e(5),j=e(6),q=0,b=function(b){return b._l||(b._l=new f())},f=function(){this.a=[]},c=function(b,c){return m(b.a,function(d){return d[0]===c})};f.prototype={get:function(d){var b=c(this,d);if(b){return b[1]}},has:function(b){return !!c(this,b)},set:function(b,e){var d=c(this,b);d?d[1]=e:this.a.push([b,e])},'delete':function(c){var b=j(this.a,function(b){return b[0]===c});return ~b&&this.a.splice(b,1),!!~b}},l.exports={getConstructor:function(f,c,j,m){var e=f(function(b,d){k(b,e,c,'_i'),b._t=c,b._i=q++,b._l=void 0,void 0!=d&&p(d,j,b[m],b)});return o(e.prototype,{'delete':function(k){if(!i(k)){return !1}var e=d(k);return !0===e?b(g(this,c))['delete'](k):e&&h(e,this._i)&&delete e[this._i]},has:function(e){if(!i(e)){return !1}var k=d(e);return !0===k?b(g(this,c)).has(e):k&&h(k,this._i)}}),e},def:function(c,g,e){var f=d(n(g),!0);return !0===f?b(c).set(g,e):f[c._i]=e,c},ufstore:b}},function(j,q,a){var n=a(9).f,l=a(33),m=a(40),o=a(27),h=a(41),p=a(61),i=a(83),g=a(126),k=a(42),f=a(11),e=a(29).fastKey,b=a(39),c=f?'_s':'size',d=function(c,f){var b,d=e(f);if('F'!==d){return c._i[d]}for(b=c._f;b;b=b.n){if(b.k==f){return b}}};j.exports={getConstructor:function(k,e,r,i){var g=k(function(b,d){h(b,g,e,'_i'),b._t=e,b._i=l(null),b._f=void 0,b._l=void 0,b[c]=0,void 0!=d&&p(d,r,b[i],b)});return m(g.prototype,{clear:function(){for(var f=b(this,e),g=f._i,d=f._f;d;d=d.n){d.r=!0,d.p&&(d.p=d.p.n=void 0),delete g[d.i]}f._f=f._l=void 0,f[c]=0},'delete':function(m){var g=b(this,e),f=d(g,m);if(f){var h=f.n,l=f.p;delete g._i[f.i],f.r=!0,l&&(l.n=h),h&&(h.p=l),g._f==f&&(g._f=h),g._l==f&&(g._l=l),g[c]--}return !!f},forEach:function(d){b(this,e);for(var c,f=o(d,arguments.length>1?arguments[1]:void 0,3);c=c?c.n:this._f;){for(f(c.v,c.k,this);c&&c.r;){c=c.p}}},has:function(c){return !!d(b(this,e),c)}}),f&&n(g.prototype,'size',{get:function(){return b(this,e)[c]}}),g},def:function(b,i,k){var h,g,f=d(b,i);return f?f.v=k:(b._l=f={i:g=e(i,!0),k:i,v:k,p:h=b._l,n:void 0,r:!1},b._f||(b._f=f),h&&(h.n=f),b[c]++,'F'!==g&&(b._i[g]=f)),b},getEntry:d,setStrong:function(e,c,d){i(e,c,function(f,g){this._t=b(f,c),this._k=g,this._l=void 0},function(){for(var f=this._k,b=this._l;b&&b.r;){b=b.p}return this._t&&(this._l=b=b?b.n:this._t._f)?g(0,'keys'==f?b.k:'values'==f?b.v:[b.k,b.v]):(this._t=void 0,g(1))},d?'entries':'values',!d,!0),k(c)}}},function(b,d,c){var a=c(26);b.exports.f=function(e){return new function(h){var g,f;this.promise=new h(function(a,i){if(void 0!==g||void 0!==f){throw TypeError('Bad Promise constructor')}g=a,f=i}),this.resolve=a(g),this.reject=a(f)}(e)}},function(s,t,b){var c,o,j,f=b(27),r=b(140),p=b(89),m=b(95),a=b(6),n=a.process,i=a.setImmediate,g=a.clearImmediate,q=a.MessageChannel,k=a.Dispatch,h=0,d={},e=function(){var a=+this;if(d.hasOwnProperty(a)){var c=d[a];delete d[a],c()}},l=function(a){e.call(a.data)};i&&g||(i=function(a){for(var f=[],e=1;arguments.length>e;){f.push(arguments[e++])}return d[++h]=function(){r('function'==typeof a?a:Function(a),f)},c(h),h},g=function(a){delete d[a]},'process'==b(25)(n)?c=function(a){n.nextTick(f(e,a,1))}:k&&k.now?c=function(a){k.now(f(e,a,1))}:q?(j=(o=new q()).port2,o.port1.onmessage=l,c=f(j.postMessage,j,1)):a.addEventListener&&'function'==typeof postMessage&&!a.importScripts?(c=function(c){a.postMessage(c+'','*')},a.addEventListener('message',l,!1)):c='onreadystatechange' in m('script')?function(a){p.appendChild(m('script')).onreadystatechange=function(){p.removeChild(this),e.call(a)}}:function(a){setTimeout(f(e,a,1),0)}),s.exports={set:i,clear:g}},function(b,c,a){a(11)&&'g'!=/./g.flags&&a(9).f(RegExp.prototype,'flags',{configurable:!0,get:a(76)})},function(a,b){a.exports=function(c,d){return {value:d,done:!!c}}},function(e,g,a){var b=a(52),c=a(126),d=a(53),f=a(21);e.exports=a(83)(Array,'Array',function(b,c){this._t=f(b),this._i=0,this._k=c},function(){var d=this._t,f=this._k,b=this._i++;return !d||b>=d.length?(this._t=void 0,c(1)):c(0,'keys'==f?b:'values'==f?d[b]:[b,d[b]])},'values'),d.Arguments=d.Array,b('keys'),b('values'),b('entries')},function(c,f,b){var e=b(14),a=b(34),d=b(12);c.exports=[].copyWithin||function(n,o){var i=e(this),j=d(i.length),g=a(n,j),h=a(o,j),m=arguments.length>2?arguments[2]:void 0,k=Math.min((void 0===m?j:a(m,j))-h,j-g),l=1;for(h<g&&g<h+k&&(l=-1,h+=k-1,g+=k-1);k-->0;){h in i?i[g]=i[h]:delete i[g],g+=l,h+=l}return i}},function(b,g,a){var e=a(26),c=a(14),d=a(54),f=a(12);b.exports=function(p,o,q,i,k){e(o);var m=c(p),j=d(m),n=f(m.length),h=k?n-1:0,l=k?-1:1;if(q<2){for(;;){if(h in j){i=j[h],h+=l;break}if(h+=l,k?h<0:n<=h){throw TypeError('Reduce of empty array with no initial value')}}}for(;k?h>=0:n>h;h+=l){h in j&&(i=o(i,j[h],h,m))}return i}},function(b,e,a){var d=a(9),c=a(36);b.exports=function(f,g,h){g in f?d.f(f,g,c(0,h)):f[g]=h}},function(b,d,c){var a=c(5);b.exports=function(f,h,e,i){try{return i?h(a(e)[0],e[1]):h(e)}catch(j){var g=f['return'];throw void 0!==g&&a(g.call(f)),j}}},function(c,g,a){var f=a(33),d=a(36),e=a(44),b={};a(18)(b,a(7)('iterator'),function(){return this}),c.exports=function(h,j,i){h.prototype=f(b,{next:d(1,i)}),e(h,j+' Iterator')}},function(b,e,a){var d=a(24),c=a(28);b.exports=function(f){return function(m,l){var i,j,h=String(c(m)),g=d(l),k=h.length;return g<0||g>=k?f?'':void 0:(i=h.charCodeAt(g))<55296||i>56319||g+1===k||(j=h.charCodeAt(g+1))<56320||j>57343?f?h.charAt(g):i:f?h.slice(g,g+2):j-56320+(i-55296<<10)+65536}}},function(a,b){a.exports=Math.log1p||function(c){return (c=+c)>-1.0E-8&&c<1.0E-8?c-c*c/2:Math.log(1+c)}},function(a,e,c){var d=c(4),b=Math.floor;a.exports=function(f){return !d(f)&&isFinite(f)&&b(f)===f}},function(b,e,a){var d=a(24),c=a(28);b.exports=function(i){var g=String(c(this)),h='',f=d(i);if(f<0||f==1/0){throw RangeError("Count can't be negative")}for(;f>0;(f>>>=1)&&(g+=g)){1&f&&(h+=g)}return h}},function(a,d,b){var c=b(25);a.exports=function(e,f){if('number'!=typeof e&&'Number'!=c(e)){throw TypeError(f)}return +e}},function(c,e,a){var b=a(6).parseFloat,d=a(64).trim;c.exports=1/b(a(87)+'-0')!=-1/0?function(h){var g=d(String(h),3),f=b(g);return 0===f&&'-'==g.charAt(0)?-0:f}:b},function(d,g,b){var a=b(6).parseInt,e=b(64).trim,c=b(87),f=/^[-+]?0[xX]/;d.exports=8!==a(c+'08')||22!==a(c+'0x16')?function(h,i){var c=e(String(h),3);return a(c,i>>>0||(f.test(c)?16:10))}:a},function(a,b){a.exports=function(d,c,e){var f=void 0===e;switch(c.length){case 0:return f?d():d.call(e);case 1:return f?d(c[0]):d.call(e,c[0]);case 2:return f?d(c[0],c[1]):d.call(e,c[0],c[1]);case 3:return f?d(c[0],c[1],c[2]):d.call(e,c[0],c[1],c[2]);case 4:return f?d(c[0],c[1],c[2],c[3]):d.call(e,c[0],c[1],c[2],c[3]);}return d.apply(e,c)}},function(d,h,b){var g=b(26),e=b(4),f=b(140),c=[].slice,a={};d.exports=Function.bind||function(k){var i=g(this),l=c.call(arguments,1),j=function(){var e=l.concat(c.call(arguments));return this instanceof j?function(g,e,i){if(!(e in a)){for(var f=[],c=0;c<e;c++){f[c]='a['+c+']'}a[e]=Function('F,a','return new F('+f.join(',')+')')}return a[e](g,i)}(i,e.length,e):f(i,e,k)};return e(i.prototype)&&(j.prototype=i.prototype),j}},function(e,i,a){var c=a(55),f=a(67),g=a(66),h=a(14),d=a(54),b=Object.assign;e.exports=!b||a(3)(function(){var c={},g={},d=Symbol(),f='abcdefghijklmnopqrst';return c[d]=7,f.split('').forEach(function(b){g[b]=b}),7!=b({},c)[d]||Object.keys(b({},g)).join('')!=f})?function(p,t){for(var n=h(p),s=arguments.length,k=1,m=f.f,q=g.f;s>k;){for(var j,b=d(arguments[k++]),o=m?c(b).concat(m(b)):c(b),r=o.length,l=0;r>l;){q.call(b,j=o[l++])&&(n[j]=b[j])}}return n}:b},function(d,g,b){var f=b(21),a=b(32).f,e={}.toString,c='object'==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];d.exports.f=function(h){return c&&'[object Window]'==e.call(h)?function(e){try{return a(e)}catch(i){return c.slice()}}(h):a(f(h))}},function(b,f,a){var e=a(9),c=a(5),d=a(55);b.exports=a(11)?Object.defineProperties:function(g,j){c(g);for(var h,i=d(j),l=i.length,k=0;l>k;){e.f(g,h=i[k++],j[h])}return g}},function(c,g,a){var b=a(16),d=a(21),e=a(93)(!1),f=a(92)('IE_PROTO');c.exports=function(m,k){var h,j=d(m),l=0,i=[];for(h in j){h!=f&&b(j,h)&&i.push(h)}for(;k.length>l;){b(j,h=k[l++])&&(~e(i,h)||i.push(h))}return i}},function(c,b,a){b.f=a(7)},function(b,c,a){b.exports=!a(11)&&!a(3)(function(){return 7!=Object.defineProperty(a(95)('div'),'a',{get:function(){return 7}}).a})},function(a,c,b){Number.MAX_SAFE_INTEGER||(Number.MAX_SAFE_INTEGER=9.007199254740991E15),Number.isInteger=Number.isInteger||function(d){return 'number'==typeof d&&isFinite(d)&&Math.floor(d)===d},Number.isSafeInteger=Number.isSafeInteger||function(d){return Number.isInteger(d)&&Math.abs(d)<=Number.MAX_SAFE_INTEGER},Number.isFinite=Number.isFinite||function(d){return 'number'==typeof d&&isFinite(d)},Array.prototype.find||Object.defineProperty(Array.prototype,'find',{value:function(e){if(null==this){throw new TypeError('Array.prototype.find called on null or undefined')}if('function'!=typeof e){throw new TypeError('predicate must be a function')}for(var f=Object(this),g=f.length>>>0,h=arguments[1],d=0;d!==g;d++){if(e.call(h,this[d],d,f)){return this[d]}}}})},function(g,b,a){Object.defineProperty(b,'__esModule',{value:!0}),b.BuddyMessageRequest=void 0;var c=a(69),d=a(1),e=a(57);var f=function(f){function t(j,i){var k=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;!function(c,d){if(!(c instanceof d)){throw new TypeError('Cannot call a class as a function')}}(this,t);var h=function(d,c){if(!d){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !c||'object'!=typeof c&&'function'!=typeof c?d:c}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));if(null!=i&&!(i instanceof e.SFSBuddy)){throw new d.SFSError('Target buddy must be an instance of SFSBuddy class')}return h._type=c.GenericMessageType.BUDDY_MSG,h._message=j,h._recipient=null!=i?i.id:-1,h._params=k,Object.seal(h),h}return function(d,c){if('function'!=typeof c&&null!==c){throw new TypeError('Super expression must either be null or a function, not '+typeof c)}d.prototype=Object.create(c&&c.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),c&&(Object.setPrototypeOf?Object.setPrototypeOf(d,c):d.__proto__=c)}(t,c.GenericMessageRequest),t}();b.BuddyMessageRequest=f},function(i,c,a){Object.defineProperty(c,'__esModule',{value:!0}),c.QuickJoinGameRequest=void 0;var f=function(){function e(f,e){for(var d=0;d<e.length;d++){var b=e[d];b.enumerable=b.enumerable||!1,b.configurable=!0,'value' in b&&(b.writable=!0),Object.defineProperty(f,b.key,b)}}return function(b,d,f){return d&&e(b.prototype,d),f&&e(b,f),b}}(),d=a(2),e=a(1),b=a(10),g=a(45);var h=function(h){function t(e,f){var g=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;!function(b,d){if(!(b instanceof d)){throw new TypeError('Cannot call a class as a function')}}(this,t);var b=function(d,b){if(!d){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !b||'object'!=typeof b&&'function'!=typeof b?d:b}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,d.Requests.QuickJoinGame));return b._matchExpression=e,b._whereToSearch=f,b._roomToLeave=g,Object.seal(b),b}return function(d,b){if('function'!=typeof b&&null!==b){throw new TypeError('Super expression must either be null or a function, not '+typeof b)}d.prototype=Object.create(b&&b.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(d,b):d.__proto__=b)}(t,d.BaseRequest),f(t,null,[{key:'KEY_ROOM_LIST',get:function(){return 'rl'}},{key:'KEY_GROUP_LIST',get:function(){return 'gl'}},{key:'KEY_ROOM_TO_LEAVE',get:function(){return 'tl'}},{key:'KEY_MATCH_EXPRESSION',get:function(){return 'me'}},{key:'MAX_ROOMS',get:function(){return 32}}]),f(t,[{key:'validate',value:function(f){var d=[];if(null==this._matchExpression||this._matchExpression instanceof g.MatchExpression||d.push('Match expression must be an instance of MatchExpression class'),null==this._whereToSearch||this._whereToSearch.length<1?d.push('Missing list of Rooms or Group names where to search the game to join'):this._whereToSearch.length>t.MAX_ROOMS&&d.push('Too many Rooms specified in list where to search the game to join; client limit is: '+t.MAX_ROOMS),null==this._roomToLeave||this._roomToLeave instanceof b.SFSRoom||d.push('Room to leave must be an instance of SFSRoom class'),d.length>0){throw new e.SFSValidationError('CreateSFSGameRequest Error',d)}}},{key:'execute',value:function(n){if('string'==typeof this._whereToSearch[0]){this._reqObj.putUtfStringArray(t.KEY_GROUP_LIST,this._whereToSearch)}else {if(!(this._whereToSearch[0] instanceof b.SFSRoom)){throw new e.SFSError('Invalid type in whereToSearch parameter')}var l=[],f=!0,j=!1,g=void 0;try{for(var m,d=this._whereToSearch[Symbol.iterator]();!(f=(m=d.next()).done);f=!0){var k=m.value;k instanceof b.SFSRoom&&l.push(k.id)}}catch(o){j=!0,g=o}finally{try{!f&&d['return']&&d['return']()}finally{if(j){throw g}}}this._reqObj.putIntArray(t.KEY_ROOM_LIST,l)}null!=this._roomToLeave&&this._reqObj.putInt(t.KEY_ROOM_TO_LEAVE,this._roomToLeave.id),null!=this._matchExpression&&this._reqObj.putSFSArray(t.KEY_MATCH_EXPRESSION,this._matchExpression.toSFSArray())}}]),t}();c.QuickJoinGameRequest=h},function(i,b,a){Object.defineProperty(b,'__esModule',{value:!0}),b.JoinRoomInvitationRequest=void 0;var d=function(){function e(f,e){for(var d=0;d<e.length;d++){var c=e[d];c.enumerable=c.enumerable||!1,c.configurable=!0,'value' in c&&(c.writable=!0),Object.defineProperty(f,c.key,c)}}return function(c,d,f){return d&&e(c.prototype,d),f&&e(c,f),c}}(),c=a(2),f=a(1),g=a(10),e=a(8);var h=function(h){function t(e,f){var j=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,g=arguments.length>3&&void 0!==arguments[3]?arguments[3]:30,k=arguments.length>4&&void 0!==arguments[4]&&arguments[4];!function(c,d){if(!(c instanceof d)){throw new TypeError('Cannot call a class as a function')}}(this,t);var d=function(d,c){if(!d){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !c||'object'!=typeof c&&'function'!=typeof c?d:c}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,c.Requests.JoinRoomInvite));return d._targetRoom=e,d._invitedUserNames=f,d._params=j,d._expirySeconds=g,d._asSpectator=k,Object.seal(d),d}return function(d,c){if('function'!=typeof c&&null!==c){throw new TypeError('Super expression must either be null or a function, not '+typeof c)}d.prototype=Object.create(c&&c.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),c&&(Object.setPrototypeOf?Object.setPrototypeOf(d,c):d.__proto__=c)}(t,c.BaseRequest),d(t,null,[{key:'KEY_ROOM_ID',get:function(){return 'r'}},{key:'KEY_EXPIRY_SECONDS',get:function(){return 'es'}},{key:'KEY_INVITED_NAMES',get:function(){return 'in'}},{key:'KEY_AS_SPECT',get:function(){return 'as'}},{key:'KEY_OPTIONAL_PARAMS',get:function(){return 'op'}}]),d(t,[{key:'validate',value:function(d){var c=[];if(null==this._targetRoom&&c.push('Missing target room'),null==this._targetRoom||this._targetRoom instanceof g.SFSRoom||c.push('Target room must be an instance of SFSRoom class'),null==this._invitedUserNames?c.push('No invitees provided'):this._invitedUserNames instanceof Array?this._invitedUserNames.length<1&&c.push('No invitees provided'):c.push('Invited user names must be passed in an array'),null==this._params||this._params instanceof e.SFSObject||c.push('Custom invitation parameters must be set in a SFSObject class instance'),c.length>0){throw new f.SFSValidationError('JoinRoomInvitationRequest Error',c)}}},{key:'execute',value:function(c){this._reqObj.putInt(t.KEY_ROOM_ID,this._targetRoom.id),this._reqObj.putUtfStringArray(t.KEY_INVITED_NAMES,this._invitedUserNames),this._reqObj.putInt(t.KEY_EXPIRY_SECONDS,this._expirySeconds),this._reqObj.putBool(t.KEY_AS_SPECT,this._asSpectator),null!=this._params&&this._reqObj.putSFSObject(t.KEY_OPTIONAL_PARAMS,this._params)}}]),t}();b.JoinRoomInvitationRequest=h},function(i,b,a){Object.defineProperty(b,'__esModule',{value:!0}),b.InvitationReplyRequest=void 0;var d=function(){function e(f,e){for(var d=0;d<e.length;d++){var c=e[d];c.enumerable=c.enumerable||!1,c.configurable=!0,'value' in c&&(c.writable=!0),Object.defineProperty(f,c.key,c)}}return function(c,d,f){return d&&e(c.prototype,d),f&&e(c,f),c}}(),c=a(2),f=a(1),g=a(8),e=a(71);var h=function(h){function t(e,f){var g=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;!function(c,d){if(!(c instanceof d)){throw new TypeError('Cannot call a class as a function')}}(this,t);var d=function(d,c){if(!d){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !c||'object'!=typeof c&&'function'!=typeof c?d:c}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,c.Requests.InvitationReply));return d._invitation=e,d._reply=f,d._params=g,Object.seal(d),d}return function(d,c){if('function'!=typeof c&&null!==c){throw new TypeError('Super expression must either be null or a function, not '+typeof c)}d.prototype=Object.create(c&&c.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),c&&(Object.setPrototypeOf?Object.setPrototypeOf(d,c):d.__proto__=c)}(t,c.BaseRequest),d(t,null,[{key:'KEY_INVITATION_ID',get:function(){return 'i'}},{key:'KEY_INVITATION_REPLY',get:function(){return 'r'}},{key:'KEY_INVITATION_PARAMS',get:function(){return 'p'}}]),d(t,[{key:'validate',value:function(d){var c=[];if(null==this._invitation?c.push('Missing invitation object'):this._invitation instanceof e.SFSInvitation||c.push('Invitation object must be an instance of Invitation class'),null==this._params||this._params instanceof g.SFSObject||c.push('Custom invitation parameters must be set in a SFSObject class instance'),c.length>0){throw new f.SFSValidationError('InvitationReplyRequest Error',c)}}},{key:'execute',value:function(c){this._reqObj.putInt(t.KEY_INVITATION_ID,this._invitation.id),this._reqObj.putByte(t.KEY_INVITATION_REPLY,this._reply),null!=this._params&&this._reqObj.putSFSObject(t.KEY_INVITATION_PARAMS,this._params)}}]),t}();b.InvitationReplyRequest=h},function(n,c,a){Object.defineProperty(c,'__esModule',{value:!0}),c.CreateSFSGameRequest=void 0;var g=function(){function e(f,e){for(var d=0;d<e.length;d++){var b=e[d];b.enumerable=b.enumerable||!1,b.configurable=!0,'value' in b&&(b.writable=!0),Object.defineProperty(f,b.key,b)}}return function(b,d,f){return d&&e(b.prototype,d),f&&e(b,f),b}}(),e=a(2),f=a(1),m=a(56),i=a(70),b=a(68),j=a(47),l=a(57),k=a(8),d=a(45);var h=function(h){function t(d){!function(b,e){if(!(b instanceof e)){throw new TypeError('Cannot call a class as a function')}}(this,t);var b=function(e,b){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !b||'object'!=typeof b&&'function'!=typeof b?e:b}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e.Requests.CreateSFSGame));return b._settings=d,b._createRoomRequest=new i.CreateRoomRequest(d,!1,null),Object.seal(b),b}return function(d,b){if('function'!=typeof b&&null!==b){throw new TypeError('Super expression must either be null or a function, not '+typeof b)}d.prototype=Object.create(b&&b.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(d,b):d.__proto__=b)}(t,e.BaseRequest),g(t,null,[{key:'KEY_IS_PUBLIC',get:function(){return 'gip'}},{key:'KEY_MIN_PLAYERS',get:function(){return 'gmp'}},{key:'KEY_INVITED_PLAYERS',get:function(){return 'ginp'}},{key:'KEY_SEARCHABLE_ROOMS',get:function(){return 'gsr'}},{key:'KEY_PLAYER_MATCH_EXP',get:function(){return 'gpme'}},{key:'KEY_SPECTATOR_MATCH_EXP',get:function(){return 'gsme'}},{key:'KEY_INVITATION_EXPIRY',get:function(){return 'gie'}},{key:'KEY_LEAVE_ROOM',get:function(){return 'glr'}},{key:'KEY_NOTIFY_GAME_STARTED',get:function(){return 'gns'}},{key:'KEY_INVITATION_PARAMS',get:function(){return 'ip'}}]),g(t,[{key:'validate',value:function(g){if(!(this._settings instanceof m.SFSGameSettings)){throw new f.SFSValidationError('CreateSFSGameRequest Error',['Room configuration must be an instance of SFSGameSettings class'])}var e=[];try{this._createRoomRequest.validate(g)}catch(o){e=o.getErrors()}if(this._settings.minPlayersToStartGame>this._settings.maxUsers&&e.push("Minimum number of players to start the game can't be greater than the Room's maximum number of users"),(this._settings.invitationExpiryTime<b.InviteUsersRequest.MIN_EXPIRY_TIME||this._settings.invitationExpiryTime>b.InviteUsersRequest.MAX_EXPIRY_TIME)&&e.push('Invitation expiration time value is out of range (min: '+b.InviteUsersRequest.MIN_EXPIRY_TIME+'; max: '+b.InviteUsersRequest.MAX_EXPIRY_TIME+')'),null!=this._settings.invitedPlayers&&(this._settings.invitedPlayers instanceof Array?(this._settings.invitedPlayers.length>b.InviteUsersRequest.MAX_INVITATIONS_FROM_CLIENT_SIDE&&e.push("Can't invite more than "+b.InviteUsersRequest.MAX_INVITATIONS_FROM_CLIENT_SIDE+' players from client side'),this._settings.invitedPlayers.every(function(b){return b instanceof j.SFSUser||b instanceof l.SFSBuddy})||e.push('Each invited player must be an instance of SFSUser or SFSBuddy classes')):e.push('Invited players must be passed in an array')),null==this._settings.playerMatchExpression||this._settings.playerMatchExpression instanceof d.MatchExpression||e.push('Player match expression must be an instance of MatchExpression class'),null==this._settings.spectatorMatchExpression||this._settings.spectatorMatchExpression instanceof d.MatchExpression||e.push('Spectator match expression must be an instance of MatchExpression class'),null==this._settings.invitationParams||this._settings.invitationParams instanceof k.SFSObject||e.push('Custom invitation parameters must be set in a SFSObject class instance'),e.length>0){throw new f.SFSValidationError('CreateSFSGameRequest Error',e)}}},{key:'execute',value:function(j){if(this._createRoomRequest.execute(j),this._reqObj=this._createRoomRequest._reqObj,this._reqObj.putBool(t.KEY_IS_PUBLIC,this._settings.isPublic),this._reqObj.putShort(t.KEY_MIN_PLAYERS,this._settings.minPlayersToStartGame),this._reqObj.putShort(t.KEY_INVITATION_EXPIRY,this._settings.invitationExpiryTime),this._reqObj.putBool(t.KEY_LEAVE_ROOM,this._settings.leaveLastJoinedRoom),this._reqObj.putBool(t.KEY_NOTIFY_GAME_STARTED,this._settings.notifyGameStarted),null!=this._settings.playerMatchExpression&&this._reqObj.putSFSArray(t.KEY_PLAYER_MATCH_EXP,this._settings.playerMatchExpression.toSFSArray()),null!=this._settings.spectatorMatchExpression&&this._reqObj.putSFSArray(t.KEY_SPECTATOR_MATCH_EXP,this._settings.spectatorMatchExpression.toSFSArray()),null!=this._settings.invitedPlayers){var f=[],d=!0,e=!1,g=void 0;try{for(var i,b=this._settings.invitedPlayers[Symbol.iterator]();!(d=(i=b.next()).done);d=!0){var k=i.value;f.push(k.id)}}catch(o){e=!0,g=o}finally{try{!d&&b['return']&&b['return']()}finally{if(e){throw g}}}this._reqObj.putIntArray(t.KEY_INVITED_PLAYERS,f)}null!=this._settings.searchableRooms&&this._reqObj.putUtfStringArray(t.KEY_SEARCHABLE_ROOMS,this._settings.searchableRooms),null!=this._settings.invitationParams&&this._reqObj.putSFSObject(t.KEY_INVITATION_PARAMS,this._settings.invitationParams)}}]),t}();c.CreateSFSGameRequest=h},function(g,a,c){Object.defineProperty(a,'__esModule',{value:!0}),a.BanUserRequest=void 0;var d=function(){function e(f,e){for(var d=0;d<e.length;d++){var b=e[d];b.enumerable=b.enumerable||!1,b.configurable=!0,'value' in b&&(b.writable=!0),Object.defineProperty(f,b.key,b)}}return function(b,d,f){return d&&e(b.prototype,d),f&&e(b,f),b}}(),b=c(2),e=c(1);var f=function(f){function t(e){var h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,j=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,k=arguments.length>4&&void 0!==arguments[4]?arguments[4]:24;!function(b,d){if(!(b instanceof d)){throw new TypeError('Cannot call a class as a function')}}(this,t);var d=function(d,b){if(!d){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !b||'object'!=typeof b&&'function'!=typeof b?d:b}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,b.Requests.BanUser));return d._userId=e,d._message=h,d._banMode=j,d._delay=i,d._durationHours=k,Object.seal(d),d}return function(d,b){if('function'!=typeof b&&null!==b){throw new TypeError('Super expression must either be null or a function, not '+typeof b)}d.prototype=Object.create(b&&b.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(d,b):d.__proto__=b)}(t,b.BaseRequest),d(t,null,[{key:'KEY_USER_ID',get:function(){return 'u'}},{key:'KEY_MESSAGE',get:function(){return 'm'}},{key:'KEY_DELAY',get:function(){return 'd'}},{key:'KEY_BAN_MODE',get:function(){return 'b'}},{key:'KEY_BAN_DURATION_HOURS',get:function(){return 'dh'}}]),d(t,[{key:'validate',value:function(d){var b=[];if(b.length>0){throw new e.SFSValidationError('BanUserRequest Error',b)}}},{key:'execute',value:function(b){this._reqObj.putInt(t.KEY_USER_ID,this._userId),this._reqObj.putInt(t.KEY_DELAY,this._delay),this._reqObj.putInt(t.KEY_BAN_MODE,this._banMode),this._reqObj.putInt(t.KEY_BAN_DURATION_HOURS,this._durationHours),null!=this._message&&this._message.length>0&&this._reqObj.putUtfString(t.KEY_MESSAGE,this._message)}}]),t}();a.BanUserRequest=f},function(g,a,c){Object.defineProperty(a,'__esModule',{value:!0}),a.KickUserRequest=void 0;var d=function(){function e(f,e){for(var d=0;d<e.length;d++){var b=e[d];b.enumerable=b.enumerable||!1,b.configurable=!0,'value' in b&&(b.writable=!0),Object.defineProperty(f,b.key,b)}}return function(b,d,f){return d&&e(b.prototype,d),f&&e(b,f),b}}(),b=c(2),e=c(1);var f=function(f){function t(h){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;!function(b,d){if(!(b instanceof d)){throw new TypeError('Cannot call a class as a function')}}(this,t);var d=function(d,b){if(!d){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !b||'object'!=typeof b&&'function'!=typeof b?d:b}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,b.Requests.KickUser));return e<0&&(e=0),d._userId=h,d._message=i,d._delay=e,Object.seal(d),d}return function(d,b){if('function'!=typeof b&&null!==b){throw new TypeError('Super expression must either be null or a function, not '+typeof b)}d.prototype=Object.create(b&&b.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(d,b):d.__proto__=b)}(t,b.BaseRequest),d(t,null,[{key:'KEY_USER_ID',get:function(){return 'u'}},{key:'KEY_MESSAGE',get:function(){return 'm'}},{key:'KEY_DELAY',get:function(){return 'd'}}]),d(t,[{key:'validate',value:function(d){var b=[];if(b.length>0){throw new e.SFSValidationError('KickUserRequest Error',b)}}},{key:'execute',value:function(b){this._reqObj.putInt(t.KEY_USER_ID,this._userId),this._reqObj.putInt(t.KEY_DELAY,this._delay),null!=this._message&&this._message.length>0&&this._reqObj.putUtfString(t.KEY_MESSAGE,this._message)}}]),t}();a.KickUserRequest=f},function(h,b,a){Object.defineProperty(b,'__esModule',{value:!0}),b.LeaveRoomRequest=void 0;var d=function(){function e(f,e){for(var d=0;d<e.length;d++){var c=e[d];c.enumerable=c.enumerable||!1,c.configurable=!0,'value' in c&&(c.writable=!0),Object.defineProperty(f,c.key,c)}}return function(c,d,f){return d&&e(c.prototype,d),f&&e(c,f),c}}(),c=a(2),f=a(1),g=a(10);var e=function(e){function t(){var f=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;!function(c,d){if(!(c instanceof d)){throw new TypeError('Cannot call a class as a function')}}(this,t);var d=function(d,c){if(!d){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !c||'object'!=typeof c&&'function'!=typeof c?d:c}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,c.Requests.LeaveRoom));return d._room=f,Object.seal(d),d}return function(d,c){if('function'!=typeof c&&null!==c){throw new TypeError('Super expression must either be null or a function, not '+typeof c)}d.prototype=Object.create(c&&c.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),c&&(Object.setPrototypeOf?Object.setPrototypeOf(d,c):d.__proto__=c)}(t,c.BaseRequest),d(t,null,[{key:'KEY_ROOM_ID',get:function(){return 'r'}}]),d(t,[{key:'validate',value:function(d){var c=[];if(d.getJoinedRooms().length<1&&c.push('You are not joined in any Room'),null==this._room||this._room instanceof g.SFSRoom||c.push('Room must be an instance of SFSRoom class'),c.length>0){throw new f.SFSValidationError('LeaveRoomRequest Error',c)}}},{key:'execute',value:function(c){null!=this._room&&this._reqObj.putInt(t.KEY_ROOM_ID,this._room.id)}}]),t}();b.LeaveRoomRequest=e},function(d,a,e){Object.defineProperty(a,'__esModule',{value:!0});var c=Object.freeze({NAME:'${N}',GROUP_ID:'${G}',MAX_USERS:'${MXU}',MAX_SPECTATORS:'${MXS}',USER_COUNT:'${UC}',SPECTATOR_COUNT:'${SC}',IS_GAME:'${ISG}',IS_PRIVATE:'${ISP}',HAS_FREE_PLAYER_SLOTS:'${HFP}',IS_TYPE_SFSGAME:'${IST}'}),b=Object.freeze({NAME:'${N}',IS_PLAYER:'${ISP}',IS_SPECTATOR:'${ISS}',IS_NPC:'${ISN}',PRIVILEGE_ID:'${PRID}',IS_IN_ANY_ROOM:'${IAR}'});a.RoomProperties=c,a.UserProperties=b},function(g,b,h){Object.defineProperty(b,'__esModule',{value:!0});var a=function(){function e(e,d){for(var c=0;c<d.length;c++){var a=d[c];a.enumerable=a.enumerable||!1,a.configurable=!0,'value' in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(a,c,d){return c&&e(a.prototype,c),d&&e(a,d),a}}();function i(c,a){if(!c){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !a||'object'!=typeof a&&'function'!=typeof a?c:a}function o(c,a){if('function'!=typeof a&&null!==a){throw new TypeError('Super expression must either be null or a function, not '+typeof a)}c.prototype=Object.create(a&&a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),a&&(Object.setPrototypeOf?Object.setPrototypeOf(c,a):c.__proto__=a)}function s(a,c){if(!(a instanceof c)){throw new TypeError('Cannot call a class as a function')}}var c=function(){function e(c,a){s(this,e),this._type=c,this._symbol=a,Object.freeze(this)}return a(e,[{key:'type',get:function(){return this._type}},{key:'symbol',get:function(){return this._symbol}}]),e}(),f=function(d){function t(c){s(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,0,c));return Object.freeze(a),a}return o(t,c),a(t,null,[{key:'EQUALS',get:function(){return new t('==')}},{key:'NOT_EQUALS',get:function(){return new t('!=')}}]),t}(),d=function(d){function t(c){s(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,1,c));return Object.freeze(a),a}return o(t,c),a(t,null,[{key:'EQUALS',get:function(){return new t('==')}},{key:'NOT_EQUALS',get:function(){return new t('!=')}},{key:'GREATER_THAN',get:function(){return new t('>')}},{key:'GREATER_THAN_OR_EQUAL_TO',get:function(){return new t('>=')}},{key:'LESS_THAN',get:function(){return new t('<')}},{key:'LESS_THAN_OR_EQUAL_TO',get:function(){return new t('<=')}}]),t}(),e=function(d){function t(c){s(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,2,c));return Object.freeze(a),a}return o(t,c),a(t,null,[{key:'EQUALS',get:function(){return new t('==')}},{key:'NOT_EQUALS',get:function(){return new t('!=')}},{key:'CONTAINS',get:function(){return new t('contains')}},{key:'STARTS_WITH',get:function(){return new t('startsWith')}},{key:'ENDS_WITH',get:function(){return new t('endsWith')}}]),t}();b.BoolMatch=f,b.NumberMatch=d,b.StringMatch=e},function(f,a,c){Object.defineProperty(a,'__esModule',{value:!0}),a.PingPongRequest=void 0;var e=function(){function e(g,e){for(var d=0;d<e.length;d++){var b=e[d];b.enumerable=b.enumerable||!1,b.configurable=!0,'value' in b&&(b.writable=!0),Object.defineProperty(g,b.key,b)}}return function(b,d,g){return d&&e(b.prototype,d),g&&e(b,g),b}}(),b=c(2);var d=function(d){function t(){!function(b,e){if(!(b instanceof e)){throw new TypeError('Cannot call a class as a function')}}(this,t);var e=function(e,b){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !b||'object'!=typeof b&&'function'!=typeof b?e:b}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,b.Requests.PingPong));return Object.seal(e),e}return function(e,b){if('function'!=typeof b&&null!==b){throw new TypeError('Super expression must either be null or a function, not '+typeof b)}e.prototype=Object.create(b&&b.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(e,b):e.__proto__=b)}(t,b.BaseRequest),e(t,[{key:'validate',value:function(b){}},{key:'execute',value:function(b){}}]),t}();a.PingPongRequest=d},function(f,a,c){Object.defineProperty(a,'__esModule',{value:!0}),a.LagMonitor=void 0;var e=function(){function e(g,e){for(var d=0;d<e.length;d++){var b=e[d];b.enumerable=b.enumerable||!1,b.configurable=!0,'value' in b&&(b.writable=!0),Object.defineProperty(g,b.key,b)}}return function(b,d,g){return d&&e(b.prototype,d),g&&e(b,g),b}}(),b=c(159);var d=function(){function e(g){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;!function(b,d){if(!(b instanceof d)){throw new TypeError('Cannot call a class as a function')}}(this,e),this._sfs=g,this._valueQueue=[],this._interval=b,this._queueSize=d,this._thread=null,this._lastReqTime=-1}return e(e,[{key:'start',value:function(){this.isRunning||null==this._sfs||(this._thread=setInterval(this._threadRunner,1000*this._interval,this))}},{key:'stop',value:function(){this.isRunning&&(clearInterval(this._thread),this._thread=null,this._valueQueue=[])}},{key:'destroy',value:function(){this.stop(),this._sfs=null}},{key:'getLastPingTime',value:function(){return this._valueQueue.length>0?this._valueQueue[this._valueQueue.length-1]:0}},{key:'_threadRunner',value:function(d){d._lastReqTime=(new Date()).getTime(),d._sfs.send(new b.PingPongRequest())}},{key:'_onPingPong',value:function(){var b=(new Date()).getTime()-this._lastReqTime;return this._valueQueue.length>=this._queueSize&&this._valueQueue.shift(),this._valueQueue.push(b),this._getAveragePingTime()}},{key:'_getAveragePingTime',value:function(){if(0==this._valueQueue.length){return 0}for(var d=0,b=0;b<this._valueQueue.length;b++){d+=this._valueQueue[b]}return d/this._valueQueue.length}},{key:'isRunning',get:function(){return null!=this._thread}}]),e}();a.LagMonitor=d},function(f,a,d){Object.defineProperty(a,'__esModule',{value:!0}),a.HandshakeRequest=void 0;var c=function(){function e(g,e){for(var c=0;c<e.length;c++){var b=e[c];b.enumerable=b.enumerable||!1,b.configurable=!0,'value' in b&&(b.writable=!0),Object.defineProperty(g,b.key,b)}}return function(b,c,g){return c&&e(b.prototype,c),g&&e(b,g),b}}(),b=d(2);var e=function(e){function t(g,h){!function(b,c){if(!(b instanceof c)){throw new TypeError('Cannot call a class as a function')}}(this,t);var c=function(c,b){if(!c){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !b||'object'!=typeof b&&'function'!=typeof b?c:b}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,b.Requests.Handshake));return c._apiVersion=g,c._clientDetails=h,Object.seal(c),c}return function(c,b){if('function'!=typeof b&&null!==b){throw new TypeError('Super expression must either be null or a function, not '+typeof b)}c.prototype=Object.create(b&&b.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(c,b):c.__proto__=b)}(t,b.BaseRequest),c(t,null,[{key:'KEY_SESSION_TOKEN',get:function(){return 'tk'}},{key:'KEY_API',get:function(){return 'api'}},{key:'KEY_COMPRESSION_THRESHOLD',get:function(){return 'ct'}},{key:'KEY_CLIENT_TYPE',get:function(){return 'cl'}},{key:'KEY_MAX_MESSAGE_SIZE',get:function(){return 'ms'}}]),c(t,[{key:'validate',value:function(b){}},{key:'execute',value:function(b){this._reqObj.putUtfString(t.KEY_API,this._apiVersion),this._reqObj.putUtfString(t.KEY_CLIENT_TYPE,this._clientDetails)}}]),t}();a.HandshakeRequest=e},function(f,b,c){Object.defineProperty(b,'__esModule',{value:!0}),b.SFSBuddyManager=void 0;var e=function(){function e(g,e){for(var d=0;d<e.length;d++){var a=e[d];a.enumerable=a.enumerable||!1,a.configurable=!0,'value' in a&&(a.writable=!0),Object.defineProperty(g,a.key,a)}}return function(a,d,g){return d&&e(a.prototype,d),g&&e(a,g),a}}(),a=c(46);var d=function(){function e(a){!function(d,e){if(!(d instanceof e)){throw new TypeError('Cannot call a class as a function')}}(this,e),this._sfs=a,this._buddiesByName=new Map(),this._myVariables=new Map(),this._inited=!1,this._buddyStates=new Set(),Object.seal(this)}return e(e,[{key:'containsBuddy',value:function(a){return this._buddiesByName.has(a)}},{key:'getBuddyById',value:function(a){return this.getBuddyList().find(function(d){return d.id===a})}},{key:'getBuddyByName',value:function(a){return this._buddiesByName.get(a)}},{key:'getBuddyByNickName',value:function(a){return this.getBuddyList().find(function(d){return d.nickName===a})}},{key:'getOfflineBuddies',value:function(){return this.getBuddyList().filter(function(a){return !a.isOnline})}},{key:'getOnlineBuddies',value:function(){return this.getBuddyList().filter(function(a){return a.isOnline})}},{key:'getBuddyList',value:function(){return Array.from(this._buddiesByName.values())}},{key:'getMyVariable',value:function(a){return this._myVariables.get(a)}},{key:'getMyVariables',value:function(){return Array.from(this._myVariables.values())}},{key:'getMyOnlineState',value:function(){if(!this._inited){return !1}var d=this.getMyVariable(a.ReservedBuddyVariables.BV_ONLINE);return null==d||d.value}},{key:'getMyNickName',value:function(){var d=this.getMyVariable(a.ReservedBuddyVariables.BV_NICKNAME);return null!=d?d.value:null}},{key:'getMyState',value:function(){var d=this.getMyVariable(a.ReservedBuddyVariables.BV_STATE);return null!=d?d.value:null}},{key:'getBuddyStates',value:function(){return Array.from(this._buddyStates.values())}},{key:'_setInited',value:function(){this._inited=!0}},{key:'_addBuddy',value:function(a){this._buddiesByName.set(a.name,a)}},{key:'_clearAll',value:function(){this._buddiesByName.clear()}},{key:'_removeBuddyById',value:function(d){var a=this.getBuddyById(d);return null!=a&&this._buddiesByName['delete'](a.name),a}},{key:'_removeBuddyByName',value:function(a){var d=this.getBuddyByName(a);return null!=d&&this._buddiesByName['delete'](a),d}},{key:'_setMyVariables',value:function(i){var d=!0,g=!1,h=void 0;try{for(var e,a=i[Symbol.iterator]();!(d=(e=a.next()).done);d=!0){var j=e.value;this._setMyVariable(j)}}catch(k){g=!0,h=k}finally{try{!d&&a['return']&&a['return']()}finally{if(g){throw h}}}}},{key:'_setMyVariable',value:function(a){a.isNull?this._myVariables['delete'](a.name):this._myVariables.set(a.name,a)}},{key:'_setMyOnlineState',value:function(d){this._setMyVariable(new a.SFSBuddyVariable(a.ReservedBuddyVariables.BV_ONLINE,d))}},{key:'_setMyNickName',value:function(d){this._setMyVariable(new a.SFSBuddyVariable(a.ReservedBuddyVariables.BV_NICKNAME,d))}},{key:'_setMyState',value:function(d){this._setMyVariable(new a.SFSBuddyVariable(a.ReservedBuddyVariables.BV_STATE,d))}},{key:'_setBuddyStates',value:function(a){this._buddyStates=new Set(a)}},{key:'isInited',get:function(){return this._inited}}]),e}();b.SFSBuddyManager=d},function(d,a,e){Object.defineProperty(a,'__esModule',{value:!0});var c=function(){function e(g,f){for(var c=0;c<f.length;c++){var b=f[c];b.enumerable=b.enumerable||!1,b.configurable=!0,'value' in b&&(b.writable=!0),Object.defineProperty(g,b.key,b)}}return function(b,c,f){return c&&e(b.prototype,c),f&&e(b,f),b}}();var b=function(){function e(b){!function(c,f){if(!(c instanceof f)){throw new TypeError('Cannot call a class as a function')}}(this,e),this._sfs=b,this._groups=new Set(),this._roomsById=new Map(),this._roomsByName=new Map(),Object.seal(this)}return c(e,[{key:'getRoomGroups',value:function(){return Array.from(this._groups)}},{key:'containsGroup',value:function(b){return this._groups.has(b)}},{key:'containsRoom',value:function(b){return 'number'==typeof b?this._roomsById.has(b):this._roomsByName.has(b)}},{key:'containsRoomInGroup',value:function(b,f){var c=this.getRoomListFromGroup(f);return 'number'==typeof b?c.some(function(c){return c.id===b}):c.some(function(c){return c.name===b})}},{key:'getRoomById',value:function(b){return this._roomsById.get(b)}},{key:'getRoomByName',value:function(b){return this._roomsByName.get(b)}},{key:'getRoomList',value:function(){return Array.from(this._roomsById.values())}},{key:'getRoomCount',value:function(){return this._roomsById.size}},{key:'getRoomListFromGroup',value:function(b){return this.getRoomList().filter(function(c){return c.groupId===b})}},{key:'getJoinedRooms',value:function(){return this.getRoomList().filter(function(b){return b.isJoined})}},{key:'getUserRooms',value:function(b){return this.getRoomList().filter(function(c){return c.containsUser(b)})}},{key:'_addRoom',value:function(b){var c=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this._roomsById.set(b.id,b),this._roomsByName.set(b.name,b),b._setRoomManager(this),c?this.containsGroup(b.groupId)||this._addGroup(b.groupId):b._isManaged=!1}},{key:'_replaceRoom',value:function(b){var f=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],c=this.getRoomById(b.id);return null!=c?(c._merge(b),c):(this._addRoom(b,f),b)}},{key:'_removeRoom',value:function(b){this._roomsById['delete'](b.id),this._roomsByName['delete'](b.name)}},{key:'_removeRoomById',value:function(c){var b=this.getRoomById(c);null!=b&&this._removeRoom(b)}},{key:'_removeRoomByName',value:function(c){var b=this.getRoomByName(c);null!=b&&this._removeRoom(b)}},{key:'_changeRoomName',value:function(b,c){var f=b.name;b._name=c,this._roomsByName.set(c,b),this._roomsByName['delete'](f)}},{key:'_changeRoomPasswordState',value:function(b,c){b._isPasswordProtected=c}},{key:'_changeRoomCapacity',value:function(b,f,c){b._maxUsers=f,b._maxSpectators=c}},{key:'_addGroup',value:function(b){this._groups.add(b)}},{key:'_removeGroup',value:function(g){this._groups['delete'](g);var k=this.getRoomListFromGroup(g),c=!0,j=!1,h=void 0;try{for(var i,f=k[Symbol.iterator]();!(c=(i=f.next()).done);c=!0){var b=i.value;b.isJoined?b._isManaged=!1:this._removeRoom(b)}}catch(l){j=!0,h=l}finally{try{!c&&f['return']&&f['return']()}finally{if(j){throw h}}}}},{key:'_removeUser',value:function(f){var c=!0,h=!1,i=void 0;try{for(var g,b=this.getUserRooms(f)[Symbol.iterator]();!(c=(g=b.next()).done);c=!0){g.value._removeUser(f)}}catch(j){h=!0,i=j}finally{try{!c&&b['return']&&b['return']()}finally{if(h){throw i}}}}}]),e}();a.SFSRoomManager=b},function(a,b){(function(){function e(c){throw c}var k=void 0,d=!0,ab=this;function i(g,f){var d,e=g.split('.'),c=ab;!(e[0] in c)&&c.execScript&&c.execScript('var '+e[0]);for(;e.length&&(d=e.shift());){e.length||f===k?c=c[d]?c[d]:c[d]={}:c[d]=f}}var c='undefined'!=typeof Uint8Array&&'undefined'!=typeof Uint16Array&&'undefined'!=typeof Uint32Array&&'undefined'!=typeof DataView;function s(f,d){this.index='number'==typeof d?d:0,this.i=0,this.buffer=f instanceof (c?Uint8Array:Array)?f:new (c?Uint8Array:Array)(32768),2*this.buffer.length<=this.index&&e(Error('invalid index')),this.buffer.length<=this.index&&this.f()}s.prototype.f=function(){var d,f=this.buffer,g=f.length,e=new (c?Uint8Array:Array)(g<<1);if(c){e.set(f)}else {for(d=0;d<g;++d){e[d]=f[d]}}return this.buffer=e},s.prototype.d=function(d,c,k){var j,f=this.buffer,g=this.index,i=this.i,e=f[g];if(k&&1<c&&(d=8<c?(h[255&d]<<24|h[d>>>8&255]<<16|h[d>>>16&255]<<8|h[d>>>24&255])>>32-c:h[d]>>8-c),8>c+i){e=e<<c|d,i+=c}else {for(j=0;j<c;++j){e=e<<1|d>>c-j-1&1,8==++i&&(i=0,f[g++]=h[e],e=0,g===f.length&&(f=this.f()))}}f[g]=e,this.buffer=f,this.i=i,this.index=g},s.prototype.finish=function(){var f,e=this.buffer,d=this.index;return 0<this.i&&(e[d]<<=8-this.i,e[d]=h[e[d]],d++),c?f=e.subarray(0,d):(e.length=d,f=e),f};var m,V=new (c?Uint8Array:Array)(256);for(m=0;256>m;++m){for(var B=o=m,T=7,o=o>>>1;o;o>>>=1){B<<=1,B|=1&o,--T}V[m]=(B<<T&255)>>>0}var h=V;function _(d){this.buffer=new (c?Uint16Array:Array)(2*d),this.length=0}function y(f){var m,k,g,j,l,i,n,d,e,p,q=f.length,h=0,o=Number.POSITIVE_INFINITY;for(d=0;d<q;++d){f[d]>h&&(h=f[d]),f[d]<o&&(o=f[d])}for(m=1<<h,k=new (c?Uint32Array:Array)(m),g=1,j=0,l=2;g<=h;){for(d=0;d<q;++d){if(f[d]===g){for(i=0,n=j,e=0;e<g;++e){i=i<<1|1&n,n>>=1}for(p=g<<16|d,e=i;e<m;e+=l){k[e]=p}++j}}++g,j<<=1,l<<=1}return [k,h,o]}function p(e,d){this.h=u,this.w=0,this.input=c&&e instanceof Array?new Uint8Array(e):e,this.b=0,d&&(d.lazy&&(this.w=d.lazy),'number'==typeof d.compressionType&&(this.h=d.compressionType),d.outputBuffer&&(this.a=c&&d.outputBuffer instanceof Array?new Uint8Array(d.outputBuffer):d.outputBuffer),'number'==typeof d.outputIndex&&(this.b=d.outputIndex)),this.a||(this.a=new (c?Uint8Array:Array)(32768))}_.prototype.getParent=function(c){return 2*((c-2)/4|0)},_.prototype.push=function(g,h){var d,e,f,c=this.buffer;for(d=this.length,c[this.length++]=h,c[this.length++]=g;0<d&&(e=this.getParent(d),c[d]>c[e]);){f=c[d],c[d]=c[e],c[e]=f,f=c[d+1],c[d+1]=c[e+1],c[e+1]=f,d=e}return this.length},_.prototype.pop=function(){var g,h,f,d,e,c=this.buffer;for(h=c[0],g=c[1],this.length-=2,c[0]=c[this.length],c[1]=c[this.length+1],e=0;!((d=2*e+2)>=this.length)&&(d+2<this.length&&c[d+2]>c[d]&&(d+=2),c[d]>c[e]);){f=c[e],c[e]=c[d],c[d]=f,f=c[e+1],c[e+1]=c[d+1],c[d+1]=f,e=d}return {index:g,value:h,length:this.length}};var f,u=2,ac={NONE:0,r:1,k:u,O:3},n=[];for(f=0;288>f;f++){switch(d){case 143>=f:n.push([f+48,8]);break;case 255>=f:n.push([f-144+400,9]);break;case 279>=f:n.push([f-256+0,7]);break;case 287>=f:n.push([f-280+192,8]);break;default:e('invalid literal: '+f);}}p.prototype.j=function(){var R,al,B,W,K=this.input;switch(this.h){case 0:for(B=0,W=K.length;B<W;){var am,U,V,H=al=c?K.subarray(B,B+65535):K.slice(B,B+65535),ap=(B+=al.length)===W,Q=k,ak=k,h=this.a,o=this.b;if(c){for(h=new Uint8Array(this.a.buffer);h.length<=o+H.length+5;){h=new Uint8Array(h.length<<1)}h.set(this.a)}if(am=ap?1:0,h[o++]=0|am,V=65536+~(U=H.length)&65535,h[o++]=255&U,h[o++]=U>>>8&255,h[o++]=255&V,h[o++]=V>>>8&255,c){h.set(H,o),o+=H.length,h=h.subarray(0,o)}else {for(Q=0,ak=H.length;Q<ak;++Q){h[o++]=H[Q]}h.length=o}this.b=o,this.a=h};break;case 1:var y=new s(c?new Uint8Array(this.a.buffer):this.a,this.b);y.d(1,1,d),y.d(1,2,d);var w,an,M,z=E(this,K);for(w=0,an=z.length;w<an;w++){if(M=z[w],s.prototype.d.apply(y,n[M]),256<M){y.d(z[++w],z[++w],d),y.d(z[++w],5),y.d(z[++w],z[++w],d)}else {if(256===M){break}}};this.a=y.finish(),this.b=this.a.length;break;case u:var ag,x,G,D,F,P,ah,L,af,N,aj,C,S,i,ai,j=new s(c?new Uint8Array(this.a.buffer):this.a,this.b),ao=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],X=Array(19);for(ag=u,j.d(1,1,d),j.d(ag,2,d),x=E(this,K),ah=A(P=O(this.M,15)),af=A(L=O(this.L,7)),G=286;257<G&&0===P[G-1];G--){};for(D=30;1<D&&0===L[D-1];D--){};var f,v,g,J,m,l,ae=G,$=D,q=new (c?Uint32Array:Array)(ae+$),p=new (c?Uint32Array:Array)(316),t=new (c?Uint8Array:Array)(19);for(f=v=0;f<ae;f++){q[v++]=P[f]};for(f=0;f<$;f++){q[v++]=L[f]};if(!c){for(f=0,J=t.length;f<J;++f){t[f]=0}};for(f=m=0,J=q.length;f<J;f+=v){for(v=1;f+v<J&&q[f+v]===q[f];++v){}if(g=v,0===q[f]){if(3>g){for(;0<g--;){p[m++]=0,t[0]++}}else {for(;0<g;){(l=138>g?g:138)>g-3&&l<g&&(l=g-3),10>=l?(p[m++]=17,p[m++]=l-3,t[17]++):(p[m++]=18,p[m++]=l-11,t[18]++),g-=l}}}else {if(p[m++]=q[f],t[q[f]]++,3>--g){for(;0<g--;){p[m++]=q[f],t[q[f]]++}}else {for(;0<g;){(l=6>g?g:6)>g-3&&l<g&&(l=g-3),p[m++]=16,p[m++]=l-3,t[16]++,g-=l}}}};for(R=c?p.subarray(0,m):p.slice(0,m),N=O(t,7),i=0;19>i;i++){X[i]=N[ao[i]]};for(F=19;4<F&&0===X[F-1];F--){};for(aj=A(N),j.d(G-257,5,d),j.d(D-1,5,d),j.d(F-4,4,d),i=0;i<F;i++){j.d(X[i],3,d)};for(i=0,ai=R.length;i<ai;i++){if(C=R[i],j.d(aj[C],N[C],d),16<=C){switch(i++,C){case 16:S=2;break;case 17:S=3;break;case 18:S=7;break;default:e('invalid code: '+C);}j.d(R[i],S,d)}};var r,ac,I,T,ad,Z,ab,_,aa=[ah,P],Y=[af,L];for(ad=aa[0],Z=aa[1],ab=Y[0],_=Y[1],r=0,ac=x.length;r<ac;++r){if(I=x[r],j.d(ad[I],Z[I],d),256<I){j.d(x[++r],x[++r],d),T=x[++r],j.d(ab[T],_[T],d),j.d(x[++r],x[++r],d)}else {if(256===I){break}}};this.a=j.finish(),this.b=this.a.length;break;default:e('invalid compression type');}return this.a};var U=function(){function t(c){switch(d){case 3===c:return [257,c-3,0];case 4===c:return [258,c-4,0];case 5===c:return [259,c-5,0];case 6===c:return [260,c-6,0];case 7===c:return [261,c-7,0];case 8===c:return [262,c-8,0];case 9===c:return [263,c-9,0];case 10===c:return [264,c-10,0];case 12>=c:return [265,c-11,1];case 14>=c:return [266,c-13,1];case 16>=c:return [267,c-15,1];case 18>=c:return [268,c-17,1];case 22>=c:return [269,c-19,2];case 26>=c:return [270,c-23,2];case 30>=c:return [271,c-27,2];case 34>=c:return [272,c-31,2];case 42>=c:return [273,c-35,3];case 50>=c:return [274,c-43,3];case 58>=c:return [275,c-51,3];case 66>=c:return [276,c-59,3];case 82>=c:return [277,c-67,4];case 98>=c:return [278,c-83,4];case 114>=c:return [279,c-99,4];case 130>=c:return [280,c-115,4];case 162>=c:return [281,c-131,5];case 194>=c:return [282,c-163,5];case 226>=c:return [283,c-195,5];case 257>=c:return [284,c-227,5];case 258===c:return [285,c-258,0];default:e('invalid length: '+c);}}var c,f,g=[];for(c=3;258>=c;c++){f=t(c),g[c]=f[2]<<24|f[1]<<16|f[0]}return g}(),aa=c?new Uint32Array(U):U;function E(w,n){function s(o,r){var h,f,m,p,c=o.H,g=[],k=0;switch(h=aa[o.length],g[k++]=65535&h,g[k++]=h>>16&255,g[k++]=h>>24,d){case 1===c:f=[0,c-1,0];break;case 2===c:f=[1,c-2,0];break;case 3===c:f=[2,c-3,0];break;case 4===c:f=[3,c-4,0];break;case 6>=c:f=[4,c-5,1];break;case 8>=c:f=[5,c-7,1];break;case 12>=c:f=[6,c-9,2];break;case 16>=c:f=[7,c-13,2];break;case 24>=c:f=[8,c-17,3];break;case 32>=c:f=[9,c-25,3];break;case 48>=c:f=[10,c-33,4];break;case 64>=c:f=[11,c-49,4];break;case 96>=c:f=[12,c-65,5];break;case 128>=c:f=[13,c-97,5];break;case 192>=c:f=[14,c-129,6];break;case 256>=c:f=[15,c-193,6];break;case 384>=c:f=[16,c-257,7];break;case 512>=c:f=[17,c-385,7];break;case 768>=c:f=[18,c-513,8];break;case 1024>=c:f=[19,c-769,8];break;case 1536>=c:f=[20,c-1025,9];break;case 2048>=c:f=[21,c-1537,9];break;case 3072>=c:f=[22,c-2049,10];break;case 4096>=c:f=[23,c-3073,10];break;case 6144>=c:f=[24,c-4097,11];break;case 8192>=c:f=[25,c-6145,11];break;case 12288>=c:f=[26,c-8193,12];break;case 16384>=c:f=[27,c-12289,12];break;case 24576>=c:f=[28,c-16385,13];break;case 32768>=c:f=[29,c-24577,13];break;default:e('invalid distance');}for(h=f,g[k++]=h[0],g[k++]=h[1],g[k++]=h[2],m=0,p=g.length;m<p;++m){l[q++]=g[m]}j[g[0]]++,u[g[3]]++,x=o.length+r-1,i=null}var g,r,f,t,p,m,o,i,h,v={},l=c?new Uint16Array(2*n.length):[],q=0,x=0,j=new (c?Uint32Array:Array)(286),u=new (c?Uint32Array:Array)(30),y=w.w;if(!c){for(f=0;285>=f;){j[f++]=0}for(f=0;29>=f;){u[f++]=0}}for(j[256]=1,g=0,r=n.length;g<r;++g){for(f=p=0,t=3;f<t&&g+f!==r;++f){p=p<<8|n[g+f]}if(v[p]===k&&(v[p]=[]),m=v[p],!(0<x--)){for(;0<m.length&&32768<g-m[0];){m.shift()}if(g+3>=r){for(i&&s(i,-1),f=0,t=r-g;f<t;++f){h=n[g+f],l[q++]=h,++j[h]}break}0<m.length?(o=R(n,g,m),i?i.length<o.length?(h=n[g-1],l[q++]=h,++j[h],s(o,0)):s(i,-1):o.length<y?i=o:s(o,0)):i?s(i,-1):(h=n[g],l[q++]=h,++j[h])}m.push(g)}return l[q++]=256,j[256]++,w.M=j,w.L=u,c?l.subarray(0,q):l}function R(f,i,l){var g,k,c,h,e,j,d=0,m=f.length;h=0,j=l.length;n: for(;h<j;h++){if(g=l[j-h-1],c=3,3<d){for(e=d;3<e;e--){if(f[g+e-1]!==f[i+e-1]){continue n}}c=d}for(;258>c&&i+c<m&&f[g+c]===f[i+c];){++c}if(c>d&&(k=g,d=c),258===c){break}}return new function(c,d){this.length=c,this.H=d}(d,i-k)}function O(j,m){var f,i,l,d,h,k=j.length,e=new _(572),g=new (c?Uint8Array:Array)(k);if(!c){for(d=0;d<k;d++){g[d]=0}}for(d=0;d<k;++d){0<j[d]&&e.push(d,j[d])}if(f=Array(e.length/2),i=new (c?Uint32Array:Array)(e.length/2),1===f.length){return g[e.pop().index]=1,g}for(d=0,h=e.length/2;d<h;++d){f[d]=e.pop(),i[d]=f[d].value}for(l=function(t,l,e){function r(c){var d=o[c][n[c]];d===l?(r(c+1),r(c+1)):--q[d],++n[c]}var h,d,f,u,p,g=new (c?Uint16Array:Array)(e),k=new (c?Uint8Array:Array)(e),q=new (c?Uint8Array:Array)(l),i=Array(e),o=Array(e),n=Array(e),s=(1<<e)-l,v=1<<e-1;for(g[e-1]=l,d=0;d<e;++d){s<v?k[d]=0:(k[d]=1,s-=v),s<<=1,g[e-2-d]=(g[e-1-d]/2|0)+l}for(g[0]=k[0],i[0]=Array(g[0]),o[0]=Array(g[0]),d=1;d<e;++d){g[d]>2*g[d-1]+k[d]&&(g[d]=2*g[d-1]+k[d]),i[d]=Array(g[d]),o[d]=Array(g[d])}for(h=0;h<l;++h){q[h]=e}for(f=0;f<g[e-1];++f){i[e-1][f]=t[f],o[e-1][f]=f}for(h=0;h<e;++h){n[h]=0}for(1===k[e-1]&&(--q[0],++n[e-1]),d=e-2;0<=d;--d){for(u=h=0,p=n[d+1],f=0;f<g[d];f++){(u=i[d+1][p]+i[d+1][p+1])>t[h]?(i[d][f]=u,o[d][f]=l,p+=2):(i[d][f]=t[h],o[d][f]=h,++h)}n[d]=0,1===k[d]&&r(d)}return q}(i,i.length,m),d=0,h=f.length;d<h;++d){g[f[d].index]=l[d]}return g}function A(e){var d,g,j,l,h=new (c?Uint16Array:Array)(e.length),i=[],k=[],f=0;for(d=0,g=e.length;d<g;d++){i[e[d]]=1+(0|i[e[d]])}for(d=1,g=16;d<=g;d++){k[d]=f,f+=0|i[d],f<<=1}for(d=0,g=e.length;d<g;d++){for(f=k[e[d]],k[e[d]]+=1,j=h[d]=0,l=e[d];j<l;j++){h[d]=h[d]<<1|1&f,f>>>=1}}return h}function w(f,d){switch(this.l=[],this.m=32768,this.e=this.g=this.c=this.q=0,this.input=c?new Uint8Array(f):f,this.s=!1,this.n=r,this.C=!1,!d&&(d={})||(d.index&&(this.c=d.index),d.bufferSize&&(this.m=d.bufferSize),d.bufferType&&(this.n=d.bufferType),d.resize&&(this.C=d.resize)),this.n){case x:this.b=32768,this.a=new (c?Uint8Array:Array)(32768+this.m+258);break;case r:this.b=0,this.a=new (c?Uint8Array:Array)(this.m),this.f=this.K,this.t=this.I,this.o=this.J;break;default:e(Error('invalid inflate mode'));}}var x=0,r=1,L={F:x,D:r};w.prototype.p=function(){for(;!this.s;){var m=J(this,3);switch(1&m&&(this.s=d),m>>>=1){case 0:var i=this.input,f=this.c,h=this.a,g=this.b,n=i.length,j=k,o=h.length,l=k;switch(this.e=this.g=0,f+1>=n&&e(Error('invalid uncompressed block header: LEN')),j=i[f++]|i[f++]<<8,f+1>=n&&e(Error('invalid uncompressed block header: NLEN')),j===~(i[f++]|i[f++]<<8)&&e(Error('invalid uncompressed block header: length verify')),f+j>i.length&&e(Error('input buffer is broken')),this.n){case x:for(;g+j>h.length;){if(j-=l=o-g,c){h.set(i.subarray(f,f+l),g),g+=l,f+=l}else {for(;l--;){h[g++]=i[f++]}}this.b=g,h=this.f(),g=this.b};break;case r:for(;g+j>h.length;){h=this.f({v:2})};break;default:e(Error('invalid inflate mode'));};if(c){h.set(i.subarray(f,f+j),g),g+=j,f+=j}else {for(;j--;){h[g++]=i[f++]}};this.c=f,this.b=g,this.a=h;break;case 1:this.o(Y,$);break;case 2:X(this);break;default:e(Error('unknown BTYPE: '+m));}}return this.t()};var j,M,H=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],z=c?new Uint16Array(H):H,S=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258],N=c?new Uint16Array(S):S,G=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0],q=c?new Uint8Array(G):G,K=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],P=c?new Uint16Array(K):K,F=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],v=c?new Uint8Array(F):F,C=new (c?Uint8Array:Array)(288);for(j=0,M=C.length;j<M;++j){C[j]=143>=j?8:255>=j?9:279>=j?7:8}var t,I,Y=y(C),D=new (c?Uint8Array:Array)(30);for(t=0,I=D.length;t<I;++t){D[t]=5}var $=y(D);function J(c,d){for(var i,h=c.g,f=c.e,j=c.input,g=c.c,k=j.length;f<d;){g>=k&&e(Error('input buffer is broken')),h|=j[g++]<<f,f+=8}return i=h&(1<<d)-1,c.g=h>>>d,c.e=f-d,c.c=g,i}function W(c,k){for(var i,g,f=c.g,d=c.e,j=c.input,e=c.c,m=j.length,l=k[0],h=k[1];d<h&&!(e>=m);){f|=j[e++]<<d,d+=8}return g=(i=l[f&(1<<h)-1])>>>16,c.g=f>>g,c.e=d-g,c.c=e,65535&i}function X(d){function t(i,j,f){var h,c,e,g=this.z;for(e=0;e<i;){switch(h=W(this,j),h){case 16:for(c=3+J(this,2);c--;){f[e++]=g};break;case 17:for(c=3+J(this,3);c--;){f[e++]=0};g=0;break;case 18:for(c=11+J(this,7);c--;){f[e++]=0};g=0;break;default:g=f[e++]=h;}}return this.z=g,f}var h,k,j,e,i=J(d,5)+257,l=J(d,5)+1,f=J(d,4)+4,g=new (c?Uint8Array:Array)(z.length);for(e=0;e<f;++e){g[z[e]]=J(d,3)}if(!c){for(e=f,f=g.length;e<f;++e){g[z[e]]=0}}h=y(g),k=new (c?Uint8Array:Array)(i),j=new (c?Uint8Array:Array)(l),d.z=0,d.o(y(t.call(d,i,h,k)),y(t.call(d,l,h,j)))}function Z(c){if('string'==typeof c){var d,j,f=c.split('');for(d=0,j=f.length;d<j;d++){f[d]=(255&f[d].charCodeAt(0))>>>0}c=f}for(var i,g=1,h=0,e=c.length,k=0;0<e;){e-=i=1024<e?1024:e;do{h+=g+=c[k++]}while(--i);g%=65521,h%=65521}return (h<<16|g)>>>0}function Q(g,c){var f,d;switch(this.input=g,this.c=0,!c&&(c={})||(c.index&&(this.c=c.index),c.verify&&(this.N=c.verify)),f=g[this.c++],d=g[this.c++],15&f){case l:this.method=l;break;default:e(Error('unsupported compression method'));}0!=((f<<8)+d)%31&&e(Error('invalid fcheck flag:'+((f<<8)+d)%31)),32&d&&e(Error('fdict flag is not supported')),this.B=new w(g,{index:this.c,bufferSize:c.bufferSize,bufferType:c.bufferType,resize:c.resize})}w.prototype.o=function(i,k){var e=this.a,c=this.b;this.u=i;for(var d,g,h,f,j=e.length-258;256!==(d=W(this,i));){if(256>d){c>=j&&(this.b=c,e=this.f(),c=this.b),e[c++]=d}else {for(f=N[g=d-257],0<q[g]&&(f+=J(this,q[g])),d=W(this,k),h=P[d],0<v[d]&&(h+=J(this,v[d])),c>=j&&(this.b=c,e=this.f(),c=this.b);f--;){e[c]=e[c++-h]}}}for(;8<=this.e;){this.e-=8,this.c--}this.b=c},w.prototype.J=function(j,k){var d=this.a,e=this.b;this.u=j;for(var c,h,i,f,g=d.length;256!==(c=W(this,j));){if(256>c){e>=g&&(g=(d=this.f()).length),d[e++]=c}else {for(f=N[h=c-257],0<q[h]&&(f+=J(this,q[h])),c=W(this,k),i=P[c],0<v[c]&&(i+=J(this,v[c])),e+f>g&&(g=(d=this.f()).length);f--;){d[e]=d[e++-i]}}}for(;8<=this.e;){this.e-=8,this.c--}this.b=e},w.prototype.f=function(){var d,h,f=new (c?Uint8Array:Array)(this.b-32768),g=this.b-32768,e=this.a;if(c){f.set(e.subarray(32768,f.length))}else {for(d=0,h=f.length;d<h;++d){f[d]=e[d+32768]}}if(this.l.push(f),this.q+=f.length,c){e.set(e.subarray(g,g+32768))}else {for(d=0;32768>d;++d){e[d]=e[g+d]}}return this.b=32768,e},w.prototype.K=function(e){var h,g,i,f=this.input.length/this.c+1|0,j=this.input,d=this.a;return e&&('number'==typeof e.v&&(f=e.v),'number'==typeof e.G&&(f+=e.G)),2>f?g=(i=(j.length-this.c)/this.u[2]/2*258|0)<d.length?d.length+i:d.length<<1:g=d.length*f,c?(h=new Uint8Array(g)).set(d):h=d,this.a=h},w.prototype.t=function(){var i,d,e,f,j,k=0,l=this.a,h=this.l,g=new (c?Uint8Array:Array)(this.q+(this.b-32768));if(0===h.length){return c?this.a.subarray(32768,this.b):this.a.slice(32768,this.b)}for(d=0,e=h.length;d<e;++d){for(f=0,j=(i=h[d]).length;f<j;++f){g[k++]=i[f]}}for(d=32768,e=this.b;d<e;++d){g[k++]=l[d]}return this.l=[],this.buffer=g},w.prototype.I=function(){var e,d=this.b;return c?this.C?(e=new Uint8Array(d)).set(this.a.subarray(0,d)):e=this.a.subarray(0,d):(this.a.length>d&&(this.a.length=d),e=this.a),this.buffer=e},Q.prototype.p=function(){var d,c=this.input;return d=this.B.p(),this.c=this.B.c,this.N&&((c[this.c++]<<24|c[this.c++]<<16|c[this.c++]<<8|c[this.c++])>>>0!==Z(d)&&e(Error('invalid adler-32 checksum'))),d};var l=8;function ee(h,d){this.input=h,this.a=new (c?Uint8Array:Array)(32768),this.h=g.k;var e,f={};for(e in !d&&(d={})||'number'!=typeof d.compressionType||(this.h=d.compressionType),d){f[e]=d[e]}f.outputBuffer=this.a,this.A=new p(this.input,f)}var g=ac;function ne(h,f){var d,e,c,g;if(Object.keys){d=Object.keys(f)}else {for(e in d=[],c=0,f){d[c++]=e}}for(c=0,g=d.length;c<g;++c){i(h+'.'+(e=d[c]),f[e])}}ee.prototype.j=function(){var m,n,k,j,i,h,d,f=0;switch(d=this.a,m=l){case l:n=Math.LOG2E*Math.log(32768)-8;break;default:e(Error('invalid compression method'));}switch(k=n<<4|m,d[f++]=k,m){case l:switch(this.h){case g.NONE:i=0;break;case g.r:i=1;break;case g.k:i=2;break;default:e(Error('unsupported compression type'));};break;default:e(Error('invalid compression method'));}return j=i<<6|0,d[f++]=j|31-(256*k+j)%31,h=Z(this.input),this.A.b=f,f=(d=this.A.j()).length,c&&((d=new Uint8Array(d.buffer)).length<=f+4&&(this.a=new Uint8Array(d.length+4),this.a.set(d),d=this.a),d=d.subarray(0,f+4)),d[f++]=h>>24&255,d[f++]=h>>16&255,d[f++]=h>>8&255,d[f++]=255&h,d},i('Zlib.Inflate',Q),i('Zlib.Inflate.prototype.decompress',Q.prototype.p),ne('Zlib.Inflate.BufferType',{ADAPTIVE:L.D,BLOCK:L.F}),i('Zlib.Deflate',ee),i('Zlib.Deflate.compress',function(c,d){return (new ee(c,d)).j()}),i('Zlib.Deflate.prototype.compress',ee.prototype.j),ne('Zlib.Deflate.CompressionType',{NONE:g.NONE,FIXED:g.r,DYNAMIC:g.k})}).call(this)},function(q,d,a){Object.defineProperty(d,'__esModule',{value:!0}),d.SocketEngine=d.SocketEvent=void 0;var f,j=function(){function e(f,e){for(var c=0;c<e.length;c++){var b=e[c];b.enumerable=b.enumerable||!1,b.configurable=!0,'value' in b&&(b.writable=!0),Object.defineProperty(f,b.key,b)}}return function(b,c,f){return c&&e(b.prototype,c),f&&e(b,f),b}}(),o=a(119),g=(f=o)&&f.__esModule?f:{'default':f},h=a(164),p=a(38),c=a(8),n=a(2),i=a(50),e=a(51),k=a(1);function y(b,c){if(!(b instanceof c)){throw new TypeError('Cannot call a class as a function')}}var b=Object.freeze({CONNECT:'socketConnect',DISCONNECT:'socketDisconnect',DATA:'socketData',IOERROR:'socketIOError'}),l=function(c){function t(f){y(this,t);var b=function(e,b){if(!e){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !b||'object'!=typeof b&&'function'!=typeof b?e:b}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return b._sfs=f,b._logger=i.Logger.instance,b._isConnected=!1,b._isConnecting=!1,b._socket=null,b._protocolCodec=new m(f),b._disconnectionReason=e.ClientDisconnectionReason.UNKNOWN,Object.seal(b),b}return function(e,b){if('function'!=typeof b&&null!==b){throw new TypeError('Super expression must either be null or a function, not '+typeof b)}e.prototype=Object.create(b&&b.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(e,b):e.__proto__=b)}(t,p.EventDispatcher),j(t,[{key:'connect',value:function(b,g,e){this._isConnecting=!0;var f='ws'+(e?'s':'');this._socket=new WebSocket(f+'://'+b+':'+g+'/BlueBox/websocket'),this._socket.binaryType='arraybuffer',this._socket._scope=this,this._socket.onopen=this._onSocketConnect,this._socket.onclose=this._onSocketDisconnect,this._socket.onmessage=this._onSocketData,this._socket.onerror=this._onSocketError}},{key:'disconnect',value:function(b){this._disconnectionReason=b,this._socket.close()}},{key:'addController',value:function(b,e){null==this._controllers[b]&&(this._controllers[b]=e)}},{key:'removeController',value:function(b){delete this._controllers[b]}},{key:'send',value:function(b){this._sfs.debug&&this._logger.debug('OUTGOING MESSAGE: '+b.dump());var e=this._protocolCodec.onPacketWrite(b);this._socket.send(e)}},{key:'_onSocketConnect',value:function(){this._scope._sfs.debug&&this._scope._logger.debug('Socket connection established'),this._scope._isConnected=!0,this._scope._isConnecting=!1,this._scope.dispatchEvent(b.CONNECT,{success:!0})}},{key:'_onSocketDisconnect',value:function(){this._scope._isConnected=!1,this._scope.isConnecting?(this._scope._sfs.debug&&this._scope._logger.debug("Can't establish socket connection"),this._scope._isConnecting=!1,this._scope.dispatchEvent(b.CONNECT,{success:!1})):(this._scope._sfs.debug&&this._scope._logger.debug('Socket disconnection occurred'),this._scope.dispatchEvent(b.DISCONNECT,{reason:this._scope._disconnectionReason}),this._scope._disconnectionReason=e.ClientDisconnectionReason.UNKNOWN)}},{key:'_onSocketData',value:function(f){var e=this._scope._protocolCodec.onPacketRead(f.data);this._scope._sfs.debug&&this._scope._logger.debug('INCOMING MESSAGE: '+e.dump()),this._scope.dispatchEvent(b.DATA,e)}},{key:'_onSocketError',value:function(e){this._scope.dispatchEvent(b.IOERROR,e.data)}},{key:'isConnected',get:function(){return this._isConnected}},{key:'isConnecting',get:function(){return this._isConnecting}},{key:'maxMessageSize',get:function(){return this._protocolCodec.maxMessageSize},set:function(b){this._protocolCodec.maxMessageSize=b}},{key:'compressionThreshold',get:function(){return this._protocolCodec.compressionThreshold},set:function(b){this._protocolCodec.compressionThreshold=b}}]),t}(),m=function(){function e(b){y(this,e),this.CONTROLLER_ID='c',this.ACTION_ID='a',this.PARAM_ID='p',this._maxMessageSize=10000,this._compressionThreshold=1024,this._sfs=b,this._logger=i.Logger.instance,Object.seal(this)}return j(e,[{key:'onPacketRead',value:function(i){if(0!==i.byteLength){var f=new g['default'](i,0,g['default'].BIG_ENDIAN),j=f.readUint8(),l=(32&j)>0,k=(8&j)>0?f.readUint32():f.readUint16(),b=f.readUint8Array(k);l&&(b=this.decompress(b)),this._sfs.debug&&(i.byteLength>1024?this._logger.debug('DATA READ - Binary size > 1024; dump omitted'):this._logger.debug('DATA READ - '+e.DumpFormatter.hexDump(b)));var h=c.SFSObject.newFromBinaryData(b);return new n.Message(h.get(this.ACTION_ID),h.get(this.CONTROLLER_ID),h.get(this.PARAM_ID))}this._logger.error('Unexpected empty packet data: no readable bytes available!')}},{key:'onPacketWrite',value:function(l){var i=new c.SFSObject();i.put(this.CONTROLLER_ID,l.targetController,c.SFSDataType.BYTE),i.put(this.ACTION_ID,l.id,c.SFSDataType.SHORT),i.put(this.PARAM_ID,l.content,c.SFSDataType.SFS_OBJECT);var h=i.toBinary(),f=h.byteLength,b=new g['default'](new ArrayBuffer(0),0,g['default'].BIG_ENDIAN),m=128;f>this.compressionThreshold&&(m+=32,f=(h=this.compress(h)).byteLength);var n=f>65335;n&&(m+=8),b.writeUint8(m),n?b.writeUint32(f):b.writeUint16(f),b.writeUint8Array(h);var j=new Uint8Array(b.buffer);if(j.byteLength>this.maxMessageSize){throw new k.SFSError('Message size is too big: '+j.byteLength+'; the server limit is: '+this.maxMessageSize)}return this._sfs.debug&&this._logger.debug('DATA WRITTEN - '+e.DumpFormatter.hexDump(j)),j}},{key:'decompress',value:function(b){return (new h.Zlib.Inflate(b)).decompress()}},{key:'compress',value:function(b){return (new h.Zlib.Deflate(b)).compress()}},{key:'maxMessageSize',get:function(){return this._maxMessageSize},set:function(b){this._maxMessageSize=b}},{key:'compressionThreshold',get:function(){return this._compressionThreshold},set:function(b){this._compressionThreshold=b}}]),e}();d.SocketEvent=b,d.SocketEngine=l},function(g,b,c){Object.defineProperty(b,'__esModule',{value:!0}),b.ExtensionController=void 0;var e=function(){function e(f,e){for(var d=0;d<e.length;d++){var a=e[d];a.enumerable=a.enumerable||!1,a.configurable=!0,'value' in a&&(a.writable=!0),Object.defineProperty(f,a.key,a)}}return function(a,d,f){return d&&e(a.prototype,d),f&&e(a,f),a}}(),d=c(38),a=c(96);var f=function(){function e(a){!function(d,e){if(!(d instanceof e)){throw new TypeError('Cannot call a class as a function')}}(this,e),this._sfs=a,this._logger=a.logger,this._id=1,Object.freeze(this)}return e(e,[{key:'handleMessage',value:function(f,i){this._sfs.debug&&this._logger.info('Handling Extension response');var e={};e.cmd=f.get(a.ExtensionRequest.KEY_CMD),e.params=f.get(a.ExtensionRequest.KEY_PARAMS);var h=f.get(a.ExtensionRequest.KEY_ROOM);null!=h&&(e.room=this._sfs.roomManager.getRoomById(h)),this._sfs.dispatchEvent(d.SFSEvent.EXTENSION_RESPONSE,e)}},{key:'id',get:function(){return this._id}}]),e}();b.ExtensionController=f},function(d,a,e){Object.defineProperty(a,'__esModule',{value:!0});var c=function(){function e(g,f){for(var c=0;c<f.length;c++){var b=f[c];b.enumerable=b.enumerable||!1,b.configurable=!0,'value' in b&&(b.writable=!0),Object.defineProperty(g,b.key,b)}}return function(b,c,f){return c&&e(b.prototype,c),f&&e(b,f),b}}();var b=function(){function e(){!function(b,c){if(!(b instanceof c)){throw new TypeError('Cannot call a class as a function')}}(this,e)}return c(e,null,[{key:'KEY_ROOM_ID',get:function(){return 'r'}},{key:'KEY_ITEM_ID',get:function(){return 'i'}},{key:'KEY_VAR_LIST',get:function(){return 'v'}}]),e}();a.SetMMOItemVariables=b},function(d,c,b){b.r(c),b.d(c,'MD5',function(){return a});var a=function(){this.hexcase=0,this.b64pad=''};a.prototype={},a.prototype.hex_md5=function(a){return this.rstr2hex(this.rstr_md5(this.str2rstr_utf8(a)))},a.prototype.b64_md5=function(a){return this.rstr2b64(this.rstr_md5(this.str2rstr_utf8(a)))},a.prototype.any_md5=function(a,e){return this.rstr2any(this.rstr_md5(this.str2rstr_utf8(a)),e)},a.prototype.hex_hmac_md5=function(a,e){return this.rstr2hex(this.rstr_hmac_md5(this.str2rstr_utf8(a),this.str2rstr_utf8(e)))},a.prototype.b64_hmac_md5=function(a,e){return this.rstr2b64(this.rstr_hmac_md5(this.str2rstr_utf8(a),this.str2rstr_utf8(e)))},a.prototype.any_hmac_md5=function(a,f,e){return this.rstr2any(this.rstr_hmac_md5(this.str2rstr_utf8(a),this.str2rstr_utf8(f)),e)},a.prototype.md5_vm_test=function(){return '900150983cd24fb0d6963f7d28e17f72'==this.hex_md5('abc').toLowerCase()},a.prototype.rstr_md5=function(a){return this.binl2rstr(this.binl_md5(this.rstr2binl(a),8*a.length))},a.prototype.rstr_hmac_md5=function(f,i){var e=this.rstr2binl(f);e.length>16&&(e=this.binl_md5(e,8*f.length));for(var h=Array(16),g=Array(16),a=0;a<16;a++){h[a]=909522486^e[a],g[a]=1549556828^e[a]}var j=this.binl_md5(h.concat(this.rstr2binl(i)),512+8*i.length);return this.binl2rstr(this.binl_md5(g.concat(j),640))},a.prototype.rstr2hex=function(f){try{this.hexcase}catch(i){this.hexcase=0}for(var e,g=this.hexcase?'0123456789ABCDEF':'0123456789abcdef',h='',a=0;a<f.length;a++){e=f.charCodeAt(a),h+=g.charAt(e>>>4&15)+g.charAt(15&e)}return h},a.prototype.rstr2b64=function(e){try{this.b64pad}catch(j){this.b64pad=''}for(var h='',g=e.length,a=0;a<g;a+=3){for(var i=e.charCodeAt(a)<<16|(a+1<g?e.charCodeAt(a+1)<<8:0)|(a+2<g?e.charCodeAt(a+2):0),f=0;f<4;f++){8*a+6*f>8*e.length?h+=this.b64pad:h+='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'.charAt(i>>>6*(3-f)&63)}}return h},a.prototype.rstr2any=function(h,l){var a,i,j,e,f,m=l.length,g=Array(Math.ceil(h.length/2));for(a=0;a<g.length;a++){g[a]=h.charCodeAt(2*a)<<8|h.charCodeAt(2*a+1)}var n=Math.ceil(8*h.length/(Math.log(l.length)/Math.log(2))),k=Array(n);for(i=0;i<n;i++){for(f=Array(),e=0,a=0;a<g.length;a++){e=(e<<16)+g[a],e-=(j=Math.floor(e/m))*m,(f.length>0||j>0)&&(f[f.length]=j)}k[i]=e,g=f}var o='';for(a=k.length-1;a>=0;a--){o+=l.charAt(k[a])}return o},a.prototype.str2rstr_utf8=function(g){for(var a,h,f='',e=-1;++e<g.length;){a=g.charCodeAt(e),h=e+1<g.length?g.charCodeAt(e+1):0,55296<=a&&a<=56319&&56320<=h&&h<=57343&&(a=65536+((1023&a)<<10)+(1023&h),e++),a<=127?f+=String.fromCharCode(a):a<=2047?f+=String.fromCharCode(192|a>>>6&31,128|63&a):a<=65535?f+=String.fromCharCode(224|a>>>12&15,128|a>>>6&63,128|63&a):a<=2097151&&(f+=String.fromCharCode(240|a>>>18&7,128|a>>>12&63,128|a>>>6&63,128|63&a))}return f},a.prototype.str2rstr_utf16le=function(e){for(var f='',a=0;a<e.length;a++){f+=String.fromCharCode(255&e.charCodeAt(a),e.charCodeAt(a)>>>8&255)}return f},a.prototype.str2rstr_utf16be=function(e){for(var f='',a=0;a<e.length;a++){f+=String.fromCharCode(e.charCodeAt(a)>>>8&255,255&e.charCodeAt(a))}return f},a.prototype.rstr2binl=function(f){for(var e=Array(f.length>>2),a=0;a<e.length;a++){e[a]=0}for(a=0;a<8*f.length;a+=8){e[a>>5]|=(255&f.charCodeAt(a/8))<<a%32}return e},a.prototype.binl2rstr=function(e){for(var f='',a=0;a<32*e.length;a+=8){f+=String.fromCharCode(e[a>>5]>>>a%32&255)}return f},a.prototype.binl_md5=function(h,j){h[j>>5]|=128<<j%32,h[14+(j+64>>>9<<4)]=j;for(var e=1732584193,g=-271733879,a=-1732584194,f=271733878,i=0;i<h.length;i+=16){var k=e,n=g,l=a,m=f;e=this.md5_ff(e,g,a,f,h[i+0],7,-680876936),f=this.md5_ff(f,e,g,a,h[i+1],12,-389564586),a=this.md5_ff(a,f,e,g,h[i+2],17,606105819),g=this.md5_ff(g,a,f,e,h[i+3],22,-1044525330),e=this.md5_ff(e,g,a,f,h[i+4],7,-176418897),f=this.md5_ff(f,e,g,a,h[i+5],12,1200080426),a=this.md5_ff(a,f,e,g,h[i+6],17,-1473231341),g=this.md5_ff(g,a,f,e,h[i+7],22,-45705983),e=this.md5_ff(e,g,a,f,h[i+8],7,1770035416),f=this.md5_ff(f,e,g,a,h[i+9],12,-1958414417),a=this.md5_ff(a,f,e,g,h[i+10],17,-42063),g=this.md5_ff(g,a,f,e,h[i+11],22,-1990404162),e=this.md5_ff(e,g,a,f,h[i+12],7,1804603682),f=this.md5_ff(f,e,g,a,h[i+13],12,-40341101),a=this.md5_ff(a,f,e,g,h[i+14],17,-1502002290),g=this.md5_ff(g,a,f,e,h[i+15],22,1236535329),e=this.md5_gg(e,g,a,f,h[i+1],5,-165796510),f=this.md5_gg(f,e,g,a,h[i+6],9,-1069501632),a=this.md5_gg(a,f,e,g,h[i+11],14,643717713),g=this.md5_gg(g,a,f,e,h[i+0],20,-373897302),e=this.md5_gg(e,g,a,f,h[i+5],5,-701558691),f=this.md5_gg(f,e,g,a,h[i+10],9,38016083),a=this.md5_gg(a,f,e,g,h[i+15],14,-660478335),g=this.md5_gg(g,a,f,e,h[i+4],20,-405537848),e=this.md5_gg(e,g,a,f,h[i+9],5,568446438),f=this.md5_gg(f,e,g,a,h[i+14],9,-1019803690),a=this.md5_gg(a,f,e,g,h[i+3],14,-187363961),g=this.md5_gg(g,a,f,e,h[i+8],20,1163531501),e=this.md5_gg(e,g,a,f,h[i+13],5,-1444681467),f=this.md5_gg(f,e,g,a,h[i+2],9,-51403784),a=this.md5_gg(a,f,e,g,h[i+7],14,1735328473),g=this.md5_gg(g,a,f,e,h[i+12],20,-1926607734),e=this.md5_hh(e,g,a,f,h[i+5],4,-378558),f=this.md5_hh(f,e,g,a,h[i+8],11,-2022574463),a=this.md5_hh(a,f,e,g,h[i+11],16,1839030562),g=this.md5_hh(g,a,f,e,h[i+14],23,-35309556),e=this.md5_hh(e,g,a,f,h[i+1],4,-1530992060),f=this.md5_hh(f,e,g,a,h[i+4],11,1272893353),a=this.md5_hh(a,f,e,g,h[i+7],16,-155497632),g=this.md5_hh(g,a,f,e,h[i+10],23,-1094730640),e=this.md5_hh(e,g,a,f,h[i+13],4,681279174),f=this.md5_hh(f,e,g,a,h[i+0],11,-358537222),a=this.md5_hh(a,f,e,g,h[i+3],16,-722521979),g=this.md5_hh(g,a,f,e,h[i+6],23,76029189),e=this.md5_hh(e,g,a,f,h[i+9],4,-640364487),f=this.md5_hh(f,e,g,a,h[i+12],11,-421815835),a=this.md5_hh(a,f,e,g,h[i+15],16,530742520),g=this.md5_hh(g,a,f,e,h[i+2],23,-995338651),e=this.md5_ii(e,g,a,f,h[i+0],6,-198630844),f=this.md5_ii(f,e,g,a,h[i+7],10,1126891415),a=this.md5_ii(a,f,e,g,h[i+14],15,-1416354905),g=this.md5_ii(g,a,f,e,h[i+5],21,-57434055),e=this.md5_ii(e,g,a,f,h[i+12],6,1700485571),f=this.md5_ii(f,e,g,a,h[i+3],10,-1894986606),a=this.md5_ii(a,f,e,g,h[i+10],15,-1051523),g=this.md5_ii(g,a,f,e,h[i+1],21,-2054922799),e=this.md5_ii(e,g,a,f,h[i+8],6,1873313359),f=this.md5_ii(f,e,g,a,h[i+15],10,-30611744),a=this.md5_ii(a,f,e,g,h[i+6],15,-1560198380),g=this.md5_ii(g,a,f,e,h[i+13],21,1309151649),e=this.md5_ii(e,g,a,f,h[i+4],6,-145523070),f=this.md5_ii(f,e,g,a,h[i+11],10,-1120210379),a=this.md5_ii(a,f,e,g,h[i+2],15,718787259),g=this.md5_ii(g,a,f,e,h[i+9],21,-343485551),e=this.safe_add(e,k),g=this.safe_add(g,n),a=this.safe_add(a,l),f=this.safe_add(f,m)}return Array(e,g,a,f)},a.prototype.md5_cmn=function(a,i,f,h,e,g){return this.safe_add(this.bit_rol(this.safe_add(this.safe_add(i,a),this.safe_add(h,g)),e),f)},a.prototype.md5_ff=function(e,a,g,i,f,h,j){return this.md5_cmn(a&g|~a&i,e,a,f,h,j)},a.prototype.md5_gg=function(f,e,h,a,g,i,j){return this.md5_cmn(e&a|h&~a,f,e,g,i,j)},a.prototype.md5_hh=function(e,a,g,i,f,h,j){return this.md5_cmn(a^g^i,e,a,f,h,j)},a.prototype.md5_ii=function(e,a,g,i,f,h,j){return this.md5_cmn(g^(a|~i),e,a,f,h,j)},a.prototype.safe_add=function(a,f){var e=(65535&a)+(65535&f);return (a>>16)+(f>>16)+(e>>16)<<16|65535&e},a.prototype.bit_rol=function(a,e){return a<<e|a>>>32-e}},function(f,a,c){Object.defineProperty(a,'__esModule',{value:!0}),a.MMOItem=void 0;var e=function(){function e(g,e){for(var d=0;d<e.length;d++){var b=e[d];b.enumerable=b.enumerable||!1,b.configurable=!0,'value' in b&&(b.writable=!0),Object.defineProperty(g,b.key,b)}}return function(b,d,g){return d&&e(b.prototype,d),g&&e(b,g),b}}(),b=c(72);var d=function(){function e(b){!function(d,e){if(!(d instanceof e)){throw new TypeError('Cannot call a class as a function')}}(this,e),this._id=b,this._aoiEntryPoint=null,this._variables=new Map(),Object.seal(this)}return e(e,[{key:'toString',value:function(){return '[Item: '+this.id+']'}},{key:'getVariable',value:function(b){return this._variables.get(b)}},{key:'containsVariable',value:function(b){return this._variables.has(b)}},{key:'getVariables',value:function(){return Array.from(this._variables.values())}},{key:'_setVariables',value:function(i){var d=!0,g=!1,h=void 0;try{for(var e,b=i[Symbol.iterator]();!(d=(e=b.next()).done);d=!0){var j=e.value;this._setVariable(j)}}catch(k){g=!0,h=k}finally{try{!d&&b['return']&&b['return']()}finally{if(g){throw h}}}}},{key:'_setVariable',value:function(b){b.isNull?this._variables['delete'](b.name):this._variables.set(b.name,b)}},{key:'id',get:function(){return this._id}},{key:'aoiEntryPoint',get:function(){return this._aoiEntryPoint}}],[{key:'fromSFSArray',value:function(i){var h=new e(i.get(0)),g=i.get(1);if(null!=g){for(var d=0;d<g.size();d++){h._setVariable(b.MMOItemVariable.fromSFSArray(g.get(d)))}}return h}}]),e}();a.MMOItem=d},function(a,b){!function(i){function t(c,e,d){return e<=c&&c<=d}function n(c,d){return Math.floor(c/d)}var c=-1,e=-1;function o(c,d){if(c){throw new Error('EncodingError')}return d||65533}function s(c){throw new Error('EncodingError')}function a(c){if(c=String(c).trim().toLowerCase(),Object.prototype.hasOwnProperty.call(j,c)){return j[c]}throw new Error('EncodingError: Unknown encoding: '+c)}var g={},j={};function l(c,d){return (d||[])[c]||null}function f(d,e){var c=e.indexOf(d);return -1===c?null:c}[{encodings:[{labels:['unicode-1-1-utf-8','utf-8','utf8'],name:'utf-8'}],heading:'The Encoding'},{encodings:[{labels:['cp864','ibm864'],name:'ibm864'},{labels:['cp866','ibm866'],name:'ibm866'},{labels:['csisolatin2','iso-8859-2','iso-ir-101','iso8859-2','iso_8859-2','l2','latin2'],name:'iso-8859-2'},{labels:['csisolatin3','iso-8859-3','iso_8859-3','iso-ir-109','l3','latin3'],name:'iso-8859-3'},{labels:['csisolatin4','iso-8859-4','iso_8859-4','iso-ir-110','l4','latin4'],name:'iso-8859-4'},{labels:['csisolatincyrillic','cyrillic','iso-8859-5','iso_8859-5','iso-ir-144'],name:'iso-8859-5'},{labels:['arabic','csisolatinarabic','ecma-114','iso-8859-6','iso_8859-6','iso-ir-127'],name:'iso-8859-6'},{labels:['csisolatingreek','ecma-118','elot_928','greek','greek8','iso-8859-7','iso_8859-7','iso-ir-126'],name:'iso-8859-7'},{labels:['csisolatinhebrew','hebrew','iso-8859-8','iso-8859-8-i','iso-ir-138','iso_8859-8','visual'],name:'iso-8859-8'},{labels:['csisolatin6','iso-8859-10','iso-ir-157','iso8859-10','l6','latin6'],name:'iso-8859-10'},{labels:['iso-8859-13'],name:'iso-8859-13'},{labels:['iso-8859-14','iso8859-14'],name:'iso-8859-14'},{labels:['iso-8859-15','iso_8859-15'],name:'iso-8859-15'},{labels:['iso-8859-16'],name:'iso-8859-16'},{labels:['koi8-r','koi8_r'],name:'koi8-r'},{labels:['koi8-u'],name:'koi8-u'},{labels:['csmacintosh','mac','macintosh','x-mac-roman'],name:'macintosh'},{labels:['iso-8859-11','tis-620','windows-874'],name:'windows-874'},{labels:['windows-1250','x-cp1250'],name:'windows-1250'},{labels:['windows-1251','x-cp1251'],name:'windows-1251'},{labels:['ascii','ansi_x3.4-1968','csisolatin1','iso-8859-1','iso8859-1','iso_8859-1','l1','latin1','us-ascii','windows-1252'],name:'windows-1252'},{labels:['cp1253','windows-1253'],name:'windows-1253'},{labels:['csisolatin5','iso-8859-9','iso-ir-148','l5','latin5','windows-1254'],name:'windows-1254'},{labels:['cp1255','windows-1255'],name:'windows-1255'},{labels:['cp1256','windows-1256'],name:'windows-1256'},{labels:['windows-1257'],name:'windows-1257'},{labels:['cp1258','windows-1258'],name:'windows-1258'},{labels:['x-mac-cyrillic','x-mac-ukrainian'],name:'x-mac-cyrillic'}],heading:'Legacy single-byte encodings'},{encodings:[{labels:['chinese','csgb2312','csiso58gb231280','gb2312','gbk','gb_2312','gb_2312-80','iso-ir-58','x-gbk'],name:'gbk'},{labels:['gb18030'],name:'gb18030'},{labels:['hz-gb-2312'],name:'hz-gb-2312'}],heading:'Legacy multi-byte Chinese (simplified) encodings'},{encodings:[{labels:['big5','big5-hkscs','cn-big5','csbig5','x-x-big5'],name:'big5'}],heading:'Legacy multi-byte Chinese (traditional) encodings'},{encodings:[{labels:['cseucpkdfmtjapanese','euc-jp','x-euc-jp'],name:'euc-jp'},{labels:['csiso2022jp','iso-2022-jp'],name:'iso-2022-jp'},{labels:['csshiftjis','ms_kanji','shift-jis','shift_jis','sjis','windows-31j','x-sjis'],name:'shift_jis'}],heading:'Legacy multi-byte Japanese encodings'},{encodings:[{labels:['cseuckr','csksc56011987','euc-kr','iso-ir-149','korean','ks_c_5601-1987','ks_c_5601-1989','ksc5601','ksc_5601','windows-949'],name:'euc-kr'},{labels:['csiso2022kr','iso-2022-kr'],name:'iso-2022-kr'}],heading:'Legacy multi-byte Korean encodings'},{encodings:[{labels:['utf-16','utf-16le'],name:'utf-16'},{labels:['utf-16be'],name:'utf-16be'}],heading:'Legacy utf-16 encodings'}].forEach(function(c){c.encodings.forEach(function(d){g[d.name]=d,d.labels.forEach(function(e){j[e]=d})})});var h=i['encoding-indexes']||{};function _(k,m){var j=m.fatal,d=0,f=0,g=0;this.decode=function(q){var p,n=q.get();if(n===c&&0===d&&0===f&&0===g){return e}if(n!==c||0===d&&0===f&&0===g||(d=0,f=0,g=0,o(j)),q.offset(1),0!==g){return p=null,t(n,48,57)&&(p=function(c){if(c>39419&&c<189000||c>1237575){return null}var d,g=0,j=0,f=h.gb18030;for(d=0;d<f.length;++d){var e=f[d];if(!(e[0]<=c)){break}g=e[0],j=e[1]}return j+c-g}(10*(126*(10*(d-129)+(f-48))+(g-129))+n-48)),d=0,f=0,g=0,null===p?(q.offset(-3),o(j)):p}if(0!==f){return t(n,129,254)?(g=n,null):(q.offset(-2),d=0,f=0,o(j))}if(0!==d){if(t(n,48,57)&&k){return f=n,null}var u=d,r=null;d=0;var s=n<127?64:65;return (t(n,64,126)||t(n,128,254))&&(r=190*(u-129)+(n-s)),p=null===r?null:l(r,h.gbk),null===r&&q.offset(-1),null===p?o(j):p}return t(n,0,127)?n:128===n?8364:t(n,129,254)?(d=n,null):o(j)}}function y(d,g){g.fatal;this.encode=function(l,o){var k=o.get();if(k===e){return c}if(o.offset(1),t(k,0,127)){return l.emit(k)}var j=f(k,h.gbk);if(null!==j){var u=n(j,190)+129,m=j%190,w=m<63?64:65;return l.emit(u,m+w)}if(null===j&&!d){return s()}var r=n(n(n(j=function(f){var c,k=0,m=0,j=h.gb18030;for(c=0;c<j.length;++c){var e=j[c];if(!(e[1]<=f)){break}k=e[1],m=e[0]}return m+f-k}(k),10),126),10),p=n(n(j-=10*r*126*10,10),126),q=n(j-=10*p*126,10),v=j-10*q;return l.emit(r+129,p+48,q+129,v+48)}}function p(h,j){var g=j.fatal,d=null,f=null;this.decode=function(m){var k,l=m.get();if(l===c&&null===d&&null===f){return e}if(l===c&&(null!==d||null!==f)){return o(g)}if(m.offset(1),null===d){return d=l,null}if(k=h?(d<<8)+l:(l<<8)+d,d=null,null!==f){var n=f;return f=null,t(k,56320,57343)?65536+1024*(n-55296)+(k-56320):(m.offset(-2),o(g))}return t(k,55296,56319)?(f=k,null):t(k,56320,57343)?o(g):k}}function d(d,f){f.fatal;this.encode=function(j,h){function u(g){var c=g>>8,e=255&g;return d?j.emit(c,e):j.emit(e,c)}var g=h.get();if(g===e){return c}if(h.offset(1),t(g,55296,57343)&&s(),g<=65535){return u(g)}var k=(g-65536)%1024+56320;return u(n(g-65536,1024)+55296),u(k)}}g['utf-8'].getEncoder=function(d){return new function(f){f.fatal,this.encode=function(k,m){var h,j,g=m.get();if(g===e){return c}if(m.offset(1),t(g,55296,57343)){return s()}if(t(g,0,127)){return k.emit(g)}t(g,128,2047)?(h=1,j=192):t(g,2048,65535)?(h=2,j=224):t(g,65536,1114111)&&(h=3,j=240);for(var l=k.emit(n(g,Math.pow(64,h))+j);h>0;){var o=n(g,Math.pow(64,h-1));l=k.emit(128+o%64),h-=1}return l}}(d)},g['utf-8'].getDecoder=function(d){return new function(l){var k=l.fatal,g=0,f=0,j=0,h=0;this.decode=function(n){var m=n.get();if(m===c){return 0!==f?o(k):e}if(n.offset(1),0===f){if(t(m,0,127)){return m}if(t(m,194,223)){f=1,h=128,g=m-192}else {if(t(m,224,239)){f=2,h=2048,g=m-224}else {if(!t(m,240,244)){return o(k)}f=3,h=65536,g=m-240}}return g*=Math.pow(64,f),null}if(!t(m,128,191)){return g=0,f=0,j=0,h=0,n.offset(-1),o(k)}if(j+=1,g+=(m-128)*Math.pow(64,f-j),j!==f){return null}var p=g,q=h;return g=0,f=0,j=0,h=0,t(p,q,1114111)&&!t(p,55296,57343)?p:o(k)}}(d)},['ibm864','ibm866','iso-8859-2','iso-8859-3','iso-8859-4','iso-8859-5','iso-8859-6','iso-8859-7','iso-8859-8','iso-8859-10','iso-8859-13','iso-8859-14','iso-8859-15','iso-8859-16','koi8-r','koi8-u','macintosh','windows-874','windows-1250','windows-1251','windows-1252','windows-1253','windows-1254','windows-1255','windows-1256','windows-1257','windows-1258','x-mac-cyrillic'].forEach(function(j){var k=g[j],d=h[j];k.getDecoder=function(f){return new function(d,g){var h=g.fatal;this.decode=function(l){var k=l.get();if(k===c){return e}if(l.offset(1),t(k,0,127)){return k}var m=d[k-128];return null===m?o(h):m}}(d,f)},k.getEncoder=function(g){return new function(d,h){h.fatal,this.encode=function(l,m){var k=m.get();if(k===e){return c}if(m.offset(1),t(k,0,127)){return l.emit(k)}var n=f(k,d);return null===n&&s(),l.emit(n+128)}}(d,g)}}),g.gbk.getEncoder=function(c){return new y(!1,c)},g.gbk.getDecoder=function(c){return new _(!1,c)},g.gb18030.getEncoder=function(c){return new y(!0,c)},g.gb18030.getDecoder=function(c){return new _(!0,c)},g['hz-gb-2312'].getEncoder=function(d){return new function(j){j.fatal;var g=!1;this.encode=function(l,m){var k=m.get();if(k===e){return c}if(m.offset(1),t(k,0,127)&&g){return m.offset(-1),g=!1,l.emit(126,125)}if(126===k){return l.emit(126,126)}if(t(k,0,127)){return l.emit(k)}if(!g){return m.offset(-1),g=!0,l.emit(126,123)}var o=f(k,h.gbk);if(null===o){return s()}var q=n(o,190)+1,p=o%190-63;return t(q,33,126)&&t(p,33,126)?l.emit(q,p):s()}}(d)},g['hz-gb-2312'].getDecoder=function(d){return new function(k){var g=k.fatal,j=!1,f=0;this.decode=function(n){var m=n.get();if(m===c&&0===f){return e}if(m===c&&0!==f){return f=0,o(g)}if(n.offset(1),126===f){return f=0,123===m?(j=!0,null):125===m?(j=!1,null):126===m?126:10===m?null:(n.offset(-1),o(g))}if(0!==f){var q=f;f=0;var p=null;return t(m,33,126)&&(p=l(190*(q-1)+(m+63),h.gbk)),10===m&&(j=!1),null===p?o(g):p}return 126===m?(f=126,null):j?t(m,32,127)?(f=m,null):(10===m&&(j=!1),o(g)):t(m,0,127)?m:o(g)}}(d)},g.big5.getEncoder=function(d){return new function(g){g.fatal,this.encode=function(l,o){var j=o.get();if(j===e){return c}if(o.offset(1),t(j,0,127)){return l.emit(j)}var k=f(j,h.big5);if(null===k){return s()}var q=n(k,157)+129,m=k%157,p=m<63?64:98;return l.emit(q,m+p)}}(d)},g.big5.getDecoder=function(d){return new function(k){var j=k.fatal,g=0,f=null;this.decode=function(p){if(null!==f){var s=f;return f=null,s}var m=p.get();if(m===c&&0===g){return e}if(m===c&&0!==g){return g=0,o(j)}if(p.offset(1),0!==g){var r=g,n=null;g=0;var u=m<127?64:98;if((t(m,64,126)||t(m,161,254))&&(n=157*(r-129)+(m-u)),1133===n){return f=772,202}if(1135===n){return f=780,202}if(1164===n){return f=772,234}if(1166===n){return f=780,234}var q=null===n?null:l(n,h.big5);return null===n&&p.offset(-1),null===q?o(j):q}return t(m,0,127)?m:t(m,129,254)?(g=m,null):o(j)}}(d)},g['euc-jp'].getEncoder=function(d){return new function(g){g.fatal,this.encode=function(k,m){var j=m.get();if(j===e){return c}if(m.offset(1),t(j,0,127)){return k.emit(j)}if(165===j){return k.emit(92)}if(8254===j){return k.emit(126)}if(t(j,65377,65439)){return k.emit(142,j-65377+161)}var l=f(j,h.jis0208);if(null===l){return s()}var o=n(l,94)+161,p=l%94+161;return k.emit(o,p)}}(d)},g['euc-jp'].getDecoder=function(d){return new function(k){var j=k.fatal,f=0,g=0;this.decode=function(q){var p,n,m=q.get();return m===c?0===f&&0===g?e:(f=0,g=0,o(j)):(q.offset(1),0!==g?(p=g,g=0,n=null,t(p,161,254)&&t(m,161,254)&&(n=l(94*(p-161)+m-161,h.jis0212)),t(m,161,254)||q.offset(-1),null===n?o(j):n):142===f&&t(m,161,223)?(f=0,65377+m-161):143===f&&t(m,161,254)?(f=0,g=m,null):0!==f?(p=f,f=0,n=null,t(p,161,254)&&t(m,161,254)&&(n=l(94*(p-161)+m-161,h.jis0208)),t(m,161,254)||q.offset(-1),null===n?o(j):n):t(m,0,127)?m:142===m||143===m||t(m,161,254)?(f=m,null):o(j))}}(d)},g['iso-2022-jp'].getEncoder=function(d){return new function(m){m.fatal;var j=0,k=1,l=2,g=j;this.encode=function(p,q){var o=q.get();if(o===e){return c}if(q.offset(1),(t(o,0,127)||165===o||8254===o)&&g!==j){return q.offset(-1),g=j,p.emit(27,40,66)}if(t(o,0,127)){return p.emit(o)}if(165===o){return p.emit(92)}if(8254===o){return p.emit(126)}if(t(o,65377,65439)&&g!==l){return q.offset(-1),g=l,p.emit(27,40,73)}if(t(o,65377,65439)){return p.emit(o-65377-33)}if(g!==k){return q.offset(-1),g=k,p.emit(27,36,66)}var r=f(o,h.jis0208);if(null===r){return s()}var v=n(r,94)+33,u=r%94+33;return p.emit(v,u)}}(d)},g['iso-2022-jp'].getDecoder=function(d){return new function(v){var g=v.fatal,j=0,m=1,s=2,r=3,n=4,q=5,u=6,f=j,p=!1,k=0;this.decode=function(x){var w=x.get();switch(w!==c&&x.offset(1),f){default:case j:return 27===w?(f=m,null):t(w,0,127)?w:w===c?e:o(g);case m:return 36===w||40===w?(k=w,f=s,null):(w!==c&&x.offset(-1),f=j,o(g));case s:var y=k;return k=0,36!==y||64!==w&&66!==w?36===y&&40===w?(f=r,null):40!==y||66!==w&&74!==w?40===y&&73===w?(f=u,null):(w===c?x.offset(-1):x.offset(-2),f=j,o(g)):(f=j,null):(p=!1,f=n,null);case r:return 68===w?(p=!0,f=n,null):(w===c?x.offset(-2):x.offset(-3),f=j,o(g));case n:return 10===w?(f=j,o(g,10)):27===w?(f=m,null):w===c?e:(k=w,f=q,null);case q:if(f=n,w===c){return o(g)};var z=null,A=94*(k-33)+w-33;return t(k,33,126)&&t(w,33,126)&&(z=l(A,!1===p?h.jis0208:h.jis0212)),null===z?o(g):z;case u:return 27===w?(f=m,null):t(w,33,95)?65377+w-33:w===c?e:o(g);}}}(d)},g.shift_jis.getEncoder=function(d){return new function(g){g.fatal,this.encode=function(k,p){var j=p.get();if(j===e){return c}if(p.offset(1),t(j,0,128)){return k.emit(j)}if(165===j){return k.emit(92)}if(8254===j){return k.emit(126)}if(t(j,65377,65439)){return k.emit(j-65377+161)}var l=f(j,h.jis0208);if(null===l){return s()}var o=n(l,188),q=o<31?129:193,m=l%188,r=m<63?64:65;return k.emit(o+q,m+r)}}(d)},g.shift_jis.getDecoder=function(d){return new function(j){var g=j.fatal,f=0;this.decode=function(m){var k=m.get();if(k===c&&0===f){return e}if(k===c&&0!==f){return f=0,o(g)}if(m.offset(1),0!==f){var p=f;if(f=0,t(k,64,126)||t(k,128,252)){var n=l(188*(p-(p<160?129:193))+k-(k<127?64:65),h.jis0208);return null===n?o(g):n}return m.offset(-1),o(g)}return t(k,0,128)?k:t(k,161,223)?65377+k-161:t(k,129,159)||t(k,224,252)?(f=k,null):o(g)}}(d)},g['euc-kr'].getEncoder=function(d){return new function(g){g.fatal,this.encode=function(o,p){var l=p.get();if(l===e){return c}if(p.offset(1),t(l,0,127)){return o.emit(l)}var m,k,j=f(l,h['euc-kr']);if(null===j){return s()}if(j<12460){m=n(j,178)+129;var q=(k=j%178)<26?65:k<52?71:77;return o.emit(m,k+q)}return m=n(j-=12460,94)+199,k=j%94+161,o.emit(m,k)}}(d)},g['euc-kr'].getDecoder=function(d){return new function(j){var g=j.fatal,f=0;this.decode=function(p){var k=p.get();if(k===c&&0===f){return e}if(k===c&&0!==f){return f=0,o(g)}if(p.offset(1),0!==f){var n=f,m=null;if(f=0,t(n,129,198)){var q=178*(n-129);t(k,65,90)?m=q+k-65:t(k,97,122)?m=q+26+k-97:t(k,129,254)&&(m=q+26+26+k-129)}t(n,199,253)&&t(k,161,254)&&(m=12460+94*(n-199)+(k-161));var r=null===m?null:l(m,h['euc-kr']);return null===m&&p.offset(-1),null===r?o(g):r}return t(k,0,127)?k:t(k,129,253)?(f=k,null):o(g)}}(d)},g['iso-2022-kr'].getEncoder=function(d){return new function(m){m.fatal;var j=0,k=1,l=!1,g=j;this.encode=function(p,u){var r=u.get();if(r===e){return c}if(l||(l=!0,p.emit(27,36,41,67)),u.offset(1),t(r,0,127)&&g!==j){return u.offset(-1),g=j,p.emit(15)}if(t(r,0,127)){return p.emit(r)}if(g!==k){return u.offset(-1),g=k,p.emit(14)}var v,q,o=f(r,h['euc-kr']);return null===o?s():o<12460?(q=o%178-26-26+1,t(v=n(o,178)+1,33,70)&&t(q,33,126)?p.emit(v,q):s()):(q=(o-=12460)%94+33,t(v=n(o,94)+71,71,126)&&t(q,33,126)?p.emit(v,q):s())}}(d)},g['iso-2022-kr'].getDecoder=function(d){return new function(s){var j=s.fatal,g=0,p=1,r=2,q=3,m=4,n=5,f=g,k=0;this.decode=function(v){var u=v.get();switch(u!==c&&v.offset(1),f){default:case g:return 14===u?(f=m,null):15===u?null:27===u?(f=p,null):t(u,0,127)?u:u===c?e:o(j);case p:return 36===u?(f=r,null):(u!==c&&v.offset(-1),f=g,o(j));case r:return 41===u?(f=q,null):(u===c?v.offset(-1):v.offset(-2),f=g,o(j));case q:return 67===u?(f=g,null):(u===c?v.offset(-2):v.offset(-3),f=g,o(j));case m:return 10===u?(f=g,o(j,10)):14===u?null:15===u?(f=g,null):u===c?e:(k=u,f=n,null);case n:if(f=m,u===c){return o(j)};var w=null;return t(k,33,70)&&t(u,33,126)?w=l(178*(k-1)+26+26+u-1,h['euc-kr']):t(k,71,126)&&t(u,33,126)&&(w=l(12460+94*(k-71)+(u-33),h['euc-kr'])),null!==w?w:o(j);}}}(d)},g['utf-16'].getEncoder=function(c){return new d(!1,c)},g['utf-16'].getDecoder=function(c){return new p(!1,c)},g['utf-16be'].getEncoder=function(c){return new d(!0,c)},g['utf-16be'].getDecoder=function(c){return new p(!0,c)};var k='utf-8';function v(c,d){return this&&this!==i?(c=c?String(c):k,d=Object(d),this._encoding=a(c),this._streaming=!1,this._encoder=null,this._options={fatal:Boolean(d.fatal)},Object.defineProperty?Object.defineProperty(this,'encoding',{get:function(){return this._encoding.name}}):this.encoding=this._encoding.name,this):new v(c,d)}function b(c,d){return this&&this!==i?(c=c?String(c):k,d=Object(d),this._encoding=a(c),this._streaming=!1,this._decoder=null,this._options={fatal:Boolean(d.fatal)},Object.defineProperty?Object.defineProperty(this,'encoding',{get:function(){return this._encoding.name}}):this.encoding=this._encoding.name,this):new b(c,d)}v.prototype={encode:function(d,g){d=d?String(d):'',g=Object(g),this._streaming||(this._encoder=this._encoding.getEncoder(this._options)),this._streaming=Boolean(g.stream);for(var h=[],j=new function(e){var f=0;this.emit=function(k){var h,j=c;for(h=0;h<arguments.length;++h){j=Number(arguments[h]),e[f++]=j}return j}}(h),f=new function(c){var f=0,h=function(){for(var e=[],f=0,l=c.length;f<c.length;){var h=c.charCodeAt(f);if(t(h,55296,57343)){if(t(h,56320,57343)){e.push(65533)}else {if(f===l-1){e.push(65533)}else {var j=c.charCodeAt(f+1);if(t(j,56320,57343)){var k=1023&h,m=1023&j;f+=1,e.push(65536+(k<<10)+m)}else {e.push(65533)}}}}else {e.push(h)}f+=1}return e}();this.offset=function(e){if((f+=e)<0){throw new Error('Seeking past start of the buffer')}if(f>h.length){throw new Error('Seeking past EOF')}},this.get=function(){return f>=h.length?e:h[f]}}(d);f.get()!==e;){this._encoder.encode(j,f)}if(!this._streaming){var k;do{k=this._encoder.encode(j,f)}while(k!==c);this._encoder=null}return new Uint8Array(h)}},b.prototype={decode:function(d,j){if(d&&!('buffer' in d&&'byteOffset' in d&&'byteLength' in d)){throw new TypeError('Expected ArrayBufferView')}d||(d=new Uint8Array(0)),j=Object(j),this._streaming||(this._decoder=this._encoding.getDecoder(this._options)),this._streaming=Boolean(j.stream);var g=new function(f){var e=0;this.get=function(){return e>=f.length?c:Number(f[e])},this.offset=function(c){if((e+=c)<0){throw new Error('Seeking past start of the buffer')}if(e>f.length){throw new Error('Seeking past EOF')}},this.match=function(g){if(g.length>e+f.length){return !1}var c;for(c=0;c<g.length;c+=1){if(Number(f[e+c])!==g[c]){return !1}}return !0}}(new Uint8Array(d.buffer,d.byteOffset,d.byteLength));if(a(function(e,c){return c.match([255,254])?(c.offset(2),'utf-16'):c.match([254,255])?(c.offset(2),'utf-16be'):c.match([239,187,191])?(c.offset(3),'utf-8'):e}(this._encoding.name,g))!==this._encoding){throw new Error('BOM mismatch')}for(var f,h=new function(){var c='';this.string=function(){return c},this.emit=function(e){e<=65535?c+=String.fromCharCode(e):(e-=65536,c+=String.fromCharCode(55296+(e>>10&1023)),c+=String.fromCharCode(56320+(1023&e)))}}();g.get()!==c;){null!==(f=this._decoder.decode(g))&&f!==e&&h.emit(f)}if(!this._streaming){do{null!==(f=this._decoder.decode(g))&&f!==e&&h.emit(f)}while(f!==e);this._decoder=null}return h.string()}},i.TextEncoder=i.TextEncoder||v,i.TextDecoder=i.TextDecoder||b}(this)},function(a,b){a.exports=function(c){return c.webpackPolyfill||(c.deprecate=function(){},c.paths=[],c.children||(c.children=[]),Object.defineProperty(c,'loaded',{enumerable:!0,get:function(){return c.l}}),Object.defineProperty(c,'id',{enumerable:!0,get:function(){return c.i}}),c.webpackPolyfill=1),c}},function(l,g,f){Object.defineProperty(g,'__esModule',{value:!0}),g.SFSDataSerializer=void 0;var d,j=function(){function e(d,c){for(var b=0;b<c.length;b++){var a=c[b];a.enumerable=a.enumerable||!1,a.configurable=!0,'value' in a&&(a.writable=!0),Object.defineProperty(d,a.key,a)}}return function(a,b,c){return b&&e(a.prototype,b),c&&e(a,c),a}}(),k=f(119),b=(d=k)&&d.__esModule?d:{'default':d},c=f(170),a=f(8);var e=Symbol(),h=Symbol(),i=function(){function e(a){if(function(b,c){if(!(b instanceof c)){throw new TypeError('Cannot call a class as a function')}}(this,e),a!==h){throw "SFSDataSerializer is a singleton class; you can't instantiate it"}}return j(e,[{key:'object2binary',value:function(d){var c=new b['default'](new ArrayBuffer(0),0,b['default'].BIG_ENDIAN);return c.writeInt8(a.SFSDataType.SFS_OBJECT),c.writeInt16(d.size()),this.obj2bin(d,c),new Uint8Array(c.buffer)}},{key:'obj2bin',value:function(d,j){var a=!0,i=!1,e=void 0;try{for(var h,b=d.keys()[Symbol.iterator]();!(a=(h=b.next()).done);a=!0){var c=h.value,k=d.getWrappedItem(c);this.encodeSFSObjectKey(j,c),this.encodeObject(j,k)}}catch(m){i=!0,e=m}finally{try{!a&&b['return']&&b['return']()}finally{if(i){throw e}}}}},{key:'array2binary',value:function(d){var c=new b['default'](new ArrayBuffer(0),0,b['default'].BIG_ENDIAN);return c.writeInt8(a.SFSDataType.SFS_ARRAY),c.writeInt16(d.size()),this.arr2bin(d,c),new Uint8Array(c.buffer)}},{key:'arr2bin',value:function(b,d){for(var a=0;a<b.size();a++){var c=b.getWrappedItem(a);this.encodeObject(d,c)}}},{key:'encodeSFSObjectKey',value:function(a,b){a.writeInt16(b.length),a.writeUint8Array((new c.TextEncoder('utf-8')).encode(b))}},{key:'encodeObject',value:function(b,d){var c=d.type;if(c===a.SFSDataType.NULL){this.binEncode_NULL(b,d)}else {if(c===a.SFSDataType.BOOL){this.binEncode_BOOL(b,d)}else {if(c===a.SFSDataType.BOOL_ARRAY){this.binEncode_BOOL_ARRAY(b,d)}else {if(c===a.SFSDataType.BYTE){this.binEncode_BYTE(b,d)}else {if(c===a.SFSDataType.BYTE_ARRAY){this.binEncode_BYTE_ARRAY(b,d)}else {if(c===a.SFSDataType.SHORT){this.binEncode_SHORT(b,d)}else {if(c===a.SFSDataType.SHORT_ARRAY){this.binEncode_SHORT_ARRAY(b,d)}else {if(c===a.SFSDataType.INT){this.binEncode_INT(b,d)}else {if(c===a.SFSDataType.INT_ARRAY){this.binEncode_INT_ARRAY(b,d)}else {if(c===a.SFSDataType.LONG){this.binEncode_LONG(b,d)}else {if(c===a.SFSDataType.LONG_ARRAY){this.binEncode_LONG_ARRAY(b,d)}else {if(c===a.SFSDataType.FLOAT){this.binEncode_FLOAT(b,d)}else {if(c===a.SFSDataType.FLOAT_ARRAY){this.binEncode_FLOAT_ARRAY(b,d)}else {if(c===a.SFSDataType.DOUBLE){this.binEncode_DOUBLE(b,d)}else {if(c===a.SFSDataType.DOUBLE_ARRAY){this.binEncode_DOUBLE_ARRAY(b,d)}else {if(c===a.SFSDataType.UTF_STRING){this.binEncode_UTF_STRING(b,d)}else {if(c===a.SFSDataType.TEXT){this.binEncode_TEXT(b,d)}else {if(c===a.SFSDataType.UTF_STRING_ARRAY){this.binEncode_UTF_STRING_ARRAY(b,d)}else {if(c===a.SFSDataType.SFS_ARRAY){b.writeUint8Array(this.array2binary(d.value))}else {if(c!==a.SFSDataType.SFS_OBJECT){throw 'Unknow SFSDataType ID: '+c}b.writeUint8Array(this.object2binary(d.value))}}}}}}}}}}}}}}}}}}}return b}},{key:'binEncode_NULL',value:function(a,b){a.writeUint8(b.type)}},{key:'binEncode_BOOL',value:function(a,b){a.writeUint8(b.type),a.writeUint8(b.value?1:0)}},{key:'binEncode_BOOL_ARRAY',value:function(a,d){var b=d.value;a.writeUint8(d.type),a.writeUint16(b.length);for(var c=0;c<b.length;c++){a.writeUint8(b[c]?1:0)}}},{key:'binEncode_BYTE',value:function(a,b){a.writeUint8(b.type),a.writeUint8(b.value)}},{key:'binEncode_BYTE_ARRAY',value:function(a,b){var c=b.value;a.writeUint8(b.type),a.writeUint32(c.length),a.writeUint8Array(new Uint8Array(b.value))}},{key:'binEncode_SHORT',value:function(a,b){a.writeUint8(b.type),a.writeUint16(b.value)}},{key:'binEncode_SHORT_ARRAY',value:function(a,d){var b=d.value;a.writeUint8(d.type),a.writeUint16(b.length);for(var c=0;c<b.length;c++){a.writeUint16(b[c])}}},{key:'binEncode_INT',value:function(a,b){a.writeUint8(b.type),a.writeUint32(b.value)}},{key:'binEncode_INT_ARRAY',value:function(a,d){var b=d.value;a.writeUint8(d.type),a.writeUint16(b.length);for(var c=0;c<b.length;c++){a.writeUint32(b[c])}}},{key:'binEncode_LONG',value:function(a,c){var b=c.value,e=Math.floor(b/Math.pow(2,32)),d=b%Math.pow(2,32);a.writeUint8(c.type),a.writeInt32(e),a.writeInt32(d)}},{key:'binEncode_LONG_ARRAY',value:function(a,e){var b=e.value;a.writeUint8(e.type),a.writeUint16(b.length);for(var c=0;c<b.length;c++){var d=b[c],h=Math.floor(d/Math.pow(2,32)),i=d%Math.pow(2,32);a.writeInt32(h),a.writeInt32(i)}}},{key:'binEncode_FLOAT',value:function(a,b){a.writeUint8(b.type),a.writeFloat32(b.value)}},{key:'binEncode_FLOAT_ARRAY',value:function(a,d){var b=d.value;a.writeUint8(d.type),a.writeUint16(b.length);for(var c=0;c<b.length;c++){a.writeFloat32(b[c])}}},{key:'binEncode_DOUBLE',value:function(a,b){a.writeUint8(b.type),a.writeFloat64(b.value)}},{key:'binEncode_DOUBLE_ARRAY',value:function(a,d){var b=d.value;a.writeUint8(d.type),a.writeUint16(b.length);for(var c=0;c<b.length;c++){a.writeFloat64(b[c])}}},{key:'binEncode_UTF_STRING',value:function(a,d){var b=(new c.TextEncoder('utf-8')).encode(d.value);a.writeUint8(d.type),a.writeUint16(b.length),a.writeUint8Array(b)}},{key:'binEncode_TEXT',value:function(a,d){var b=(new c.TextEncoder('utf-8')).encode(d.value);a.writeUint8(d.type),a.writeUint32(b.length),a.writeUint8Array(b)}},{key:'binEncode_UTF_STRING_ARRAY',value:function(a,h){var b=h.value;a.writeUint8(h.type),a.writeUint16(b.length);for(var d=0;d<b.length;d++){var e=(new c.TextEncoder('utf-8')).encode(b[d]);a.writeUint16(e.byteLength),a.writeUint8Array(e)}}},{key:'binary2object',value:function(a){if(a.byteLength<3){throw "Can't decode an SFSObject. Byte data is insufficient. Size: "+a.byteLength+' bytes'}return this.decodeSFSObject(new b['default'](a,0,b['default'].BIG_ENDIAN))}},{key:'binary2array',value:function(a){if(a.byteLength<3){throw "Can't decode an SFSArray. Byte data is insufficient. Size: "+a.byteLength+' bytes'}return this.decodeSFSArray(new b['default'](a,0,b['default'].BIG_ENDIAN))}},{key:'decodeSFSObject',value:function(b){var k=new a.SFSObject(),j=b.readUint8();if(j!==a.SFSDataType.SFS_OBJECT){throw 'Invalid SFSDataType. Expected: '+a.SFSDataType.SFS_OBJECT+', found: '+j}var e=b.readUint16();if(e<0){throw "Can't decode SFSObject. Size is negative: "+e}try{for(var i=0;i<e;i++){var c=b.readUint16();if(c<0||c>255){throw 'Invalid SFSObject key length. Found: '+c}var m=b.readUint8Array(c),h=String.fromCharCode.apply(String,m),d=this.decodeObject(b);if(null==d){throw 'Could not decode value for key: '+h}k.put(h,d.value,d.type,!0)}}catch(n){throw n}return k}},{key:'decodeSFSArray',value:function(b){var i=new a.SFSArray(),h=b.readUint8();if(h!==a.SFSDataType.SFS_ARRAY){throw 'Invalid SFSDataType. Expected: '+a.SFSDataType.SFS_ARRAY+', found: '+h}var e=b.readInt16();if(e<0){throw "Can't decode SFSArray. Size is negative: "+e}try{for(var c=0;c<e;c++){var d=this.decodeObject(b);if(null==d){throw 'Could not decode value for index: '+c}i.add(d.value,d.type,!0)}}catch(m){throw m}return i}},{key:'decodeObject',value:function(b){var d=null,c=b.readUint8();if(c===a.SFSDataType.NULL){d=this.binDecode_NULL(b)}else {if(c===a.SFSDataType.BOOL){d=this.binDecode_BOOL(b)}else {if(c===a.SFSDataType.BOOL_ARRAY){d=this.binDecode_BOOL_ARRAY(b)}else {if(c===a.SFSDataType.BYTE){d=this.binDecode_BYTE(b)}else {if(c===a.SFSDataType.BYTE_ARRAY){d=this.binDecode_BYTE_ARRAY(b)}else {if(c===a.SFSDataType.SHORT){d=this.binDecode_SHORT(b)}else {if(c===a.SFSDataType.SHORT_ARRAY){d=this.binDecode_SHORT_ARRAY(b)}else {if(c===a.SFSDataType.INT){d=this.binDecode_INT(b)}else {if(c===a.SFSDataType.INT_ARRAY){d=this.binDecode_INT_ARRAY(b)}else {if(c===a.SFSDataType.LONG){d=this.binDecode_LONG(b)}else {if(c===a.SFSDataType.LONG_ARRAY){d=this.binDecode_LONG_ARRAY(b)}else {if(c===a.SFSDataType.FLOAT){d=this.binDecode_FLOAT(b)}else {if(c===a.SFSDataType.FLOAT_ARRAY){d=this.binDecode_FLOAT_ARRAY(b)}else {if(c===a.SFSDataType.DOUBLE){d=this.binDecode_DOUBLE(b)}else {if(c===a.SFSDataType.DOUBLE_ARRAY){d=this.binDecode_DOUBLE_ARRAY(b)}else {if(c===a.SFSDataType.UTF_STRING){d=this.binDecode_UTF_STRING(b)}else {if(c===a.SFSDataType.TEXT){d=this.binDecode_TEXT(b)}else {if(c===a.SFSDataType.UTF_STRING_ARRAY){d=this.binDecode_UTF_STRING_ARRAY(b)}else {if(c===a.SFSDataType.SFS_ARRAY){b.seek(b.position-1);var h=this.decodeSFSArray(b);d=new a.SFSDataWrapper(c,h)}else {if(c!==a.SFSDataType.SFS_OBJECT){throw 'Unknow SFSDataType ID: '+c}b.seek(b.position-1);var e=this.decodeSFSObject(b);d=new a.SFSDataWrapper(c,e)}}}}}}}}}}}}}}}}}}}return d}},{key:'binDecode_NULL',value:function(b){return new a.SFSDataWrapper(a.SFSDataType.NULL,null)}},{key:'binDecode_BOOL',value:function(d){var c=d.readUint8(),b=null;if(0===c){b=!1}else {if(1!==c){throw 'Error decoding Bool type. Illegal value: '+c}b=!0}return new a.SFSDataWrapper(a.SFSDataType.BOOL,b)}},{key:'binDecode_BOOL_ARRAY',value:function(d){for(var i=this.getTypedArraySize(d),e=[],h=0;h<i;h++){var b=d.readUint8(),c=null;if(0===b){c=!1}else {if(1!==b){throw 'Error decoding Bool type. Illegal value: '+b}c=!0}e.push(c)}return new a.SFSDataWrapper(a.SFSDataType.BOOL_ARRAY,e)}},{key:'binDecode_BYTE',value:function(b){var c=b.readUint8();return new a.SFSDataWrapper(a.SFSDataType.BYTE,c)}},{key:'binDecode_BYTE_ARRAY',value:function(c){var b=c.readInt32();if(b<0){throw 'Error decoding typed array size. Negative size: '+b}for(var d=[],e=0;e<b;e++){d.push(c.readUint8())}return new a.SFSDataWrapper(a.SFSDataType.BYTE_ARRAY,d)}},{key:'binDecode_SHORT',value:function(b){var c=b.readInt16();return new a.SFSDataWrapper(a.SFSDataType.SHORT,c)}},{key:'binDecode_SHORT_ARRAY',value:function(b){for(var e=this.getTypedArraySize(b),c=[],d=0;d<e;d++){c.push(b.readInt16())}return new a.SFSDataWrapper(a.SFSDataType.SHORT_ARRAY,c)}},{key:'binDecode_INT',value:function(b){var c=b.readInt32();return new a.SFSDataWrapper(a.SFSDataType.INT,c)}},{key:'binDecode_INT_ARRAY',value:function(b){for(var e=this.getTypedArraySize(b),c=[],d=0;d<e;d++){c.push(b.readInt32())}return new a.SFSDataWrapper(a.SFSDataType.INT_ARRAY,c)}},{key:'binDecode_LONG',value:function(b){var e=b.readInt32(),c=b.readUint32(),d=e*Math.pow(2,32)+c;return new a.SFSDataWrapper(a.SFSDataType.LONG,d)}},{key:'binDecode_LONG_ARRAY',value:function(b){for(var j=this.getTypedArraySize(b),c=[],d=0;d<j;d++){var e=b.readInt32(),h=b.readUint32(),i=e*Math.pow(2,32)+h;c.push(i)}return new a.SFSDataWrapper(a.SFSDataType.LONG_ARRAY,c)}},{key:'binDecode_FLOAT',value:function(b){var c=b.readFloat32();return new a.SFSDataWrapper(a.SFSDataType.FLOAT,c)}},{key:'binDecode_FLOAT_ARRAY',value:function(b){for(var e=this.getTypedArraySize(b),c=[],d=0;d<e;d++){c.push(b.readFloat32())}return new a.SFSDataWrapper(a.SFSDataType.FLOAT_ARRAY,c)}},{key:'binDecode_DOUBLE',value:function(b){var c=b.readFloat64();return new a.SFSDataWrapper(a.SFSDataType.DOUBLE,c)}},{key:'binDecode_DOUBLE_ARRAY',value:function(b){for(var e=this.getTypedArraySize(b),c=[],d=0;d<e;d++){c.push(b.readFloat64())}return new a.SFSDataWrapper(a.SFSDataType.DOUBLE_ARRAY,c)}},{key:'binDecode_UTF_STRING',value:function(d){var b=d.readInt16();if(b<0){throw 'Error decoding UTF_STRING. Negative size: '+b}var e=d.readUint8Array(b),h=(new c.TextDecoder('utf-8')).decode(e);return new a.SFSDataWrapper(a.SFSDataType.UTF_STRING,h)}},{key:'binDecode_UTF_STRING_ARRAY',value:function(b){for(var k=this.getTypedArraySize(b),e=[],h=0;h<k;h++){var d=b.readInt16();if(d<0){throw 'Error decoding UTF_STRING. Negative size: '+d}var i=b.readUint8Array(d),j=(new c.TextDecoder('utf-8')).decode(i);e.push(j)}return new a.SFSDataWrapper(a.SFSDataType.UTF_STRING_ARRAY,e)}},{key:'binDecode_TEXT',value:function(d){var b=d.readInt32();if(b<0){throw 'Error decoding TEXT. Negative size: '+b}var e=d.readUint8Array(b),h=(new c.TextDecoder('utf-8')).decode(e);return new a.SFSDataWrapper(a.SFSDataType.TEXT,h)}},{key:'getTypedArraySize',value:function(b){var a=b.readUint16();if(a<0){throw 'Error decoding typed array size. Negative size: '+a}return a}}],[{key:'instance',get:function(){return this[e]||(this[e]=new e(h)),Object.seal(this[e])}}]),e}();g.SFSDataSerializer=i},function(R,q,b){Object.defineProperty(q,'__esModule',{value:!0}),q.SystemController=void 0;var B=function(){function e(e,d){for(var c=0;c<d.length;c++){var a=d[c];a.enumerable=a.enumerable||!1,a.configurable=!0,'value' in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(a,c,d){return c&&e(a.prototype,c),d&&e(a,d),a}}(),c=b(2),a=b(38),P=b(73),y=b(8),l=b(10),f=b(47),N=b(169),i=b(57),M=b(71),x=b(58),Q=b(49),O=b(72),k=b(46),L=b(51),g=b(117),K=b(116),z=b(115),H=b(70),s=b(114),v=b(113),n=b(112),d=b(69),C=b(111),t=b(110),w=b(109),F=b(108),p=b(107),u=b(106),D=b(105),G=b(104),e=b(68),o=b(167),h=b(103),m=b(102),E=b(101),J=b(100),j=b(99),r=b(98),A=b(97);var I=function(){function e(a){!function(c,d){if(!(c instanceof d)){throw new TypeError('Cannot call a class as a function')}}(this,e),this._sfs=a,this._logger=a.logger,this._id=0,this._messageHandlers=new Map(),this._initMessageHandlers(),Object.freeze(this)}return B(e,null,[{key:'KEY_ERROR_CODE',get:function(){return 'ec'}},{key:'KEY_ERROR_PARAMS',get:function(){return 'ep'}},{key:'ROOM_PARAM',get:function(){return 'r'}},{key:'USER_PARAM',get:function(){return 'u'}},{key:'USER_COUNT_PARAM',get:function(){return 'uc'}},{key:'SPECT_COUNT_PARAM',get:function(){return 'sc'}},{key:'DISCONNECTION_REASON_PARAM',get:function(){return 'dr'}}]),B(e,[{key:'handleMessage',value:function(d,c){var a=this._messageHandlers.get(c);null!=a?(this._sfs.debug&&this._logger.info('Handling server event: '+a.name+' ('+c+')'),a.handler.call(this,d)):this._logger.warn('Unknown server event received; id: '+c)}},{key:'_initMessageHandlers',value:function(){this._setHandler(c.Requests.Handshake,this._fnHandshake),this._setHandler(c.Requests.Login,this._fnLogin),this._setHandler(c.Requests.Logout,this._fnLogout),this._setHandler(c.Requests.JoinRoom,this._fnJoinRoom),this._setHandler(c.Requests.CreateRoom,this._fnCreateRoom),this._setHandler(c.Requests.ChangeRoomName,this._fnChangeRoomName),this._setHandler(c.Requests.ChangeRoomPassword,this._fnChangeRoomPassword),this._setHandler(c.Requests.ChangeRoomCapacity,this._fnChangeRoomCapacity),this._setHandler(c.Requests.GenericMessage,this._fnGenericMessage),this._setHandler(c.Requests.SetRoomVariables,this._fnSetRoomVariables),this._setHandler(c.Requests.SetUserVariables,this._fnSetUserVariables),this._setHandler(c.Requests.SubscribeRoomGroup,this._fnSubscribeRoomGroup),this._setHandler(c.Requests.UnsubscribeRoomGroup,this._fnUnsubscribeRoomGroup),this._setHandler(c.Requests.SpectatorToPlayer,this._fnSpectatorToPlayer),this._setHandler(c.Requests.PlayerToSpectator,this._fnPlayerToSpectator),this._setHandler(c.Requests.FindRooms,this._fnFindRooms),this._setHandler(c.Requests.FindUsers,this._fnFindUsers),this._setHandler(c.Requests.PingPong,this._fnPingPong),this._setHandler(c.Requests.InitBuddyList,this._fnInitBuddyList),this._setHandler(c.Requests.AddBuddy,this._fnAddBuddy),this._setHandler(c.Requests.RemoveBuddy,this._fnRemoveBuddy),this._setHandler(c.Requests.BlockBuddy,this._fnBlockBuddy),this._setHandler(c.Requests.GoOnline,this._fnGoOnline),this._setHandler(c.Requests.SetBuddyVariables,this._fnSetBuddyVariables),this._setHandler(c.Requests.QuickJoinGame,this._fnQuickJoinGame),this._setHandler(c.Requests.InviteUsers,this._fnInviteUsers),this._setHandler(c.Requests.InvitationReply,this._fnInvitationReply),this._setHandler(c.Requests.SetUserPosition,this._fnSetUserPosition),this._setHandler(1000,this._fnUserEnterRoom,'UserEnterRoom'),this._setHandler(1001,this._fnUserCountChange,'UserCountChange'),this._setHandler(1002,this._fnUserLost,'UserLost'),this._setHandler(1003,this._fnRoomLost,'RoomLost'),this._setHandler(1004,this._fnUserExitRoom,'UserExitRoom'),this._setHandler(1005,this._fnClientDisconnection,'ClientDisconnection'),this._setHandler(1007,this._fnSetMMOItemVariables,'SetMMOItemVariables')}},{key:'_setHandler',value:function(d,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;null==a&&(a=c.Requests.getNameFromId(d)),this._messageHandlers.set(d,{name:a,handler:e})}},{key:'_fnHandshake',value:function(a){this._sfs._handleHandShake(a)}},{key:'_fnLogin',value:function(c){if(null==c.get(e.KEY_ERROR_CODE)){this._populateRoomList(c.get(g.LoginRequest.KEY_ROOMLIST)),this._sfs._mySelf=new f.SFSUser(c.get(g.LoginRequest.KEY_ID),c.get(g.LoginRequest.KEY_USER_NAME),!0),this._sfs.mySelf._setUserManager(this._sfs.userManager),this._sfs.mySelf._privilegeId=c.get(g.LoginRequest.KEY_PRIVILEGE_ID),this._sfs.userManager._addUser(this._sfs.mySelf);var d={};d.zone=c.get(g.LoginRequest.KEY_ZONE_NAME),d.user=this._sfs.mySelf,d.data=c.get(g.LoginRequest.KEY_PARAMS),this._sfs.dispatchEvent(a.SFSEvent.LOGIN,d)}else {this._dispatchError(a.SFSEvent.LOGIN_ERROR,c)}}},{key:'_fnLogout',value:function(d){this._sfs._handleLogout();var c={};c.zone=d.get(K.LogoutRequest.KEY_ZONE_NAME),this._sfs.dispatchEvent(a.SFSEvent.LOGOUT,c)}},{key:'_fnJoinRoom',value:function(d){if(this._sfs._isJoining=!1,null==d.get(e.KEY_ERROR_CODE)){var m=d.get(z.JoinRoomRequest.KEY_ROOM),i=d.get(z.JoinRoomRequest.KEY_USER_LIST),h=this._sfs.roomManager,c=l.SFSRoom.fromSFSArray(m);c=h._replaceRoom(c,h.containsGroup(c.groupId));for(var f=0;f<i.size();f++){var j=i.get(f),k=this._getOrCreateUser(j,!0,c);c._addUser(k)}c._isJoined=!0,this._sfs._lastJoinedRoom=c;var g={};g.room=c,this._sfs.dispatchEvent(a.SFSEvent.ROOM_JOIN,g)}else {this._dispatchError(a.SFSEvent.ROOM_JOIN_ERROR,d)}}},{key:'_fnCreateRoom',value:function(c){if(null==c.get(e.KEY_ERROR_CODE)){var d=l.SFSRoom.fromSFSArray(c.get(H.CreateRoomRequest.KEY_ROOM));this._sfs.roomManager._addRoom(d);var f={};f.room=d,this._sfs.dispatchEvent(a.SFSEvent.ROOM_ADD,f)}else {this._dispatchError(a.SFSEvent.ROOM_CREATION_ERROR,c)}}},{key:'_fnChangeRoomName',value:function(d){if(null==d.get(e.KEY_ERROR_CODE)){var g=d.get(s.ChangeRoomNameRequest.KEY_ROOM),c=this._sfs.roomManager.getRoomById(g);if(null!=c){var h=c.name;this._sfs.roomManager._changeRoomName(c,d.get(s.ChangeRoomNameRequest.KEY_NAME));var f={};f.oldName=h,f.room=c,this._sfs.dispatchEvent(a.SFSEvent.ROOM_NAME_CHANGE,f)}else {this._logger.warn('Unexpected RoomNameChange event error; unknown Room id: '+g)}}else {this._dispatchError(a.SFSEvent.ROOM_NAME_CHANGE_ERROR,d)}}},{key:'_fnChangeRoomPassword',value:function(c){if(null==c.get(e.KEY_ERROR_CODE)){var g=c.get(v.ChangeRoomPasswordStateRequest.KEY_ROOM),d=this._sfs.roomManager.getRoomById(g);if(null!=d){this._sfs.roomManager._changeRoomPasswordState(d,c.get(v.ChangeRoomPasswordStateRequest.KEY_PASS));var f={};f.room=d,this._sfs.dispatchEvent(a.SFSEvent.ROOM_PASSWORD_STATE_CHANGE,f)}else {this._logger.warn('Unexpected RoomPasswordChange event error; unknown Room id: '+g)}}else {this._dispatchError(a.SFSEvent.ROOM_PASSWORD_STATE_CHANGE_ERROR,c)}}},{key:'_fnChangeRoomCapacity',value:function(c){if(null==c.get(e.KEY_ERROR_CODE)){var g=c.get(n.ChangeRoomCapacityRequest.KEY_ROOM),d=this._sfs.roomManager.getRoomById(g);if(null!=d){this._sfs.roomManager._changeRoomCapacity(d,c.get(n.ChangeRoomCapacityRequest.KEY_USER_SIZE),c.get(n.ChangeRoomCapacityRequest.KEY_SPEC_SIZE));var f={};f.room=d,this._sfs.dispatchEvent(a.SFSEvent.ROOM_CAPACITY_CHANGE,f)}else {this._logger.warn('Unexpected RoomCapacityChange event error; unknown Room id: '+g)}}else {this._dispatchError(a.SFSEvent.ROOM_CAPACITY_CHANGE_ERROR,c)}}},{key:'_fnGenericMessage',value:function(a){switch(a.get(d.GenericMessageRequest.KEY_MESSAGE_TYPE)){case d.GenericMessageType.PUBLIC_MSG:this._handlePublicMessage(a);break;case d.GenericMessageType.PRIVATE_MSG:this._handlePrivateMessage(a);break;case d.GenericMessageType.BUDDY_MSG:this._handleBuddyMessage(a);break;case d.GenericMessageType.MODERATOR_MSG:this._handleModMessage(a);break;case d.GenericMessageType.ADMING_MSG:this._handleAdminMessage(a);break;case d.GenericMessageType.OBJECT_MSG:this._handleObjectMessage(a);}}},{key:'_handlePublicMessage',value:function(e){var g=e.get(d.GenericMessageRequest.KEY_ROOM_ID),f=this._sfs.roomManager.getRoomById(g);if(null!=f){var c={};c.room=f,c.sender=this._sfs.userManager.getUserById(e.get(d.GenericMessageRequest.KEY_USER_ID)),c.message=e.get(d.GenericMessageRequest.KEY_MESSAGE),c.data=e.get(d.GenericMessageRequest.KEY_XTRA_PARAMS),this._sfs.dispatchEvent(a.SFSEvent.PUBLIC_MESSAGE,c)}else {this._logger.warn('Unexpected PublicMessage event error; unknown Room id: '+g)}}},{key:'_handlePrivateMessage',value:function(c){var h=c.get(d.GenericMessageRequest.KEY_USER_ID),g=this._sfs.userManager.getUserById(h);if(null==g){if(null==c.get(d.GenericMessageRequest.KEY_SENDER_DATA)){return void this._logger.warn('Unexpected PublicMessage event error; missing sender details')}g=f.SFSUser.fromSFSArray(c.get(d.GenericMessageRequest.KEY_SENDER_DATA))}var e={};e.sender=g,e.message=c.get(d.GenericMessageRequest.KEY_MESSAGE),e.data=c.get(d.GenericMessageRequest.KEY_XTRA_PARAMS),this._sfs.dispatchEvent(a.SFSEvent.PRIVATE_MESSAGE,e)}},{key:'_handleBuddyMessage',value:function(e){var f=e.get(d.GenericMessageRequest.KEY_USER_ID),g=this._sfs.buddyManager.getBuddyById(f),c={};c.isItMe=this._sfs.mySelf.id===f,c.buddy=g,c.message=e.get(d.GenericMessageRequest.KEY_MESSAGE),c.data=e.get(d.GenericMessageRequest.KEY_XTRA_PARAMS),this._sfs.dispatchEvent(a.SFSBuddyEvent.BUDDY_MESSAGE,c)}},{key:'_handleObjectMessage',value:function(e){var c={};c.sender=this._sfs.userManager.getUserById(e.get(d.GenericMessageRequest.KEY_USER_ID)),c.message=e.get(d.GenericMessageRequest.KEY_XTRA_PARAMS),this._sfs.dispatchEvent(a.SFSEvent.OBJECT_MESSAGE,c)}},{key:'_handleModMessage',value:function(e){var c={};c.sender=f.SFSUser.fromSFSArray(e.get(d.GenericMessageRequest.KEY_SENDER_DATA)),c.message=e.get(d.GenericMessageRequest.KEY_MESSAGE),c.data=e.get(d.GenericMessageRequest.KEY_XTRA_PARAMS),this._sfs.dispatchEvent(a.SFSEvent.MODERATOR_MESSAGE,c)}},{key:'_handleAdminMessage',value:function(e){var c={};c.sender=f.SFSUser.fromSFSArray(e.get(d.GenericMessageRequest.KEY_SENDER_DATA)),c.message=e.get(d.GenericMessageRequest.KEY_MESSAGE),c.data=e.get(d.GenericMessageRequest.KEY_XTRA_PARAMS),this._sfs.dispatchEvent(a.SFSEvent.ADMIN_MESSAGE,c)}},{key:'_fnSetRoomVariables',value:function(g){var j=g.get(C.SetRoomVariablesRequest.KEY_VAR_ROOM),i=g.get(C.SetRoomVariablesRequest.KEY_VAR_LIST),c=this._sfs.roomManager.getRoomById(j),h=new Set();if(null!=c){for(var d=0;d<i.size();d++){var f=Q.SFSRoomVariable.fromSFSArray(i.get(d));c._setVariable(f),h.add(f.name)}var e={};e.changedVars=Array.from(h),e.room=c,this._sfs.dispatchEvent(a.SFSEvent.ROOM_VARIABLES_UPDATE,e)}else {this._logger.warn('Unexpected RoomVariablesUpdate event error; unknown Room id: '+j)}}},{key:'_fnSetUserVariables',value:function(g){var j=g.get(t.SetUserVariablesRequest.KEY_USER),i=g.get(t.SetUserVariablesRequest.KEY_VAR_LIST),c=this._sfs.userManager.getUserById(j),h=new Set();if(null!=c){for(var d=0;d<i.size();d++){var f=x.SFSUserVariable.fromSFSArray(i.get(d));c._setVariable(f),h.add(f.name)}var e={};e.changedVars=Array.from(h),e.user=c,this._sfs.dispatchEvent(a.SFSEvent.USER_VARIABLES_UPDATE,e)}else {this._logger.warn('Unexpected UserVariablesUpdate event error; unknown User id: '+j)}}},{key:'_fnSubscribeRoomGroup',value:function(d){if(null==d.get(e.KEY_ERROR_CODE)){var c=d.get(w.SubscribeRoomGroupRequest.KEY_GROUP_ID),g=d.get(w.SubscribeRoomGroupRequest.KEY_ROOM_LIST);this._sfs.roomManager.containsGroup(c)&&this._logger.warn('Unexpected SubscribeRoomGroup event error; group already subscribed: '+c),this._populateRoomList(g);var f={};f.groupId=c,f.newRooms=this._sfs.roomManager.getRoomListFromGroup(c),this._sfs.dispatchEvent(a.SFSEvent.ROOM_GROUP_SUBSCRIBE,f)}else {this._dispatchError(a.SFSEvent.ROOM_GROUP_SUBSCRIBE_ERROR,d)}}},{key:'_fnUnsubscribeRoomGroup',value:function(d){if(null==d.get(e.KEY_ERROR_CODE)){var c=d.get(F.UnsubscribeRoomGroupRequest.KEY_GROUP_ID);this._sfs.roomManager.containsGroup(c)||this._logger.warn('Unexpected UnsubscribeRoomGroup event error; group not found: '+c+" (maybe never subscribed, or the Room Manager doesn't contain Rooms belonging to that Group)"),this._sfs.roomManager._removeGroup(c);var f={};f.groupId=c,this._sfs.dispatchEvent(a.SFSEvent.ROOM_GROUP_UNSUBSCRIBE,f)}else {this._dispatchError(a.SFSEvent.ROOM_GROUP_UNSUBSCRIBE_ERROR,d)}}},{key:'_fnSpectatorToPlayer',value:function(f){if(null==f.get(e.KEY_ERROR_CODE)){var i=f.get(p.SpectatorToPlayerRequest.KEY_ROOM_ID),j=f.get(p.SpectatorToPlayerRequest.KEY_USER_ID),h=f.get(p.SpectatorToPlayerRequest.KEY_PLAYER_ID),d=this._sfs.userManager.getUserById(j),c=this._sfs.roomManager.getRoomById(i);if(null!=c){if(null!=d){if(d.isJoinedInRoom(c)){d._setPlayerId(h,c);var g={};g.room=c,g.user=d,g.playerId=h,this._sfs.dispatchEvent(a.SFSEvent.SPECTATOR_TO_PLAYER,g)}else {this._logger.warn('Unexpected SpectatorToPlayer event error; User '+d+' not in Room '+c)}}else {this._logger.warn('Unexpected SpectatorToPlayer event error; unknown User id: '+j)}}else {this._logger.warn('Unexpected SpectatorToPlayer event error; unknown Room id: '+i)}}else {this._dispatchError(a.SFSEvent.SPECTATOR_TO_PLAYER_ERROR,f)}}},{key:'_fnPlayerToSpectator',value:function(f){if(null==f.get(e.KEY_ERROR_CODE)){var h=f.get(u.PlayerToSpectatorRequest.KEY_ROOM_ID),i=f.get(u.PlayerToSpectatorRequest.KEY_USER_ID),c=this._sfs.userManager.getUserById(i),d=this._sfs.roomManager.getRoomById(h);if(null!=d){if(null!=c){if(c.isJoinedInRoom(d)){c._setPlayerId(-1,d);var g={};g.room=d,g.user=c,this._sfs.dispatchEvent(a.SFSEvent.PLAYER_TO_SPECTATOR,g)}else {this._logger.warn('Unexpected PlayerToSpectator event error; User '+c+' not in Room '+d)}}else {this._logger.warn('Unexpected SpectatorToPlayer event error; unknown User id: '+i)}}else {this._logger.warn('Unexpected SpectatorToPlayer event error; unknown Room id: '+h)}}else {this._dispatchError(a.SFSEvent.PLAYER_TO_SPECTATOR_ERROR,f)}}},{key:'_fnPingPong',value:function(d){var c={};c.lagValue=this._sfs._lagMonitor._onPingPong(),this._sfs.dispatchEvent(a.SFSEvent.PING_PONG,c)}},{key:'_fnFindRooms',value:function(i){for(var h=i.get(D.FindRoomsRequest.KEY_FILTERED_ROOMS),g=[],c=0;c<h.size();c++){var j=h.get(c),d=l.SFSRoom.fromSFSArray(j),e=this._sfs.roomManager.getRoomById(d.id);null!=e&&(d._isJoined=e._isJoined),g.push(d)}var f={};f.rooms=g,this._sfs.dispatchEvent(a.SFSEvent.ROOM_FIND_RESULT,f)}},{key:'_fnFindUsers',value:function(j){for(var h=j.get(G.FindUsersRequest.KEY_FILTERED_USERS),e=[],g=this._sfs.mySelf,d=0;d<h.size();d++){var k=h.get(d),c=f.SFSUser.fromSFSArray(k);c.id===g.id&&(c=g),e.push(c)}var i={};i.users=e,this._sfs.dispatchEvent(a.SFSEvent.USER_FIND_RESULT,i)}},{key:'_fnQuickJoinGame',value:function(c){null!=c.get(e.KEY_ERROR_CODE)&&this._dispatchError(a.SFSEvent.ROOM_JOIN_ERROR,c)}},{key:'_fnInviteUsers',value:function(c){var h=null;h=null!=c.get(e.InviteUsersRequest.KEY_USER_ID)?this._sfs.userManager.getUserById(c.get(e.InviteUsersRequest.KEY_USER_ID)):f.SFSUser.fromSFSArray(c.get(e.InviteUsersRequest.KEY_USER));var j=c.get(e.InviteUsersRequest.KEY_TIME),k=c.get(e.InviteUsersRequest.KEY_INVITATION_ID),i=c.get(e.InviteUsersRequest.KEY_PARAMS),g=new M.SFSInvitation(h,this._sfs.mySelf,j,i);g._id=k;var d={};d.invitation=g,this._sfs.dispatchEvent(a.SFSEvent.INVITATION,d)}},{key:'_fnInvitationReply',value:function(c){if(null==c.get(e.KEY_ERROR_CODE)){var g=null;g=null!=c.get(e.InviteUsersRequest.KEY_USER_ID)?this._sfs.userManager.getUserById(c.get(e.InviteUsersRequest.KEY_USER_ID)):f.SFSUser.fromSFSArray(c.get(e.InviteUsersRequest.KEY_USER));var i=c.get(e.InviteUsersRequest.KEY_REPLY_ID),h=c.get(e.InviteUsersRequest.KEY_PARAMS),d={};d.invitee=g,d.reply=i,d.data=h,this._sfs.dispatchEvent(a.SFSEvent.INVITATION_REPLY,d)}else {this._dispatchError(a.SFSEvent.INVITATION_REPLY_ERROR,c)}}},{key:'_fnSetUserPosition',value:function(e){var M=e.get(h.SetUserPositionRequest.KEY_ROOM),c=this._sfs.roomManager.getRoomById(M),H=e.get(h.SetUserPositionRequest.KEY_MINUS_USER_LIST),m=e.get(h.SetUserPositionRequest.KEY_PLUS_USER_LIST),I=e.get(h.SetUserPositionRequest.KEY_MINUS_ITEM_LIST),p=e.get(h.SetUserPositionRequest.KEY_PLUS_ITEM_LIST),B=[],D=[],F=[],A=[];if(null!=H){var s=!0,G=!1,C=void 0;try{for(var E,r=H[Symbol.iterator]();!(s=(E=r.next()).done);s=!0){var K=E.value,o=c.getUserById(K);null!=o&&(c._removeUser(o),D.push(o))}}catch(S){G=!0,C=S}finally{try{!s&&r['return']&&r['return']()}finally{if(G){throw C}}}}if(null!=m){for(var l=0;l<m.size();l++){var t=m.get(l),k=this._getOrCreateUser(t,!0,c);B.push(k),c._addUser(k);var w=t.get(5);null!=w&&(k._aoiEntryPoint=y.Vec3D.fromArray(w))}}if(null!=I){var f=!0,J=!1,u=void 0;try{for(var x,i=I[Symbol.iterator]();!(f=(x=i.next()).done);f=!0){var L=x.value,j=c.getMMOItem(L);null!=j&&(c._removeItem(j.id),A.push(j))}}catch(T){J=!0,u=T}finally{try{!f&&i['return']&&i['return']()}finally{if(J){throw u}}}}if(null!=p){for(var g=0;g<p.size();g++){var v=p.get(g),n=N.MMOItem.fromSFSArray(v);F.push(n),c._addMMOItem(n);var z=v.get(2);null!=z&&(n._aoiEntryPoint=y.Vec3D.fromArray(z))}}var d={};d.addedItems=F,d.removedItems=A,d.removedUsers=D,d.addedUsers=B,d.room=c,this._sfs.dispatchEvent(a.SFSEvent.PROXIMITY_LIST_UPDATE,d)}},{key:'_fnInitBuddyList',value:function(c){if(null==c.get(e.KEY_ERROR_CODE)){var j=c.get(m.InitBuddyListRequest.KEY_BLIST),l=c.get(m.InitBuddyListRequest.KEY_MY_VARS),h=c.get(m.InitBuddyListRequest.KEY_BUDDY_STATES);this._sfs.buddyManager._clearAll();for(var g=0;g<j.size();g++){var o=i.SFSBuddy.fromSFSArray(j.get(g));this._sfs.buddyManager._addBuddy(o)}null!=h&&this._sfs.buddyManager._setBuddyStates(h);for(var n=[],d=0;d<l.size();d++){var p=k.SFSBuddyVariable.fromSFSArray(l.get(d));n.push(p)}this._sfs.buddyManager._setMyVariables(n),this._sfs.buddyManager._setInited();var f={};f.buddyList=this._sfs.buddyManager.getBuddyList(),f.myVariables=this._sfs.buddyManager.getMyVariables(),this._sfs.dispatchEvent(a.SFSBuddyEvent.BUDDY_LIST_INIT,f)}else {this._dispatchError(a.SFSBuddyEvent.BUDDY_ERROR,c)}}},{key:'_fnAddBuddy',value:function(c){if(null==c.get(e.KEY_ERROR_CODE)){var d=i.SFSBuddy.fromSFSArray(c.get(E.AddBuddyRequest.KEY_BUDDY_NAME));this._sfs.buddyManager._addBuddy(d);var f={};f.buddy=d,this._sfs.dispatchEvent(a.SFSBuddyEvent.BUDDY_ADD,f)}else {this._dispatchError(a.SFSBuddyEvent.BUDDY_ERROR,c)}}},{key:'_fnRemoveBuddy',value:function(c){if(null==c.get(e.KEY_ERROR_CODE)){var f=c.get(J.RemoveBuddyRequest.KEY_BUDDY_NAME),g=this._sfs.buddyManager._removeBuddyByName(f);if(null!=g){var d={};d.buddy=g,this._sfs.dispatchEvent(a.SFSBuddyEvent.BUDDY_REMOVE,d)}else {this._logger.warn("Unexpected RemoveBuddy event error; can't find "+f+' in local buddy list')}}else {this._dispatchError(a.SFSBuddyEvent.BUDDY_ERROR,c)}}},{key:'_fnBlockBuddy',value:function(c){if(null==c.get(e.KEY_ERROR_CODE)){var g=c.get(j.BlockBuddyRequest.KEY_BUDDY_NAME),d=this._sfs.buddyManager.getBuddyByName(g);null!=c.get(j.BlockBuddyRequest.KEY_BUDDY)?(d=i.SFSBuddy.fromSFSArray(c.get(j.BlockBuddyRequest.KEY_BUDDY)),this._sfs.buddyManager._addBuddy(d)):null!=d?d._isBlocked=c.get(j.BlockBuddyRequest.KEY_BUDDY_BLOCK_STATE):this._logger.warn("Unexpected BlockBuddy event error; can't find "+g+' in local buddy list');var f={};f.buddy=d,this._sfs.dispatchEvent(a.SFSBuddyEvent.BUDDY_BLOCK,f)}else {this._dispatchError(a.SFSBuddyEvent.BUDDY_ERROR,c)}}},{key:'_fnGoOnline',value:function(d){if(null==d.get(e.KEY_ERROR_CODE)){var h=d.get(r.GoOnlineRequest.KEY_BUDDY_NAME),c=this._sfs.buddyManager.getBuddyByName(h),j=h===this._sfs.mySelf.name,l=d.get(r.GoOnlineRequest.KEY_ONLINE),f=l===i.BuddyOnlineState.ONLINE,m=!0;if(j){this._sfs.buddyManager.getMyOnlineState()!=f&&(this._logger.warn("Unexpected GoOnline event error; current user's online state is not in synch with the server; resynching to: "+f),this._sfs.buddyManager._setMyOnlineState(f))}else {if(null==c){return void this._logger.warn("Unexpected GoOnline event error; can't find "+h+' in local buddy list')}c._id=d.get(r.GoOnlineRequest.KEY_BUDDY_ID),c._setVariable(new k.SFSBuddyVariable(k.ReservedBuddyVariables.BV_ONLINE,f)),l===i.BuddyOnlineState.LEFT_THE_SERVER&&c._clearVolatileVariables(),m=this._sfs.buddyManager.getMyOnlineState()}if(m){var g={};g.buddy=c,g.isItMe=j,this._sfs.dispatchEvent(a.SFSBuddyEvent.BUDDY_ONLINE_STATE_CHANGE,g)}}else {this._dispatchError(a.SFSBuddyEvent.BUDDY_ERROR,d)}}},{key:'_fnSetBuddyVariables',value:function(d){if(null==d.get(e.KEY_ERROR_CODE)){for(var h=d.get(A.SetBuddyVariablesRequest.KEY_BUDDY_NAME),n=d.get(A.SetBuddyVariablesRequest.KEY_BUDDY_VARS),f=this._sfs.buddyManager.getBuddyByName(h),o=h===this._sfs.mySelf.name,j=[],i=[],l=!0,g=0;g<n.size();g++){var m=k.SFSBuddyVariable.fromSFSArray(n.get(g));i.push(m),j.push(m.name)}if(o){this._sfs.buddyManager._setMyVariables(i)}else {if(null==f){return void this._logger.warn("Unexpected SetBuddyVariables event error; can't find "+h+' in local buddy list')}f._setVariables(i),l=this._sfs.buddyManager.getMyOnlineState()}if(l){var c={};c.buddy=f,c.isItMe=o,c.changedVars=j,this._sfs.dispatchEvent(a.SFSBuddyEvent.BUDDY_VARIABLES_UPDATE,c)}}else {this._dispatchError(a.SFSBuddyEvent.BUDDY_ERROR,d)}}},{key:'_fnUserEnterRoom',value:function(g){var c=this._sfs.roomManager.getRoomById(g.get(e.ROOM_PARAM));if(null!=c){var h=g.get(e.USER_PARAM),f=this._getOrCreateUser(h,!0,c);c._addUser(f);var d={};d.user=f,d.room=c,this._sfs.dispatchEvent(a.SFSEvent.USER_ENTER_ROOM,d)}}},{key:'_fnUserCountChange',value:function(f){var c=this._sfs.roomManager.getRoomById(f.get(e.ROOM_PARAM));if(null!=c){var h=f.get(e.USER_COUNT_PARAM),g=null!=f.get(e.SPECT_COUNT_PARAM)?f.get(e.SPECT_COUNT_PARAM):0;c._userCount=h,c._specCount=g;var d={};d.room=c,d.uCount=h,d.sCount=g,this._sfs.dispatchEvent(a.SFSEvent.USER_COUNT_CHANGE,d)}}},{key:'_fnUserLost',value:function(m){var c=this._sfs.userManager.getUserById(m.get(e.USER_PARAM));if(null!=c){var l=this._sfs.roomManager.getUserRooms(c);this._sfs.roomManager._removeUser(c),this._sfs.userManager._removeUserReference(c,!0);var g=!0,i=!1,h=void 0;try{for(var j,d=l[Symbol.iterator]();!(g=(j=d.next()).done);g=!0){var k=j.value,f={};f.user=c,f.room=k,this._sfs.dispatchEvent(a.SFSEvent.USER_EXIT_ROOM,f)}}catch(S){i=!0,h=S}finally{try{!g&&d['return']&&d['return']()}finally{if(i){throw h}}}}}},{key:'_fnRoomLost',value:function(l){var c=this._sfs.roomManager.getRoomById(l.get(e.ROOM_PARAM));if(null!=c){this._sfs.roomManager._removeRoom(c);var d=!0,h=!1,j=void 0;try{for(var g,f=c.getUserList()[Symbol.iterator]();!(d=(g=f.next()).done);d=!0){var k=g.value;this._sfs.userManager._removeUser(k)}}catch(S){h=!0,j=S}finally{try{!d&&f['return']&&f['return']()}finally{if(h){throw j}}}var i={};i.room=c,this._sfs.dispatchEvent(a.SFSEvent.ROOM_REMOVE,i)}}},{key:'_fnUserExitRoom',value:function(g){var c=this._sfs.roomManager.getRoomById(g.get(e.ROOM_PARAM)),d=this._sfs.userManager.getUserById(g.get(e.USER_PARAM));if(null!=c&&null!=d){c._removeUser(d),this._sfs.userManager._removeUser(d),d.isItMe&&c.isJoined&&(c._isJoined=!1,0!==this._sfs.roomManager.getJoinedRooms().length&&this._sfs._lastJoinedRoom!==c||(this._sfs._lastJoinedRoom=null),c._isManaged||this._sfs.roomManager._removeRoom(c));var f={};f.user=d,f.room=c,this._sfs.dispatchEvent(a.SFSEvent.USER_EXIT_ROOM,f)}else {this._logger.debug('Failed to handle UserExit event; Room: '+c+', User: '+d)}}},{key:'_fnClientDisconnection',value:function(c){var a=c.get(e.DISCONNECTION_REASON_PARAM);this._sfs._handleClientDisconnection(L.ClientDisconnectionReason.getReason(a))}},{key:'_fnSetMMOItemVariables',value:function(e){var l=e.get(o.SetMMOItemVariables.KEY_ROOM_ID),i=e.get(o.SetMMOItemVariables.KEY_ITEM_ID),j=e.get(o.SetMMOItemVariables.KEY_VAR_LIST),f=this._sfs.roomManager.getRoomById(l),k=new Set();if(null!=f){var d=f.getMMOItem(i);if(null!=d){for(var g=0;g<j.size();g++){var h=O.MMOItemVariable.fromSFSArray(j.get(g));d._setVariable(h),k.add(h.name)}var c={};c.changedVars=Array.from(k),c.mmoItem=d,c.room=f,this._sfs.dispatchEvent(a.SFSEvent.MMOITEM_VARIABLES_UPDATE,c)}else {this._logger.warn('Unexpected MMOItemVariablesUpdate event error; unknown MMOItem id: '+i)}}else {this._logger.warn('Unexpected MMOItemVariablesUpdate event error; unknown MMORoom id: '+l)}}},{key:'_dispatchError',value:function(d,c){var a={};a.errorCode=c.get(e.KEY_ERROR_CODE),a.errorMessage=P.SFSErrorCodes.getErrorMessage(a.errorCode,c.get(e.KEY_ERROR_PARAMS)),this._sfs.dispatchEvent(d,a)}},{key:'_populateRoomList',value:function(c){for(var a=0;a<c.size();a++){var d=l.SFSRoom.fromSFSArray(c.get(a));this._sfs.roomManager._replaceRoom(d)}}},{key:'_getOrCreateUser',value:function(c,i,g){var h=c.get(0),a=this._sfs.userManager.getUserById(h);if(null==a){(a=f.SFSUser.fromSFSArray(c,g))._setUserManager(this._sfs.userManager)}else {a._setPlayerId(c.get(3),g);var d=c.get(4);if(null!=d){for(var e=0;e<d.size();e++){a._setVariable(x.SFSUserVariable.fromSFSArray(d.get(e)))}}}return i&&this._sfs.userManager._addUser(a),a}},{key:'id',get:function(){return this._id}}]),e}();q.SystemController=I},function(s,f,a){Object.defineProperty(f,'__esModule',{value:!0}),f.SmartFox=void 0;var p=function(){function e(e,d){for(var c=0;c<d.length;c++){var b=d[c];b.enumerable=b.enumerable||!1,b.configurable=!0,'value' in b&&(b.writable=!0),Object.defineProperty(e,b.key,b)}}return function(b,c,d){return c&&e(b.prototype,c),d&&e(b,d),b}}(),l=a(173),n=a(166),b=a(38),g=a(1),c=a(165),h=a(118),m=a(163),j=a(162),e=a(2),d=a(161),r=a(73),o=a(50),i=a(160),k=a(51);var q=function(q){function t(){var d=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;!function(b,c){if(!(b instanceof c)){throw new TypeError('Cannot call a class as a function')}}(this,t);var b=function(c,b){if(!c){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return !b||'object'!=typeof b&&'function'!=typeof b?c:b}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return b._majVersion=1,b._minVersion=7,b._subVersion=11,b._configData=d,b._logger=o.Logger.instance,b._sessionToken=null,b._socketEngine=new c.SocketEngine(b),b._socketEngine.addEventListener(c.SocketEvent.CONNECT,b._onSocketConnect,b),b._socketEngine.addEventListener(c.SocketEvent.DISCONNECT,b._onSocketDisconnect,b),b._socketEngine.addEventListener(c.SocketEvent.DATA,b._onSocketData,b),b._socketEngine.addEventListener(c.SocketEvent.IOERROR,b._onSocketIOError,b),b._controllers={},b._controllers[0]=new l.SystemController(b),b._controllers[1]=new n.ExtensionController(b),b._reset(),b._clientDetails='JavaScript',b.debug=null!=b.config&&b.config.debug,b.debug&&(b._logger.info('SmartFox instance ready'),b._logger.info('SFS2X JavaScript API v'+b.version)),Object.seal(b),b}return function(c,b){if('function'!=typeof b&&null!==b){throw new TypeError('Super expression must either be null or a function, not '+typeof b)}c.prototype=Object.create(b&&b.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(c,b):c.__proto__=b)}(t,b.EventDispatcher),p(t,[{key:'setClientDetails',value:function(b,c){if(this.isConnected){this._logger.warn('Method setClientDetails must be called before the connection is started')}else {b=null!=b?b.replace(':',' '):'',c=null!=c?c.replace(':',' '):'',this._clientDetails=b+':'+c}}},{key:'connect',value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,g=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(this.debug&&this._logger.info('Attempting connection to server'),this.isConnected){this._logger.warn('Connection attempt interrupted: already connected')}else {if(this._socketEngine.isConnecting){this._logger.warn('Connection attempt interrupted: another attempt is already in progress')}else {var c=null!=this.config&&null!=this.config.host?this.config.host:null,b=null!=this.config&&null!=this.config.port?this.config.port:null,d=null!=this.config&&this.config.useSSL;null!=e&&(c=e),h>-1&&(b=h),null!=g&&(d=g),null!=c&&'string'==typeof c&&0!==c.length?'number'!=typeof b||b<0||b>65535?this._logger.error('Invalid TCP connection port: '+b):('boolean'!=typeof d&&(d=!1),this._socketEngine.connect(c,b,d)):this._logger.error('Invalid connection host/address')}}}},{key:'disconnect',value:function(){this.isConnected&&this._handleClientDisconnection(k.ClientDisconnectionReason.MANUAL)}},{key:'enableLagMonitor',value:function(b){var d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;null!=this.mySelf?(null!=this._lagMonitor&&this._lagMonitor.destroy(),b&&(this._lagMonitor=new i.LagMonitor(this,d,c),this._lagMonitor.start())):this._logger.warn('Lag monitoring requires that you are logged in a Zone; please retry after completing the login process')}},{key:'send',value:function(b){if(this.isConnected){if(null!=b.validate&&null!=b.execute){this.debug&&this._logger.info("Sending request '"+e.Requests.getNameFromId(b.id)+"' to server");try{b.validate(this),b.execute(this)}catch(u){if(!(u instanceof g.SFSValidationError&&null!=u.message)){throw u}var d=u.message;if(null!=u.errors){d+=':';for(var c=0;c<u.errors.length;c++){u.errors.length>1&&(d+=' '+(c+1)+')'),d+=' '+u.errors[c]}}return this._logger.error('Request failed | '+d),!1}return this._socketEngine.send(b.getMessage()),!0}this._logger.error('An invalid request was passed: '+b)}else {this._logger.error('You are not connected. Request cannot be sent: '+e.Requests.getNameFromId(b.id))}}},{key:'getRoomById',value:function(b){return this.roomManager.getRoomById(b)}},{key:'getRoomByName',value:function(b){return this.roomManager.getRoomByName(b)}},{key:'getRoomList',value:function(){return this.roomManager.getRoomList()}},{key:'getRoomListFromGroup',value:function(b){return this.roomManager.getRoomListFromGroup(b)}},{key:'getJoinedRooms',value:function(){return this.roomManager.getJoinedRooms()}},{key:'_reset',value:function(){var b=arguments.length>0&&void 0!==arguments[0]&&arguments[0];null!=this._buddyManager&&(this._buddyManager._clearAll(),this._buddyManager._inited=!1),this._userManager=new h.GlobalUserManager(this),this._roomManager=new m.SFSRoomManager(this),this._buddyManager=new j.SFSBuddyManager(this),null!=this._lagMonitor&&this._lagMonitor.destroy(),this._lagMonitor=null,this._isJoining=!1,this._currentZone=null,this._lastJoinedRoom=null,this._mySelf=null,b&&(this._sessionToken=null)}},{key:'_onSocketConnect',value:function(c){c.success?this.send(new d.HandshakeRequest(this.version,this._clientDetails)):this.dispatchEvent(b.SFSEvent.CONNECTION,{success:!1})}},{key:'_onSocketDisconnect',value:function(c){this.dispatchEvent(b.SFSEvent.CONNECTION_LOST,{reason:c.reason}),this._reset(!0)}},{key:'_onSocketData',value:function(b){var d=b.targetController,c=b.id,e=b.content;null!=d?null!=c?this._controllers[d].handleMessage(e,c):this._logger.error('Incoming message rejected: Command ID is missing'):this._logger.error('Incoming message rejected: Controller ID is missing')}},{key:'_onSocketIOError',value:function(c){this.dispatchEvent(b.SFSEvent.SOCKET_ERROR,{message:c})}},{key:'_handleHandShake',value:function(c){var g=c.get(e.BaseRequest.KEY_ERROR_CODE);if(null==g){this._sessionToken=c.get(d.HandshakeRequest.KEY_SESSION_TOKEN),this._socketEngine.maxMessageSize=c.get(d.HandshakeRequest.KEY_MAX_MESSAGE_SIZE),this._socketEngine.compressionThreshold=c.get(d.HandshakeRequest.KEY_COMPRESSION_THRESHOLD),this.dispatchEvent(b.SFSEvent.CONNECTION,{success:!0})}else {var h={success:!1,errorMessage:r.SFSErrorCodes.getErrorMessage(g,c.get(e.BaseRequest.KEY_ERROR_PARAMS)),errorCode:g};this.dispatchEvent(b.SFSEvent.CONNECTION,h)}}},{key:'_handleLogout',value:function(){this._reset()}},{key:'_handleClientDisconnection',value:function(b){this.isConnected&&this._socketEngine.disconnect(b)}},{key:'version',get:function(){return this._majVersion+'.'+this._minVersion+'.'+this._subVersion}},{key:'config',get:function(){return this._configData}},{key:'logger',get:function(){return this._logger}},{key:'sessionToken',get:function(){return this._sessionToken}},{key:'roomManager',get:function(){return this._roomManager}},{key:'userManager',get:function(){return this._userManager}},{key:'buddyManager',get:function(){return this._buddyManager}},{key:'mySelf',get:function(){return this._mySelf}},{key:'lastJoinedRoom',get:function(){return this._lastJoinedRoom}},{key:'isConnected',get:function(){return null!=this._socketEngine&&this._socketEngine.isConnected}},{key:'maxMessageSize',get:function(){return null!=this._socketEngine?this._socketEngine.maxMessageSize:0}}]),t}();f.SmartFox=q},function(d,e,b){var c=b(0),a=b(88);a&&c(c.S,'Reflect',{setPrototypeOf:function(c,f){a.check(c,f);try{return a.set(c,f),!0}catch(g){return !1}}})},function(c,k,a){var i=a(9),d=a(23),h=a(31),j=a(16),b=a(0),f=a(36),g=a(5),e=a(4);b(b.S,'Reflect',{set:function c(o,m,n){var p,q,l=arguments.length<4?o:arguments[3],b=d.f(g(o),m);if(!b){if(e(q=h(o))){return c(q,m,n,l)}b=f(0)}return j(b,'value')?!(!1===b.writable||!e(l)||((p=d.f(l,m)||f(0)).value=n,i.f(l,m,p),0)):void 0!==b.set&&(b.set.call(l,n),!0)}})},function(e,f,a){var c=a(0),d=a(5),b=Object.preventExtensions;c(c.S,'Reflect',{preventExtensions:function(c){d(c);try{return b&&b(c),!0}catch(g){return !1}}})},function(c,g,a){var f=a(32),d=a(67),e=a(5),b=a(6).Reflect;c.exports=b&&b.ownKeys||function(b){var i=f.f(e(b)),h=d.f;return h?i.concat(h(b)):i}},function(c,d,a){var b=a(0);b(b.S,'Reflect',{ownKeys:a(178)})},function(e,f,a){var c=a(0),d=a(5),b=Object.isExtensible;c(c.S,'Reflect',{isExtensible:function(c){return d(c),!b||b(c)}})},function(c,d,b){var a=b(0);a(a.S,'Reflect',{has:function(a,e){return e in a}})},function(e,f,a){var b=a(0),c=a(31),d=a(5);b(b.S,'Reflect',{getPrototypeOf:function(b){return c(d(b))}})},function(e,f,a){var d=a(23),b=a(0),c=a(5);b(b.S,'Reflect',{getOwnPropertyDescriptor:function(b,g){return d.f(c(b),g)}})},function(b,i,a){var g=a(23),e=a(31),f=a(16),c=a(0),d=a(4),h=a(5);c(c.S,'Reflect',{get:function b(j,l){var c,m,k=arguments.length<3?j:arguments[2];return h(j)===k?j[l]:(c=g.f(j,l))?f(c,'value')?c.value:void 0!==c.get?c.get.call(k):void 0:d(m=e(j))?b(m,l,k):void 0}})},function(e,f,a){var c=a(0),d=a(5),b=function(b){this._t=d(b),this._i=0;var c,g=this._k=[];for(c in b){g.push(c)}};a(132)(b,'Object',function(){var b,c=this._k;do{if(this._i>=c.length){return {value:void 0,done:!0}}}while(!((b=c[this._i++]) in this._t));return {value:b,done:!1}}),c(c.S,'Reflect',{enumerate:function(c){return new b(c)}})},function(e,f,a){var b=a(0),c=a(23).f,d=a(5);b(b.S,'Reflect',{deleteProperty:function(b,h){var g=c(d(b),h);return !(g&&!g.configurable)&&delete b[h]}})},function(f,g,a){var d=a(9),b=a(0),c=a(5),e=a(30);b(b.S+b.F*a(3)(function(){Reflect.defineProperty(d.f({},1,{value:1}),1,{value:2})}),'Reflect',{defineProperty:function(h,b,i){c(h),b=e(b,!0),c(i);try{return d.f(h,b,i),!0}catch(j){return !1}}})},function(l,m,a){var c=a(0),j=a(33),g=a(26),k=a(5),d=a(4),h=a(3),i=a(141),b=(a(6).Reflect||{}).construct,e=h(function(){function e(){}return !(b(function(){},[],e) instanceof e)}),f=!h(function(){b(function(){})});c(c.S+c.F*(e||f),'Reflect',{construct:function(h,c){g(h),k(c);var n=arguments.length<3?h:g(arguments[2]);if(f&&!e){return b(h,c,n)}if(h==n){switch(c.length){case 0:return new h();case 1:return new h(c[0]);case 2:return new h(c[0],c[1]);case 3:return new h(c[0],c[1],c[2]);case 4:return new h(c[0],c[1],c[2],c[3]);}var o=[null];return o.push.apply(o,c),new (i.apply(h,o))()}var q=n.prototype,p=j(d(q)?q:Object.prototype),r=Function.apply.call(h,p,c);return d(r)?r:p}})},function(g,h,a){var b=a(0),e=a(26),f=a(5),c=(a(6).Reflect||{}).apply,d=Function.apply;b(b.S+b.F*!a(3)(function(){c(function(){})}),'Reflect',{apply:function(k,i,l){var b=e(k),j=f(l);return c?c(b,i,j):d.call(b,i,j)}})},function(b,c,a){a(22)('Float64',8,function(d){return function(g,e,f){return d(this,g,e,f)}})},function(b,c,a){a(22)('Float32',4,function(d){return function(g,e,f){return d(this,g,e,f)}})},function(b,c,a){a(22)('Uint32',4,function(d){return function(g,e,f){return d(this,g,e,f)}})},function(b,c,a){a(22)('Int32',4,function(d){return function(g,e,f){return d(this,g,e,f)}})},function(b,c,a){a(22)('Uint16',2,function(d){return function(g,e,f){return d(this,g,e,f)}})},function(b,c,a){a(22)('Int16',2,function(d){return function(g,e,f){return d(this,g,e,f)}})},function(b,c,a){a(22)('Uint8',1,function(d){return function(g,e,f){return d(this,g,e,f)}},!0)},function(b,c,a){a(22)('Uint8',1,function(d){return function(g,e,f){return d(this,g,e,f)}})},function(b,c,a){a(22)('Int8',1,function(d){return function(g,e,f){return d(this,g,e,f)}})},function(c,d,b){var a=b(0);a(a.G+a.W+a.F*!b(59).ABV,{DataView:b(74).DataView})},function(p,q,a){var b=a(0),d=a(59),h=a(74),j=a(5),f=a(34),o=a(12),l=a(4),g=a(6).ArrayBuffer,n=a(75),c=h.ArrayBuffer,e=h.DataView,k=d.ABV&&g.isView,i=c.prototype.slice,m=d.VIEW;b(b.G+b.W+b.F*(g!==c),{ArrayBuffer:c}),b(b.S+b.F*!d.CONSTR,'ArrayBuffer',{isView:function(b){return k&&k(b)||l(b)&&m in b}}),b(b.P+b.U+b.F*a(3)(function(){return !(new c(2)).slice(1,void 0).byteLength}),'ArrayBuffer',{slice:function(h,g){if(void 0!==i&&void 0===g){return i.call(j(this),h)}for(var b=j(this).byteLength,d=f(h,b),k=f(void 0===g?b:g,b),l=new (n(this,c))(o(k-d)),m=new e(this),r=new e(l),s=0;d<k;){r.setUint8(s++,m.getUint8(d++))}return l}}),a(42)('ArrayBuffer')},function(d,e,a){var b=a(121),c=a(39);a(60)('WeakSet',function(b){return function(){return b(this,arguments.length>0?arguments[0]:void 0)}},{add:function(f){return b.def(c(this,'WeakSet'),f,!0)}},b,!1,!0)},function(m,s,a){var h,o=a(19)(0),q=a(15),i=a(29),l=a(142),b=a(121),c=a(4),p=a(3),e=a(39),n=i.getWeak,k=Object.isExtensible,r=b.ufstore,g={},d=function(b){return function(){return b(this,arguments.length>0?arguments[0]:void 0)}},f={get:function(b){if(c(b)){var d=n(b);return !0===d?r(e(this,'WeakMap')).get(b):d?d[this._i]:void 0}},set:function(c,d){return b.def(e(this,'WeakMap'),c,d)}},j=m.exports=a(60)('WeakMap',d,f,b,!0,!0);p(function(){return 7!=(new j()).set((Object.freeze||Object)(g),7).get(g)})&&(l((h=b.getConstructor(d,'WeakMap')).prototype,f),i.NEED=!0,o(['delete','has','get','set'],function(b){var d=j.prototype,e=d[b];q(d,b,function(d,f){if(c(d)&&!k(d)){this._f||(this._f=new h());var g=this._f[b](d,f);return 'set'==b?this:g}return e.call(this,d,f)})}))},function(c,e,a){var b=a(122),d=a(39);c.exports=a(60)('Set',function(b){return function(){return b(this,arguments.length>0?arguments[0]:void 0)}},{add:function(f){return b.def(d(this,'Set'),f=0===f?0:f,f)}},b)},function(d,e,a){var b=a(122),c=a(39);d.exports=a(60)('Map',function(b){return function(){return b(this,arguments.length>0?arguments[0]:void 0)}},{get:function(g){var f=b.getEntry(c(this,'Map'),g);return f&&f.v},set:function(f,g){return b.def(c(this,'Map'),0===f?0:f,g)}},b,!0)},function(b,f,a){var e=a(5),c=a(4),d=a(123);b.exports=function(h,g){if(e(h),c(g)&&g.constructor===h){return g}var i=d.f(h);return (0,i.resolve)(g),i.promise}},function(a,b){a.exports=function(c){try{return {e:!1,v:c()}}catch(d){return {e:!0,v:d}}}},function(g,i,c){var a=c(6),h=c(124).set,e=a.MutationObserver||a.WebKitMutationObserver,d=a.process,b=a.Promise,f='process'==c(25)(d);g.exports=function(){var j,l,k,m=function(){var a,b;for(f&&(a=d.domain)&&a.exit();j;){b=j.fn,j=j.next;try{b()}catch(q){throw j?k():l=void 0,q}}l=void 0,a&&a.enter()};if(f){k=function(){d.nextTick(m)}}else {if(!e||a.navigator&&a.navigator.standalone){if(b&&b.resolve){var p=b.resolve();k=function(){p.then(m)}}else {k=function(){h.call(a,m)}}}else {var n=!0,o=document.createTextNode('');(new e(m)).observe(o,{characterData:!0}),k=function(){o.data=n=!n}}}return function(b){var a={fn:b,next:void 0};l&&(l.next=a),j||(j=a,k()),l=a}}},function(I,J,a){var o,w,x,p,t=a(43),d=a(6),e=a(27),G=a(65),b=a(0),F=a(4),D=a(26),H=a(41),y=a(61),E=a(75),v=a(124).set,z=a(207)(),u=a(123),n=a(206),C=a(205),q=d.TypeError,j=d.process,c=d.Promise,g='process'==G(j),k=function(){},h=w=u.f,i=!!function(){try{var b=c.resolve(1),d=(b.constructor={})[a(7)('species')]=function(b){b(k,k)};return (g||'function'==typeof PromiseRejectionEvent)&&b.then(k) instanceof d}catch(K){}}(),s=function(b){var c;return !(!F(b)||'function'!=typeof (c=b.then))&&c},m=function(b,d){if(!b._n){b._n=!0;var c=b._c;z(function(){for(var e=b._v,f=1==b._s,g=0,h=function(h){var g,k,l,j=f?h.ok:h.fail,m=h.resolve,i=h.reject,c=h.domain;try{j?(f||(2==b._h&&A(b),b._h=1),!0===j?g=e:(c&&c.enter(),g=j(e),c&&(c.exit(),l=!0)),g===h.promise?i(q('Promise-chain cycle')):(k=s(g))?k.call(g,m,i):m(g)):i(e)}catch(K){c&&!l&&c.exit(),i(K)}};c.length>g;){h(c[g++])}b._c=[],b._n=!1,d&&!b._h&&B(b)})}},B=function(b){v.call(d,function(){var f,h,e,c=b._v,i=r(b);if(i&&(f=n(function(){g?j.emit('unhandledRejection',c,b):(h=d.onunhandledrejection)?h({promise:b,reason:c}):(e=d.console)&&e.error&&e.error('Unhandled promise rejection',c)}),b._h=g||r(b)?2:1),b._a=void 0,i&&f.e){throw f.v}})},r=function(b){return 1!==b._h&&0===(b._a||b._c).length},A=function(b){v.call(d,function(){var c;g?j.emit('rejectionHandled',b):(c=d.onrejectionhandled)&&c({promise:b,reason:b._v})})},f=function(c){var b=this;b._d||(b._d=!0,(b=b._w||b)._v=c,b._s=2,b._a||(b._a=b._c.slice()),m(b,!0))},l=function(c){var d,b=this;if(!b._d){b._d=!0,b=b._w||b;try{if(b===c){throw q("Promise can't be resolved itself")}(d=s(c))?z(function(){var g={_w:b,_d:!1};try{d.call(c,e(l,g,1),e(f,g,1))}catch(K){f.call(g,K)}}):(b._v=c,b._s=1,m(b,!1))}catch(K){f.call({_w:b,_d:!1},K)}}};i||(c=function(b){H(this,c,'Promise','_h'),D(b),o.call(this);try{b(e(l,this,1),e(f,this,1))}catch(K){f.call(this,K)}},(o=function(b){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=a(40)(c.prototype,{then:function(d,e){var b=h(E(this,c));return b.ok='function'!=typeof d||d,b.fail='function'==typeof e&&e,b.domain=g?j.domain:void 0,this._c.push(b),this._a&&this._a.push(b),this._s&&m(this,!1),b.promise},'catch':function(b){return this.then(void 0,b)}}),x=function(){var b=new o();this.promise=b,this.resolve=e(l,b,1),this.reject=e(f,b,1)},u.f=h=function(b){return b===c||b===p?new x(b):w(b)}),b(b.G+b.W+b.F*!i,{Promise:c}),a(44)(c,'Promise'),a(42)('Promise'),p=a(37).Promise,b(b.S+b.F*!i,'Promise',{reject:function(c){var b=h(this);return (0,b.reject)(c),b.promise}}),b(b.S+b.F*(t||!i),'Promise',{resolve:function(b){return C(t&&this===p?c:this,b)}}),b(b.S+b.F*!(i&&a(63)(function(b){c.all(b)['catch'](k)})),'Promise',{all:function(g){var f=this,b=h(f),e=b.resolve,c=b.reject,d=n(function(){var b=[],h=0,d=1;y(g,!1,function(k){var j=h++,i=!1;b.push(void 0),d++,f.resolve(k).then(function(c){i||(i=!0,b[j]=c,--d||e(b))},c)}),--d||e(b)});return d.e&&c(d.v),b.promise},race:function(f){var e=this,b=h(e),d=b.reject,c=n(function(){y(f,!1,function(c){e.resolve(c).then(b.resolve,d)})});return c.e&&d(c.v),b.promise}})},function(b,c,a){a(62)('split',2,function(g,j,d){var h=a(81),f=d,i=[].push;if('c'=='abbc'.split(/(b)*/)[1]||4!='test'.split(/(?:)/,-1).length||2!='ab'.split(/(?:ab)*/).length||4!='.'.split(/(.?)(.?)/).length||'.'.split(/()()/).length>1||''.split(/.?/).length){var e=void 0===/()??/.exec('')[1];d=function(l,r){var n=String(this);if(void 0===l&&0===r){return []}if(!h(l)){return f.call(n,l,r)}var w,k,u,v,p,m=[],t=(l.ignoreCase?'i':'')+(l.multiline?'m':'')+(l.unicode?'u':'')+(l.sticky?'y':''),q=0,s=void 0===r?4.294967295E9:r>>>0,o=new RegExp(l.source,t+'g');for(e||(w=new RegExp('^'+o.source+'$(?!\\s)',t));(k=o.exec(n))&&!((u=k.index+k[0].length)>q&&(m.push(n.slice(q,k.index)),!e&&k.length>1&&k[0].replace(w,function(){for(p=1;p<arguments.length-2;p++){void 0===arguments[p]&&(k[p]=void 0)}}),k.length>1&&k.index<n.length&&i.apply(m,k.slice(1)),v=k[0].length,q=u,m.length>=s));){o.lastIndex===k.index&&o.lastIndex++}return q===n.length?!v&&o.test('')||m.push(''):m.push(n.slice(q)),m.length>s?m.slice(0,s):m}}else {'0'.split(void 0,0).length&&(d=function(e,h){return void 0===e&&0===h?[]:f.call(this,e,h)})}return [function(e,f){var h=g(this),i=void 0==e?void 0:e[j];return void 0!==i?i.call(e,h,f):d.call(String(h),e,f)},d]})},function(b,c,a){a(62)('search',1,function(e,d,f){return [function(g){var i=e(this),h=void 0==g?void 0:g[d];return void 0!==h?h.call(g,i):(new RegExp(g))[d](String(i))},f]})},function(b,c,a){a(62)('replace',2,function(e,f,d){return [function(g,h){var i=e(this),j=void 0==g?void 0:g[f];return void 0!==j?j.call(g,i,h):d.call(String(i),g,h)},d]})},function(b,c,a){a(62)('match',1,function(e,d,f){return [function(g){var i=e(this),h=void 0==g?void 0:g[d];return void 0!==h?h.call(g,i):(new RegExp(g))[d](String(i))},f]})},function(g,h,a){a(125);var f=a(5),d=a(76),e=a(11),b=/./.toString,c=function(b){a(15)(RegExp.prototype,'toString',b,!0)};a(3)(function(){return '/a/b'!=b.call({source:'a',flags:'b'})})?c(function(){var b=f(this);return '/'.concat(b.source,'/','flags' in b?b.flags:!e&&b instanceof RegExp?d.call(b):void 0)}):'toString'!=b.name&&c(function(){return b.call(this)})},function(q,r,b){var i=b(6),l=b(86),m=b(9).f,o=b(32).f,k=b(81),p=b(76),a=i.RegExp,d=a,f=a.prototype,c=/a/g,e=/a/g,j=new a(c)!==c;if(b(11)&&(!j||b(3)(function(){return e[b(7)('match')]=!1,a(c)!=c||a(e)==e||'/a/i'!=a(c,'i')}))){a=function(c,h){var i=this instanceof a,e=k(c),g=void 0===h;return !i&&e&&c.constructor===a&&g?c:l(j?new d(e&&!g?c.source:c,h):d((e=c instanceof a)?c.source:c,e&&g?p.call(c):h),i?this:f,a)};for(var n=function(c){c in a||m(a,c,{configurable:!0,get:function(){return d[c]},set:function(a){d[c]=a}})},g=o(d),h=0;g.length>h;){n(g[h++])}f.constructor=a,a.prototype=f,b(15)(i,'RegExp',a)}b(42)('RegExp')},function(b,c,a){a(42)('Array')},function(f,g,a){var c=a(0),e=a(19)(6),b='findIndex',d=!0;b in []&&Array(1)[b](function(){d=!1}),c(c.P+c.F*d,'Array',{findIndex:function(b){return e(this,b,arguments.length>1?arguments[1]:void 0)}}),a(52)(b)},function(e,f,a){var b=a(0),d=a(19)(5),c=!0;'find' in []&&Array(1).find(function(){c=!1}),b(b.P+b.F*c,'Array',{find:function(b){return d(this,b,arguments.length>1?arguments[1]:void 0)}}),a(52)('find')},function(c,d,a){var b=a(0);b(b.P,'Array',{fill:a(77)}),a(52)('fill')},function(c,d,a){var b=a(0);b(b.P,'Array',{copyWithin:a(128)}),a(52)('copyWithin')},function(h,i,a){var c=a(0),e=a(21),f=a(24),g=a(12),b=[].lastIndexOf,d=!!b&&1/[1].lastIndexOf(1,-0)<0;c(c.P+c.F*(d||!a(17)(b)),'Array',{lastIndexOf:function(l){if(d){return b.apply(this,arguments)||0}var j=e(this),k=g(j.length),c=k-1;for(arguments.length>1&&(c=Math.min(c,f(arguments[1]))),c<0&&(c=k+c);c>=0;c--){if(c in j&&j[c]===l){return c||0}}return -1}})},function(f,g,a){var c=a(0),e=a(93)(!1),b=[].indexOf,d=!!b&&1/[1].indexOf(1,-0)<0;c(c.P+c.F*(d||!a(17)(b)),'Array',{indexOf:function(c){return d?b.apply(this,arguments)||0:e(this,c,arguments[1])}})},function(d,e,a){var b=a(0),c=a(129);b(b.P+b.F*!a(17)([].reduceRight,!0),'Array',{reduceRight:function(b){return c(this,b,arguments.length,arguments[1],!0)}})},function(d,e,a){var b=a(0),c=a(129);b(b.P+b.F*!a(17)([].reduce,!0),'Array',{reduce:function(b){return c(this,b,arguments.length,arguments[1],!1)}})},function(d,e,a){var b=a(0),c=a(19)(4);b(b.P+b.F*!a(17)([].every,!0),'Array',{every:function(b){return c(this,b,arguments[1])}})},function(d,e,a){var b=a(0),c=a(19)(3);b(b.P+b.F*!a(17)([].some,!0),'Array',{some:function(b){return c(this,b,arguments[1])}})},function(d,e,a){var b=a(0),c=a(19)(2);b(b.P+b.F*!a(17)([].filter,!0),'Array',{filter:function(b){return c(this,b,arguments[1])}})},function(d,e,a){var b=a(0),c=a(19)(1);b(b.P+b.F*!a(17)([].map,!0),'Array',{map:function(b){return c(this,b,arguments[1])}})},function(c,f,a){var e=a(4),b=a(90),d=a(7)('species');c.exports=function(h){var g;return b(h)&&('function'!=typeof (g=h.constructor)||g!==Array&&!b(g.prototype)||(g=void 0),e(g)&&null===(g=g[d])&&(g=void 0)),void 0===g?Array:g}},function(a,d,b){var c=b(228);a.exports=function(e,f){return new (c(e))(f)}},function(e,f,a){var b=a(0),c=a(19)(0),d=a(17)([].forEach,!0);b(b.P+b.F*!d,'Array',{forEach:function(b){return c(this,b,arguments[1])}})},function(h,i,a){var c=a(0),g=a(26),d=a(14),e=a(3),b=[].sort,f=[1,2,3];c(c.P+c.F*(e(function(){f.sort(void 0)})||!e(function(){f.sort(null)})||!a(17)(b)),'Array',{sort:function(c){return void 0===c?b.call(d(this)):b.call(d(this),g(c))}})},function(h,i,a){var b=a(0),d=a(89),g=a(25),e=a(34),c=a(12),f=[].slice;b(b.P+b.F*a(3)(function(){d&&f.call(d)}),'Array',{slice:function(l,d){var k=c(this.length),o=g(this);if(d=void 0===d?k:d,'Array'==o){return f.call(this,l,d)}for(var j=e(l,k),p=e(d,k),n=c(p-j),m=new Array(n),b=0;b<n;b++){m[b]='String'==o?this.charAt(j+b):this[j+b]}return m}})},function(e,f,a){var b=a(0),d=a(21),c=[].join;b(b.P+b.F*(a(54)!=Object||!a(17)(c)),'Array',{join:function(b){return c.call(d(this),void 0===b?',':b)}})},function(d,e,a){var b=a(0),c=a(130);b(b.S+b.F*a(3)(function(){function e(){}return !(Array.of.call(e) instanceof e)}),'Array',{of:function(){for(var b=0,g=arguments.length,f=new ('function'==typeof this?this:Array)(g);g>b;){c(f,b,arguments[b++])}return f.length=g,f}})},function(j,k,a){var g=a(27),b=a(0),f=a(14),h=a(131),d=a(79),i=a(12),c=a(130),e=a(78);b(b.S+b.F*!a(63)(function(b){Array.from(b)}),'Array',{from:function(v){var t,l,r,q,m=f(v),o='function'==typeof this?this:Array,u=arguments.length,n=u>1?arguments[1]:void 0,p=void 0!==n,b=0,s=e(m);if(p&&(n=g(n,u>2?arguments[2]:void 0,2)),void 0==s||o==Array&&d(s)){for(l=new o(t=i(m.length));t>b;b++){c(l,b,p?n(m[b],b):m[b])}}else {for(q=s.call(m),l=new o();!(r=q.next()).done;b++){c(l,b,p?h(q,n,[r.value,b],!0):r.value)}}return l.length=b,l}})},function(c,d,a){var b=a(0);b(b.S,'Array',{isArray:a(90)})},function(b,e,a){var d=a(5),c=a(30);b.exports=function(f){if('string'!==f&&'number'!==f&&'default'!==f){throw TypeError('Incorrect hint')}return c(d(this),'number'!=f)}},function(d,e,a){var c=a(7)('toPrimitive'),b=Date.prototype;c in b||a(18)(b,c,a(237))},function(e,f,c){var a=Date.prototype,b=a.toString,d=a.getTime;new Date(NaN)+''!='Invalid Date'&&c(15)(a,'toString',function(){var a=d.call(this);return a==a?b.call(this):'Invalid Date'})},function(d,g,f){var c=f(3),e=Date.prototype.getTime,b=Date.prototype.toISOString,a=function(a){return a>9?a:'0'+a};d.exports=c(function(){return '0385-07-25T07:06:39.999Z'!=b.call(new Date(-5.0E13-1))})||!c(function(){b.call(new Date(NaN))})?function(){if(!isFinite(e.call(this))){throw RangeError('Invalid time value')}var b=this,h=b.getUTCFullYear(),c=b.getUTCMilliseconds(),i=h<0?'-':h>9999?'+':'';return i+('00000'+Math.abs(h)).slice(i?-6:-4)+'-'+a(b.getUTCMonth()+1)+'-'+a(b.getUTCDate())+'T'+a(b.getUTCHours())+':'+a(b.getUTCMinutes())+':'+a(b.getUTCSeconds())+'.'+(c>99?c:'0'+a(c))+'Z'}:b},function(d,e,c){var a=c(0),b=c(240);a(a.P+a.F*(Date.prototype.toISOString!==b),'Date',{toISOString:b})},function(e,f,a){var b=a(0),c=a(14),d=a(30);b(b.P+b.F*a(3)(function(){return null!==(new Date(NaN)).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),'Date',{toJSON:function(h){var g=c(this),b=d(g);return 'number'!=typeof b||isFinite(b)?g.toISOString():null}})},function(c,d,b){var a=b(0);a(a.S,'Date',{now:function(){return (new Date()).getTime()}})},function(b,c,a){a(13)('sup',function(d){return function(){return d(this,'sup','','')}})},function(b,c,a){a(13)('sub',function(d){return function(){return d(this,'sub','','')}})},function(b,c,a){a(13)('strike',function(d){return function(){return d(this,'strike','','')}})},function(b,c,a){a(13)('small',function(d){return function(){return d(this,'small','','')}})},function(b,c,a){a(13)('link',function(d){return function(e){return d(this,'a','href',e)}})},function(b,c,a){a(13)('italics',function(d){return function(){return d(this,'i','','')}})},function(b,c,a){a(13)('fontsize',function(d){return function(e){return d(this,'font','size',e)}})},function(b,c,a){a(13)('fontcolor',function(d){return function(e){return d(this,'font','color',e)}})},function(b,c,a){a(13)('fixed',function(d){return function(){return d(this,'tt','','')}})},function(b,c,a){a(13)('bold',function(d){return function(){return d(this,'b','','')}})},function(b,c,a){a(13)('blink',function(d){return function(){return d(this,'blink','','')}})},function(b,c,a){a(13)('big',function(d){return function(){return d(this,'big','','')}})},function(b,c,a){a(13)('anchor',function(d){return function(e){return d(this,'a','name',e)}})},function(f,g,a){var b=a(0),d=a(12),e=a(82),c=''.startsWith;b(b.P+b.F*a(80)('startsWith'),'String',{startsWith:function(j){var i=e(this,j,'startsWith'),b=d(Math.min(arguments.length>1?arguments[1]:void 0,i.length)),h=String(j);return c?c.call(i,h,b):i.slice(b,b+h.length)===h}})},function(c,d,a){var b=a(0);b(b.P,'String',{repeat:a(136)})},function(d,e,a){var b=a(0),c=a(82);b(b.P+b.F*a(80)('includes'),'String',{includes:function(b){return !!~c(this,b,'includes').indexOf(b,arguments.length>1?arguments[1]:void 0)}})},function(f,g,a){var b=a(0),c=a(12),e=a(82),d=''.endsWith;b(b.P+b.F*a(80)('endsWith'),'String',{endsWith:function(j){var h=e(this,j,'endsWith'),k=arguments.length>1?arguments[1]:void 0,l=c(h.length),b=void 0===k?l:Math.min(c(k),l),i=String(j);return d?d.call(h,i,b):h.slice(b-i.length,b)===i}})},function(d,e,a){var b=a(0),c=a(133)(!1);b(b.P,'String',{codePointAt:function(b){return c(this,b)}})},function(c,d,a){var b=a(133)(!0);a(83)(String,'String',function(b){this._t=String(b),this._i=0},function(){var e,g=this._t,f=this._i;return f>=g.length?{value:void 0,done:!0}:(e=b(g,f),this._i+=e.length,{value:e,done:!1})})},function(b,c,a){a(64)('trim',function(d){return function(){return d(this,3)}})},function(e,f,a){var b=a(0),c=a(21),d=a(12);b(b.S,'String',{raw:function(i){for(var h=c(i.raw),j=d(h.length),k=arguments.length,g=[],b=0;j>b;){g.push(String(h[b++])),b<k&&g.push(String(arguments[b]))}return g.join('')}})},function(f,g,b){var a=b(0),e=b(34),c=String.fromCharCode,d=String.fromCodePoint;a(a.S+a.F*(!!d&&1!=d.length),'String',{fromCodePoint:function(j){for(var a,d=[],i=arguments.length,h=0;i>h;){if(a=+arguments[h++],e(a,1114111)!==a){throw RangeError(a+' is not a valid code point')}d.push(a<65536?c(a):c(55296+((a-=65536)>>10),a%1024+56320))}return d.join('')}})},function(c,d,b){var a=b(0);a(a.S,'Math',{trunc:function(a){return (a>0?Math.floor:Math.ceil)(a)}})},function(e,f,b){var d=b(0),a=b(84),c=Math.exp;d(d.S,'Math',{tanh:function(d){var h=a(d=+d),g=a(-d);return h==1/0?1:g==1/0?-1:(h-g)/(c(d)+c(-d))}})},function(e,f,a){var b=a(0),c=a(84),d=Math.exp;b(b.S+b.F*a(3)(function(){return -2.0E-17!=!Math.sinh(-2.0E-17)}),'Math',{sinh:function(b){return Math.abs(b=+b)<1?(c(b)-c(-b))/2:(d(b-1)-d(-b-1))*(Math.E/2)}})},function(c,d,a){var b=a(0);b(b.S,'Math',{sign:a(85)})},function(c,d,b){var a=b(0);a(a.S,'Math',{log2:function(a){return Math.log(a)/Math.LN2}})},function(c,d,a){var b=a(0);b(b.S,'Math',{log1p:a(134)})},function(c,d,b){var a=b(0);a(a.S,'Math',{log10:function(a){return Math.log(a)*Math.LOG10E}})},function(d,e,c){var a=c(0),b=Math.imul;a(a.S+a.F*c(3)(function(){return -5!=b(4.294967295E9,5)||2!=b.length}),'Math',{imul:function(h,i){var b=+h,g=+i,a=65535&b,f=65535&g;return 0|a*f+((65535&b>>>16)*f+a*(65535&g>>>16)<<16>>>0)}})},function(d,e,c){var a=c(0),b=Math.abs;a(a.S,'Math',{hypot:function(k,l){for(var a,h,g=0,i=0,j=arguments.length,f=0;i<j;){f<(a=b(arguments[i++]))?(g=g*(h=f/a)*h+1,f=a):g+=a>0?(h=a/f)*h:a}return f===1/0?1/0:f*Math.sqrt(g)}})},function(f,i,g){var h=g(85),a=Math.pow,c=a(2,-52),b=a(2,-23),e=a(2,127)*(2-b),d=a(2,-126);f.exports=Math.fround||function(l){var m,j,a=Math.abs(l),k=h(l);return a<d?k*(a/d/b+1/c-1/c)*d*b:(j=(m=(1+b/c)*a)-(m-a))>e||j!=j?k*(1/0):k*j}},function(c,d,a){var b=a(0);b(b.S,'Math',{fround:a(275)})},function(d,e,c){var a=c(0),b=c(84);a(a.S+a.F*(b!=Math.expm1),'Math',{expm1:b})},function(d,e,c){var b=c(0),a=Math.exp;b(b.S,'Math',{cosh:function(b){return (a(b=+b)+a(-b))/2}})},function(c,d,b){var a=b(0);a(a.S,'Math',{clz32:function(a){return (a>>>=0)?31-Math.floor(Math.log(a+0.5)*Math.LOG2E):32}})},function(d,e,a){var b=a(0),c=a(85);b(b.S,'Math',{cbrt:function(b){return c(b=+b)*Math.pow(Math.abs(b),1/3)}})},function(d,e,c){var a=c(0),b=Math.atanh;a(a.S+a.F*!(b&&1/b(-0)<0),'Math',{atanh:function(a){return 0==(a=+a)?a:Math.log((1+a)/(1-a))/2}})},function(b,e,d){var a=d(0),c=Math.asinh;a(a.S+a.F*!(c&&1/c(0)>0),'Math',{asinh:function b(a){return isFinite(a=+a)&&0!=a?a<0?-b(-a):Math.log(a+Math.sqrt(a*a+1)):a}})},function(f,g,c){var a=c(0),e=c(134),d=Math.sqrt,b=Math.acosh;a(a.S+a.F*!(b&&710==Math.floor(b(Number.MAX_VALUE))&&b(1/0)==1/0),'Math',{acosh:function(a){return (a=+a)<1?NaN:a>9.490626562425156E7?Math.log(a)+Math.LN2:e(a-1+d(a-1)*d(a+1))}})},function(d,e,c){var a=c(0),b=c(139);a(a.S+a.F*(Number.parseInt!=b),'Number',{parseInt:b})},function(d,e,c){var a=c(0),b=c(138);a(a.S+a.F*(Number.parseFloat!=b),'Number',{parseFloat:b})},function(c,d,b){var a=b(0);a(a.S,'Number',{MIN_SAFE_INTEGER:-9.007199254740991E15})},function(c,d,b){var a=b(0);a(a.S,'Number',{MAX_SAFE_INTEGER:9.007199254740991E15})},function(e,f,a){var b=a(0),c=a(135),d=Math.abs;b(b.S,'Number',{isSafeInteger:function(b){return c(b)&&d(b)<=9.007199254740991E15}})},function(c,d,b){var a=b(0);a(a.S,'Number',{isNaN:function(a){return a!=a}})},function(c,d,a){var b=a(0);b(b.S,'Number',{isInteger:a(135)})},function(d,e,a){var b=a(0),c=a(6).isFinite;b(b.S,'Number',{isFinite:function(b){return 'number'==typeof b&&c(b)}})},function(c,d,b){var a=b(0);a(a.S,'Number',{EPSILON:Math.pow(2,-52)})},function(f,g,b){var c=b(0),d=b(3),e=b(137),a=(1).toPrecision;c(c.P+c.F*(d(function(){return '1'!==a.call(1,void 0)})||!d(function(){a.call({})})),'Number',{toPrecision:function(c){var d=e(this,'Number#toPrecision: incorrect invocation!');return void 0===c?a.call(d):a.call(d,c)}})},function(n,o,d){var f=d(0),l=d(24),m=d(137),g=d(136),i=(1).toFixed,k=Math.floor,a=[0,0,0,0,0,0],j='Number.toFixed: incorrect invocation!',b=function(e,f){for(var c=-1,b=f;++c<6;){b+=e*a[c],a[c]=b%10000000,b=k(b/10000000)}},e=function(e){for(var c=6,b=0;--c>=0;){b+=a[c],a[c]=k(b/e),b=b%e*10000000}},h=function(){for(var c=6,b='';--c>=0;){if(''!==b||0===c||0!==a[c]){var e=String(a[c]);b=''===b?e:b+g.call('0',7-e.length)+e}}return b},c=function(a,b,e){return 0===b?e:b%2==1?c(a,b-1,e*a):c(a*a,b/2,e)};f(f.P+f.F*(!!i&&('0.000'!==(8.0E-5).toFixed(3)||'1'!==(0.9).toFixed(0)||'1.25'!==(1.255).toFixed(2)||'1000000000000000128'!==(1.00000000000000013E18).toFixed(0))||!d(3)(function(){i.call({})})),'Number',{toFixed:function(t){var p,r,k,q,a=m(this,j),f=l(t),s='',i='0';if(f<0||f>20){throw RangeError(j)}if(a!=a){return 'NaN'}if(a<=-1.0E21||a>=1.0E21){return String(a)}if(a<0&&(s='-',a=-a),a>1.0E-21){if(r=(p=function(c){for(var b=0,a=c;a>=4096;){b+=12,a/=4096}for(;a>=2;){b+=1,a/=2}return b}(a*c(2,69,1))-69)<0?a*c(2,-p,1):a/c(2,p,1),r*=4.503599627370496E15,(p=52-p)>0){for(b(0,r),k=f;k>=7;){b(10000000,0),k-=7}for(b(c(10,k,1),0),k=p-1;k>=23;){e(1<<23),k-=23}e(1<<k),b(1,1),e(2),i=h()}else {b(0,r),b(1<<-p,0),i=h()+g.call('0',f)}}return i=f>0?s+((q=i.length)<=f?'0.'+g.call('0',f-q)+i:i.slice(0,q-f)+'.'+i.slice(q-f)):s+i}})},function(u,v,b){var j=b(6),g=b(16),i=b(25),s=b(86),l=b(30),t=b(3),m=b(32).f,r=b(23).f,o=b(9).f,q=b(64).trim,a=j.Number,e=a,d=a.prototype,n='Number'==i(b(33)(d)),p='trim' in String.prototype,k=function(j){var a=l(j,!1);if('string'==typeof a&&a.length>2){var h,f,d,e=(a=p?a.trim():q(a,3)).charCodeAt(0);if(43===e||45===e){if(88===(h=a.charCodeAt(2))||120===h){return NaN}}else {if(48===e){switch(a.charCodeAt(1)){case 66:case 98:f=2,d=49;break;case 79:case 111:f=8,d=55;break;default:return +a;}for(var i,g=a.slice(2),c=0,k=g.length;c<k;c++){if((i=g.charCodeAt(c))<48||i>d){return NaN}}return parseInt(g,f)}}}return +a};if(!a(' 0o1')||!a('0b1')||a('+0x1')){a=function(g){var f=arguments.length<1?0:g,c=this;return c instanceof a&&(n?t(function(){d.valueOf.call(c)}):'Number'!=i(c))?s(new e(k(f)),c,a):k(f)};for(var c,h=b(11)?m(e):'MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger'.split(','),f=0;h.length>f;f++){g(e,c=h[f])&&!g(a,c)&&o(a,c,r(e,c))}a.prototype=d,d.constructor=a,b(15)(j,'Number',a)}},function(d,e,c){var a=c(0),b=c(138);a(a.G+a.F*(parseFloat!=b),{parseFloat:b})},function(d,e,c){var a=c(0),b=c(139);a(a.G+a.F*(parseInt!=b),{parseInt:b})},function(f,g,a){var c=a(4),e=a(31),b=a(7)('hasInstance'),d=Function.prototype;b in d||a(9).f(d,b,{value:function(b){if('function'!=typeof this||!c(b)){return !1}if(!c(this.prototype)){return b instanceof this}for(;b=e(b);){if(this.prototype===b){return !0}}return !1}})},function(e,f,b){var d=b(9).f,a=Function.prototype,c=/^\s*function ([^ (]*)/;'name' in a||b(11)&&d(a,'name',{configurable:!0,get:function(){try{return (''+this).match(c)[1]}catch(g){return ''}}})},function(c,d,a){var b=a(0);b(b.P,'Function',{bind:a(141)})},function(d,e,a){var c=a(65),b={};b[a(7)('toStringTag')]='z',b+''!='[object z]'&&a(15)(Object.prototype,'toString',function(){return '[object '+c(this)+']'},!0)},function(c,d,a){var b=a(0);b(b.S,'Object',{setPrototypeOf:a(88).set})},function(a,b){a.exports=Object.is||function(c,d){return c===d?0!==c||1/c==1/d:c!=c&&d!=d}},function(c,d,a){var b=a(0);b(b.S,'Object',{is:a(303)})},function(c,d,b){var a=b(0);a(a.S+a.F,'Object',{assign:b(142)})},function(c,d,a){var b=a(4);a(20)('isExtensible',function(e){return function(f){return !!b(f)&&(!e||e(f))}})},function(c,d,a){var b=a(4);a(20)('isSealed',function(e){return function(f){return !b(f)||!!e&&e(f)}})},function(c,d,a){var b=a(4);a(20)('isFrozen',function(e){return function(f){return !b(f)||!!e&&e(f)}})},function(d,e,a){var c=a(4),b=a(29).onFreeze;a(20)('preventExtensions',function(f){return function(g){return f&&c(g)?f(b(g)):g}})},function(d,e,a){var c=a(4),b=a(29).onFreeze;a(20)('seal',function(f){return function(g){return f&&c(g)?f(b(g)):g}})},function(d,e,a){var c=a(4),b=a(29).onFreeze;a(20)('freeze',function(f){return function(g){return f&&c(g)?f(b(g)):g}})},function(b,c,a){a(20)('getOwnPropertyNames',function(){return a(143).f})},function(d,e,a){var c=a(14),b=a(55);a(20)('keys',function(){return function(f){return b(c(f))}})},function(d,e,a){var c=a(14),b=a(31);a(20)('getPrototypeOf',function(){return function(f){return b(c(f))}})},function(d,e,a){var c=a(21),b=a(23).f;a(20)('getOwnPropertyDescriptor',function(){return function(f,g){return b(c(f),g)}})},function(c,d,a){var b=a(0);b(b.S+b.F*!a(11),'Object',{defineProperties:a(144)})},function(c,d,a){var b=a(0);b(b.S+b.F*!a(11),'Object',{defineProperty:a(9).f})},function(c,d,a){var b=a(0);b(b.S,'Object',{create:a(33)})},function(b,f,a){var e=a(55),c=a(67),d=a(66);b.exports=function(g){var l=e(g),j=c.f;if(j){for(var k,h=j(g),m=d.f,i=0;h.length>i;){m.call(g,k=h[i++])&&l.push(k)}}return l}},function(d,h,a){var f=a(6),b=a(37),e=a(43),g=a(146),c=a(9).f;d.exports=function(i){var j=b.Symbol||(b.Symbol=e?{}:f.Symbol||{});'_'==i.charAt(0)||i in j||c(j,i,{value:g.f(i)})}},function(ab,ac,a){var r=a(6),b=a(16),y=a(11),e=a(0),Q=a(15),_=a(29).KEY,R=a(3),x=a(94),w=a(44),Z=a(35),m=a(7),aa=a(146),$=a(320),X=a(319),Y=a(90),A=a(5),W=a(4),q=a(21),u=a(30),s=a(36),k=a(33),J=a(143),G=a(23),T=a(9),V=a(55),L=G.f,h=T.f,S=J.f,d=r.Symbol,n=r.JSON,p=n&&n.stringify,c=m('_hidden'),M=m('toPrimitive'),U={}.propertyIsEnumerable,j=x('symbol-registry'),g=x('symbols'),l=x('op-symbols'),f=Object.prototype,i='function'==typeof d,z=r.QObject,v=!z||!z.prototype||!z.prototype.findChild,t=y&&R(function(){return 7!=k(h({},'a',{get:function(){return h(this,'a',{value:7}).a}})).a})?function(d,b,e){var c=L(f,b);c&&delete f[b],h(d,b,e),c&&d!==f&&h(f,b,c)}:h,H=function(b){var c=g[b]=k(d.prototype);return c._k=b,c},B=i&&'symbol'==typeof d.iterator?function(b){return 'symbol'==typeof b}:function(b){return b instanceof d},o=function(d,e,i){return d===f&&o(l,e,i),A(d),e=u(e,!0),A(i),b(g,e)?(i.enumerable?(b(d,c)&&d[c][e]&&(d[c][e]=!1),i=k(i,{enumerable:s(0,!1)})):(b(d,c)||h(d,c,s(1,{})),d[c][e]=!0),t(d,e,i)):h(d,e,i)},I=function(b,c){A(b);for(var e,f=X(c=q(c)),d=0,g=f.length;g>d;){o(b,e=f[d++],c[e])}return b},N=function(d){var e=U.call(this,d=u(d,!0));return !(this===f&&b(g,d)&&!b(l,d))&&(!(e||!b(this,d)||!b(g,d)||b(this,c)&&this[c][d])||e)},O=function(e,d){if(e=q(e),d=u(d,!0),e!==f||!b(g,d)||b(l,d)){var h=L(e,d);return !h||!b(g,d)||b(e,c)&&e[c][d]||(h.enumerable=!0),h}},P=function(i){for(var d,e=S(q(i)),h=[],f=0;e.length>f;){b(g,d=e[f++])||d==c||d==_||h.push(d)}return h},K=function(d){for(var c,e=d===f,i=S(e?l:q(d)),h=[],j=0;i.length>j;){!b(g,c=i[j++])||e&&!b(f,c)||h.push(g[c])}return h};i||(Q((d=function(){if(this instanceof d){throw TypeError('Symbol is not a constructor!')}var e=Z(arguments.length>0?arguments[0]:void 0),g=function(d){this===f&&g.call(l,d),b(this,c)&&b(this[c],e)&&(this[c][e]=!1),t(this,e,s(1,d))};return y&&v&&t(f,e,{configurable:!0,set:g}),H(e)}).prototype,'toString',function(){return this._k}),G.f=O,T.f=o,a(32).f=J.f=P,a(66).f=N,a(67).f=K,y&&!a(43)&&Q(f,'propertyIsEnumerable',N,!0),aa.f=function(b){return H(m(b))}),e(e.G+e.W+e.F*!i,{Symbol:d});for(var F='hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables'.split(','),C=0;F.length>C;){m(F[C++])}for(var E=V(m.store),D=0;E.length>D;){$(E[D++])}e(e.S+e.F*!i,'Symbol',{'for':function(c){return b(j,c+='')?j[c]:j[c]=d(c)},keyFor:function(b){if(!B(b)){throw TypeError(b+' is not a symbol!')}for(var c in j){if(j[c]===b){return c}}},useSetter:function(){v=!0},useSimple:function(){v=!1}}),e(e.S+e.F*!i,'Object',{create:function(b,c){return void 0===c?k(b):I(k(b),c)},defineProperty:o,defineProperties:I,getOwnPropertyDescriptor:O,getOwnPropertyNames:P,getOwnPropertySymbols:K}),n&&e(e.S+e.F*(!i||R(function(){var b=d();return '[null]'!=p([b])||'{}'!=p({a:b})||'{}'!=p(Object(b))})),'JSON',{stringify:function(d){for(var b,e,c=[d],f=1;arguments.length>f;){c.push(arguments[f++])}if(e=b=c[1],(W(b)||void 0!==d)&&!B(d)){return Y(b)||(b=function(c,b){if('function'==typeof e&&(b=e.call(this,c,b)),!B(b)){return b}}),c[1]=b,p.apply(n,c)}}}),d.prototype[M]||a(18)(d.prototype,M,d.prototype.valueOf),w(d,'Symbol'),w(Math,'Math',!0),w(r.JSON,'JSON',!0)},function(b,c,a){a(321),a(318),a(317),a(316),a(315),a(314),a(313),a(312),a(311),a(310),a(309),a(308),a(307),a(306),a(305),a(304),a(302),a(301),a(300),a(299),a(298),a(297),a(296),a(295),a(294),a(293),a(292),a(291),a(290),a(289),a(288),a(287),a(286),a(285),a(284),a(283),a(282),a(281),a(280),a(279),a(278),a(277),a(276),a(274),a(273),a(272),a(271),a(270),a(269),a(268),a(267),a(266),a(265),a(264),a(263),a(262),a(261),a(260),a(259),a(258),a(257),a(256),a(255),a(254),a(253),a(252),a(251),a(250),a(249),a(248),a(247),a(246),a(245),a(244),a(243),a(242),a(241),a(239),a(238),a(236),a(235),a(234),a(233),a(232),a(231),a(230),a(227),a(226),a(225),a(224),a(223),a(222),a(221),a(220),a(219),a(218),a(217),a(216),a(215),a(127),a(214),a(213),a(125),a(212),a(211),a(210),a(209),a(208),a(204),a(203),a(202),a(201),a(200),a(199),a(198),a(197),a(196),a(195),a(194),a(193),a(192),a(191),a(190),a(189),a(188),a(187),a(186),a(185),a(184),a(183),a(182),a(181),a(180),a(179),a(177),a(176),a(175),b.exports=a(37)},function(aa,a,b){Object.defineProperty(a,'__esModule',{value:!0}),a.SFSRoom=a.SetBuddyVariablesRequest=a.RemoveBuddyRequest=a.InitBuddyListRequest=a.GoOnlineRequest=a.BuddyMessageRequest=a.BlockBuddyRequest=a.AddBuddyRequest=a.SetUserPositionRequest=a.QuickJoinGameRequest=a.JoinRoomInvitationRequest=a.InviteUsersRequest=a.InvitationReplyRequest=a.CreateSFSGameRequest=a.BanUserRequest=a.KickUserRequest=a.ExtensionRequest=a.FindUsersRequest=a.FindRoomsRequest=a.PlayerToSpectatorRequest=a.SpectatorToPlayerRequest=a.UnsubscribeRoomGroupRequest=a.SubscribeRoomGroupRequest=a.SetUserVariablesRequest=a.SetRoomVariablesRequest=a.AdminMessageRequest=a.ModeratorMessageRequest=a.ObjectMessageRequest=a.PrivateMessageRequest=a.PublicMessageRequest=a.ChangeRoomCapacityRequest=a.ChangeRoomPasswordStateRequest=a.ChangeRoomNameRequest=a.LeaveRoomRequest=a.CreateRoomRequest=a.JoinRoomRequest=a.LogoutRequest=a.LoginRequest=a.ClientDisconnectionReason=a.LoggerEvent=a.LogLevel=a.SFSErrorCodes=a.MessageRecipientMode=a.BanMode=a.MapLimits=a.RoomExtension=a.RoomEvents=a.RoomPermissions=a.MMORoomSettings=a.SFSGameSettings=a.RoomSettings=a.UserProperties=a.RoomProperties=a.StringMatch=a.NumberMatch=a.BoolMatch=a.LogicOperator=a.MatchExpression=a.MMOItemVariable=a.ReservedBuddyVariables=a.SFSBuddyVariable=a.ReservedRoomVariables=a.SFSRoomVariable=a.SFSUserVariable=a.VariableType=a.UserPrivileges=a.InvitationReply=a.Vec3D=a.SFSArray=a.SFSObject=a.SFSDataType=a.SFSBuddyEvent=a.SFSEvent=a.SmartFox=void 0;var l=b(322);Object.keys(l).forEach(function(c){'default'!==c&&'__esModule'!==c&&Object.defineProperty(a,c,{enumerable:!0,get:function(){return l[c]}})});var R=b(174);Object.defineProperty(a,'SmartFox',{enumerable:!0,get:function(){return R.SmartFox}});var k=b(38);Object.defineProperty(a,'SFSEvent',{enumerable:!0,get:function(){return k.SFSEvent}}),Object.defineProperty(a,'SFSBuddyEvent',{enumerable:!0,get:function(){return k.SFSBuddyEvent}});var e=b(8);Object.defineProperty(a,'SFSDataType',{enumerable:!0,get:function(){return e.SFSDataType}}),Object.defineProperty(a,'SFSObject',{enumerable:!0,get:function(){return e.SFSObject}}),Object.defineProperty(a,'SFSArray',{enumerable:!0,get:function(){return e.SFSArray}}),Object.defineProperty(a,'Vec3D',{enumerable:!0,get:function(){return e.Vec3D}});var P=b(71);Object.defineProperty(a,'InvitationReply',{enumerable:!0,get:function(){return P.InvitationReply}});var X=b(47);Object.defineProperty(a,'UserPrivileges',{enumerable:!0,get:function(){return X.UserPrivileges}});var Q=b(48);Object.defineProperty(a,'VariableType',{enumerable:!0,get:function(){return Q.VariableType}});var U=b(58);Object.defineProperty(a,'SFSUserVariable',{enumerable:!0,get:function(){return U.SFSUserVariable}});var i=b(49);Object.defineProperty(a,'SFSRoomVariable',{enumerable:!0,get:function(){return i.SFSRoomVariable}}),Object.defineProperty(a,'ReservedRoomVariables',{enumerable:!0,get:function(){return i.ReservedRoomVariables}});var j=b(46);Object.defineProperty(a,'SFSBuddyVariable',{enumerable:!0,get:function(){return j.SFSBuddyVariable}}),Object.defineProperty(a,'ReservedBuddyVariables',{enumerable:!0,get:function(){return j.ReservedBuddyVariables}});var O=b(72);Object.defineProperty(a,'MMOItemVariable',{enumerable:!0,get:function(){return O.MMOItemVariable}});var m=b(45);Object.defineProperty(a,'MatchExpression',{enumerable:!0,get:function(){return m.MatchExpression}}),Object.defineProperty(a,'LogicOperator',{enumerable:!0,get:function(){return m.LogicOperator}});var f=b(158);Object.defineProperty(a,'BoolMatch',{enumerable:!0,get:function(){return f.BoolMatch}}),Object.defineProperty(a,'NumberMatch',{enumerable:!0,get:function(){return f.NumberMatch}}),Object.defineProperty(a,'StringMatch',{enumerable:!0,get:function(){return f.StringMatch}});var h=b(157);Object.defineProperty(a,'RoomProperties',{enumerable:!0,get:function(){return h.RoomProperties}}),Object.defineProperty(a,'UserProperties',{enumerable:!0,get:function(){return h.UserProperties}});var c=b(56);Object.defineProperty(a,'RoomSettings',{enumerable:!0,get:function(){return c.RoomSettings}}),Object.defineProperty(a,'SFSGameSettings',{enumerable:!0,get:function(){return c.SFSGameSettings}}),Object.defineProperty(a,'MMORoomSettings',{enumerable:!0,get:function(){return c.MMORoomSettings}}),Object.defineProperty(a,'RoomPermissions',{enumerable:!0,get:function(){return c.RoomPermissions}}),Object.defineProperty(a,'RoomEvents',{enumerable:!0,get:function(){return c.RoomEvents}}),Object.defineProperty(a,'RoomExtension',{enumerable:!0,get:function(){return c.RoomExtension}}),Object.defineProperty(a,'MapLimits',{enumerable:!0,get:function(){return c.MapLimits}}),Object.defineProperty(a,'BanMode',{enumerable:!0,get:function(){return c.BanMode}}),Object.defineProperty(a,'MessageRecipientMode',{enumerable:!0,get:function(){return c.MessageRecipientMode}});var Y=b(73);Object.defineProperty(a,'SFSErrorCodes',{enumerable:!0,get:function(){return Y.SFSErrorCodes}});var g=b(50);Object.defineProperty(a,'LogLevel',{enumerable:!0,get:function(){return g.LogLevel}}),Object.defineProperty(a,'LoggerEvent',{enumerable:!0,get:function(){return g.LoggerEvent}});var V=b(51);Object.defineProperty(a,'ClientDisconnectionReason',{enumerable:!0,get:function(){return V.ClientDisconnectionReason}});var G=b(117);Object.defineProperty(a,'LoginRequest',{enumerable:!0,get:function(){return G.LoginRequest}});var t=b(116);Object.defineProperty(a,'LogoutRequest',{enumerable:!0,get:function(){return t.LogoutRequest}});var F=b(115);Object.defineProperty(a,'JoinRoomRequest',{enumerable:!0,get:function(){return F.JoinRoomRequest}});var C=b(70);Object.defineProperty(a,'CreateRoomRequest',{enumerable:!0,get:function(){return C.CreateRoomRequest}});var p=b(156);Object.defineProperty(a,'LeaveRoomRequest',{enumerable:!0,get:function(){return p.LeaveRoomRequest}});var Z=b(114);Object.defineProperty(a,'ChangeRoomNameRequest',{enumerable:!0,get:function(){return Z.ChangeRoomNameRequest}});var x=b(113);Object.defineProperty(a,'ChangeRoomPasswordStateRequest',{enumerable:!0,get:function(){return x.ChangeRoomPasswordStateRequest}});var H=b(112);Object.defineProperty(a,'ChangeRoomCapacityRequest',{enumerable:!0,get:function(){return H.ChangeRoomCapacityRequest}});var d=b(69);Object.defineProperty(a,'PublicMessageRequest',{enumerable:!0,get:function(){return d.PublicMessageRequest}}),Object.defineProperty(a,'PrivateMessageRequest',{enumerable:!0,get:function(){return d.PrivateMessageRequest}}),Object.defineProperty(a,'ObjectMessageRequest',{enumerable:!0,get:function(){return d.ObjectMessageRequest}}),Object.defineProperty(a,'ModeratorMessageRequest',{enumerable:!0,get:function(){return d.ModeratorMessageRequest}}),Object.defineProperty(a,'AdminMessageRequest',{enumerable:!0,get:function(){return d.AdminMessageRequest}});var T=b(111);Object.defineProperty(a,'SetRoomVariablesRequest',{enumerable:!0,get:function(){return T.SetRoomVariablesRequest}});var D=b(110);Object.defineProperty(a,'SetUserVariablesRequest',{enumerable:!0,get:function(){return D.SetUserVariablesRequest}});var u=b(109);Object.defineProperty(a,'SubscribeRoomGroupRequest',{enumerable:!0,get:function(){return u.SubscribeRoomGroupRequest}});var B=b(108);Object.defineProperty(a,'UnsubscribeRoomGroupRequest',{enumerable:!0,get:function(){return B.UnsubscribeRoomGroupRequest}});var S=b(107);Object.defineProperty(a,'SpectatorToPlayerRequest',{enumerable:!0,get:function(){return S.SpectatorToPlayerRequest}});var I=b(106);Object.defineProperty(a,'PlayerToSpectatorRequest',{enumerable:!0,get:function(){return I.PlayerToSpectatorRequest}});var s=b(105);Object.defineProperty(a,'FindRoomsRequest',{enumerable:!0,get:function(){return s.FindRoomsRequest}});var q=b(104);Object.defineProperty(a,'FindUsersRequest',{enumerable:!0,get:function(){return q.FindUsersRequest}});var A=b(96);Object.defineProperty(a,'ExtensionRequest',{enumerable:!0,get:function(){return A.ExtensionRequest}});var M=b(155);Object.defineProperty(a,'KickUserRequest',{enumerable:!0,get:function(){return M.KickUserRequest}});var r=b(154);Object.defineProperty(a,'BanUserRequest',{enumerable:!0,get:function(){return r.BanUserRequest}});var $=b(153);Object.defineProperty(a,'CreateSFSGameRequest',{enumerable:!0,get:function(){return $.CreateSFSGameRequest}});var W=b(152);Object.defineProperty(a,'InvitationReplyRequest',{enumerable:!0,get:function(){return W.InvitationReplyRequest}});var J=b(68);Object.defineProperty(a,'InviteUsersRequest',{enumerable:!0,get:function(){return J.InviteUsersRequest}});var z=b(151);Object.defineProperty(a,'JoinRoomInvitationRequest',{enumerable:!0,get:function(){return z.JoinRoomInvitationRequest}});var v=b(150);Object.defineProperty(a,'QuickJoinGameRequest',{enumerable:!0,get:function(){return v.QuickJoinGameRequest}});var _=b(103);Object.defineProperty(a,'SetUserPositionRequest',{enumerable:!0,get:function(){return _.SetUserPositionRequest}});var w=b(101);Object.defineProperty(a,'AddBuddyRequest',{enumerable:!0,get:function(){return w.AddBuddyRequest}});var y=b(99);Object.defineProperty(a,'BlockBuddyRequest',{enumerable:!0,get:function(){return y.BlockBuddyRequest}});var K=b(149);Object.defineProperty(a,'BuddyMessageRequest',{enumerable:!0,get:function(){return K.BuddyMessageRequest}});var L=b(98);Object.defineProperty(a,'GoOnlineRequest',{enumerable:!0,get:function(){return L.GoOnlineRequest}});var N=b(102);Object.defineProperty(a,'InitBuddyListRequest',{enumerable:!0,get:function(){return N.InitBuddyListRequest}});var E=b(100);Object.defineProperty(a,'RemoveBuddyRequest',{enumerable:!0,get:function(){return E.RemoveBuddyRequest}});var o=b(97);Object.defineProperty(a,'SetBuddyVariablesRequest',{enumerable:!0,get:function(){return o.SetBuddyVariablesRequest}});var n=b(10);Object.defineProperty(a,'SFSRoom',{enumerable:!0,get:function(){return n.SFSRoom}}),b(148)}])});